{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import ReactDOM from'react-dom';import DomHandler from'../utils/DomHandler';import{classNames}from'../utils/ClassNames';import UniqueComponentId from'../utils/UniqueComponentId';import{CSSTransition}from'react-transition-group';import ObjectUtils from'../utils/ObjectUtils';import{Ripple}from'../ripple/Ripple';export var Dialog=/*#__PURE__*/function(_Component){_inherits(Dialog,_Component);var _super=_createSuper(Dialog);function Dialog(props){var _this;_classCallCheck(this,Dialog);_this=_super.call(this,props);_this.state={maskVisible:props.visible,visible:false};if(!_this.props.onMaximize){_this.state.maximized=props.maximized;}_this.onClose=_this.onClose.bind(_assertThisInitialized(_this));_this.toggleMaximize=_this.toggleMaximize.bind(_assertThisInitialized(_this));_this.onDragStart=_this.onDragStart.bind(_assertThisInitialized(_this));_this.onResizeStart=_this.onResizeStart.bind(_assertThisInitialized(_this));_this.onMaskClick=_this.onMaskClick.bind(_assertThisInitialized(_this));_this.onEntered=_this.onEntered.bind(_assertThisInitialized(_this));_this.onExited=_this.onExited.bind(_assertThisInitialized(_this));_this.id=_this.props.id||UniqueComponentId();_this.dialogRef=React.createRef();return _this;}_createClass(Dialog,[{key:\"onClose\",value:function onClose(event){this.props.onHide();event.preventDefault();}},{key:\"focus\",value:function focus(){var activeElement=document.activeElement;var isActiveElementInDialog=activeElement&&this.dialogRef&&this.dialogRef.current.contains(activeElement);if(!isActiveElementInDialog&&this.props.closable){this.closeElement.focus();}}},{key:\"onMaskClick\",value:function onMaskClick(event){if(this.props.dismissableMask&&this.props.modal&&this.mask===event.target){this.onClose(event);}}},{key:\"toggleMaximize\",value:function toggleMaximize(event){var maximized=!this.maximized;if(this.props.onMaximize){this.props.onMaximize({originalEvent:event,maximized:maximized});}else{this.setState({maximized:maximized},this.changeScrollOnMaximizable);}event.preventDefault();}},{key:\"onDragStart\",value:function onDragStart(event){if(DomHandler.hasClass(event.target,'p-dialog-header-icon')||DomHandler.hasClass(event.target.parentElement,'p-dialog-header-icon')){return;}if(this.props.draggable){this.dragging=true;this.lastPageX=event.pageX;this.lastPageY=event.pageY;this.dialogEl.style.margin='0';DomHandler.addClass(document.body,'p-unselectable-text');if(this.props.onDragStart){this.props.onDragStart(event);}}}},{key:\"onDrag\",value:function onDrag(event){if(this.dragging){var width=DomHandler.getOuterWidth(this.dialogEl);var height=DomHandler.getOuterHeight(this.dialogEl);var deltaX=event.pageX-this.lastPageX;var deltaY=event.pageY-this.lastPageY;var offset=DomHandler.getOffset(this.dialogEl);var leftPos=offset.left+deltaX;var topPos=offset.top+deltaY;var viewport=DomHandler.getViewport();this.dialogEl.style.position='fixed';if(this.props.keepInViewport){if(leftPos>=this.props.minX&&leftPos+width<viewport.width){this.lastPageX=event.pageX;this.dialogEl.style.left=leftPos+'px';}if(topPos>=this.props.minY&&topPos+height<viewport.height){this.lastPageY=event.pageY;this.dialogEl.style.top=topPos+'px';}}else{this.lastPageX=event.pageX;this.dialogEl.style.left=leftPos+'px';this.lastPageY=event.pageY;this.dialogEl.style.top=topPos+'px';}if(this.props.onDrag){this.props.onDrag(event);}}}},{key:\"onDragEnd\",value:function onDragEnd(event){if(this.dragging){this.dragging=false;DomHandler.removeClass(document.body,'p-unselectable-text');if(this.props.onDragEnd){this.props.onDragEnd(event);}}}},{key:\"onResizeStart\",value:function onResizeStart(event){if(this.props.resizable){this.resizing=true;this.lastPageX=event.pageX;this.lastPageY=event.pageY;DomHandler.addClass(document.body,'p-unselectable-text');if(this.props.onResizeStart){this.props.onResizeStart(event);}}}},{key:\"onResize\",value:function onResize(event){if(this.resizing){var deltaX=event.pageX-this.lastPageX;var deltaY=event.pageY-this.lastPageY;var width=DomHandler.getOuterWidth(this.dialogEl);var height=DomHandler.getOuterHeight(this.dialogEl);var contentHeight=DomHandler.getOuterHeight(this.contentEl);var newWidth=width+deltaX;var newHeight=height+deltaY;var minWidth=this.dialogEl.style.minWidth;var minHeight=this.dialogEl.style.minHeight;var offset=DomHandler.getOffset(this.dialogEl);var viewport=DomHandler.getViewport();var hasBeenDragged=!parseInt(this.dialogEl.style.top)||!parseInt(this.dialogEl.style.left);if(hasBeenDragged){newWidth+=deltaX;newHeight+=deltaY;}if((!minWidth||newWidth>parseInt(minWidth))&&offset.left+newWidth<viewport.width){this.dialogEl.style.width=newWidth+'px';}if((!minHeight||newHeight>parseInt(minHeight))&&offset.top+newHeight<viewport.height){this.contentEl.style.height=contentHeight+newHeight-height+'px';this.dialogEl.style.height=newHeight+'px';}this.lastPageX=event.pageX;this.lastPageY=event.pageY;if(this.props.onResize){this.props.onResize(event);}}}},{key:\"onResizeEnd\",value:function onResizeEnd(event){if(this.resizing){this.resizing=false;DomHandler.removeClass(document.body,'p-unselectable-text');if(this.props.onResizeEnd){this.props.onResizeEnd(event);}}}},{key:\"resetPosition\",value:function resetPosition(){this.dialogEl.style.position='';this.dialogEl.style.left='';this.dialogEl.style.top='';this.dialogEl.style.margin='';}},{key:\"getPositionClass\",value:function getPositionClass(){var _this2=this;var positions=['center','left','right','top','top-left','top-right','bottom','bottom-left','bottom-right'];var pos=positions.find(function(item){return item===_this2.props.position||item.replace('-','')===_this2.props.position;});return pos?\"p-dialog-\".concat(pos):'';}},{key:\"zIndex\",get:function get(){return this.props.baseZIndex+DomHandler.generateZIndex();}},{key:\"maximized\",get:function get(){return this.props.onMaximize?this.props.maximized:this.state.maximized;}},{key:\"dialogEl\",get:function get(){return this.dialogRef.current;}},{key:\"onEntered\",value:function onEntered(){if(this.props.onShow){this.props.onShow();}if(this.props.focusOnShow){this.focus();}this.enableDocumentSettings();}},{key:\"onExited\",value:function onExited(){this.dragging=false;this.setState({maskVisible:false});this.disableDocumentSettings();}},{key:\"enableDocumentSettings\",value:function enableDocumentSettings(){this.bindGlobalListeners();if(this.props.blockScroll||this.props.maximizable&&this.maximized){DomHandler.addClass(document.body,'p-overflow-hidden');}}},{key:\"disableDocumentSettings\",value:function disableDocumentSettings(){this.unbindGlobalListeners();if(this.props.modal){var hasBlockScroll=document.primeDialogParams&&document.primeDialogParams.some(function(param){return param.hasBlockScroll;});if(!hasBlockScroll){DomHandler.removeClass(document.body,'p-overflow-hidden');}}else if(this.props.blockScroll||this.props.maximizable&&this.maximized){DomHandler.removeClass(document.body,'p-overflow-hidden');}}},{key:\"bindGlobalListeners\",value:function bindGlobalListeners(){if(this.props.draggable){this.bindDocumentDragListener();}if(this.props.resizable){this.bindDocumentResizeListeners();}if(this.props.closeOnEscape&&this.props.closable){this.bindDocumentKeyDownListener();}}},{key:\"unbindGlobalListeners\",value:function unbindGlobalListeners(){this.unbindDocumentDragListener();this.unbindDocumentResizeListeners();this.unbindDocumentKeyDownListener();}},{key:\"bindDocumentDragListener\",value:function bindDocumentDragListener(){this.documentDragListener=this.onDrag.bind(this);this.documentDragEndListener=this.onDragEnd.bind(this);window.document.addEventListener('mousemove',this.documentDragListener);window.document.addEventListener('mouseup',this.documentDragEndListener);}},{key:\"unbindDocumentDragListener\",value:function unbindDocumentDragListener(){if(this.documentDragListener&&this.documentDragEndListener){window.document.removeEventListener('mousemove',this.documentDragListener);window.document.removeEventListener('mouseup',this.documentDragEndListener);this.documentDragListener=null;this.documentDragEndListener=null;}}},{key:\"bindDocumentResizeListeners\",value:function bindDocumentResizeListeners(){this.documentResizeListener=this.onResize.bind(this);this.documentResizeEndListener=this.onResizeEnd.bind(this);window.document.addEventListener('mousemove',this.documentResizeListener);window.document.addEventListener('mouseup',this.documentResizeEndListener);}},{key:\"unbindDocumentResizeListeners\",value:function unbindDocumentResizeListeners(){if(this.documentResizeListener&&this.documentResizeEndListener){window.document.removeEventListener('mousemove',this.documentResizeListener);window.document.removeEventListener('mouseup',this.documentResizeEndListener);this.documentResizeListener=null;this.documentResizeEndListener=null;}}},{key:\"bindDocumentKeyDownListener\",value:function bindDocumentKeyDownListener(){var _this3=this;this.documentKeyDownListener=function(event){var currentTarget=event.currentTarget;if(currentTarget&&currentTarget.primeDialogParams){var params=currentTarget.primeDialogParams;var paramLength=params.length;var dialogId=params[paramLength-1].id;if(dialogId===_this3.id){var dialog=document.getElementById(dialogId);if(event.which===27){_this3.onClose(event);event.stopImmediatePropagation();params.splice(paramLength-1,1);}else if(event.which===9){event.preventDefault();var focusableElements=DomHandler.getFocusableElements(dialog);if(focusableElements&&focusableElements.length>0){if(!document.activeElement){focusableElements[0].focus();}else{var focusedIndex=focusableElements.indexOf(document.activeElement);if(event.shiftKey){if(focusedIndex===-1||focusedIndex===0)focusableElements[focusableElements.length-1].focus();else focusableElements[focusedIndex-1].focus();}else{if(focusedIndex===-1||focusedIndex===focusableElements.length-1)focusableElements[0].focus();else focusableElements[focusedIndex+1].focus();}}}}}}};var newParam={id:this.id,hasBlockScroll:this.props.blockScroll};document.primeDialogParams=document.primeDialogParams?[].concat(_toConsumableArray(document.primeDialogParams),[newParam]):[newParam];document.addEventListener('keydown',this.documentKeyDownListener);}},{key:\"unbindDocumentKeyDownListener\",value:function unbindDocumentKeyDownListener(){var _this4=this;if(this.documentKeyDownListener){document.removeEventListener('keydown',this.documentKeyDownListener);document.primeDialogParams=document.primeDialogParams&&document.primeDialogParams.filter(function(param){return param.id!==_this4.id;});this.documentKeyDownListener=null;}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this5=this;if(this.props.visible){this.setState({visible:true},function(){_this5.mask.style.zIndex=String(_this5.zIndex);});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){var _this6=this;if(this.props.visible&&!this.state.maskVisible){this.setState({maskVisible:true},function(){_this6.mask.style.zIndex=String(_this6.zIndex);});}if(this.props.visible!==this.state.visible&&this.state.maskVisible){this.setState({visible:this.props.visible});}if(prevProps.maximized!==this.props.maximized&&this.props.onMaximize){this.changeScrollOnMaximizable();}}},{key:\"changeScrollOnMaximizable\",value:function changeScrollOnMaximizable(){if(!this.props.blockScroll){var funcName=this.maximized?'addClass':'removeClass';DomHandler[funcName](document.body,'p-overflow-hidden');}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.disableDocumentSettings();}},{key:\"renderCloseIcon\",value:function renderCloseIcon(){var _this7=this;if(this.props.closable){return/*#__PURE__*/React.createElement(\"button\",{ref:function ref(el){return _this7.closeElement=el;},type:\"button\",className:\"p-dialog-header-icon p-dialog-header-close p-link\",\"aria-label\":this.props.ariaCloseIconLabel,onClick:this.onClose},/*#__PURE__*/React.createElement(\"span\",{className:\"p-dialog-header-close-icon pi pi-times\"}),/*#__PURE__*/React.createElement(Ripple,null));}return null;}},{key:\"renderMaximizeIcon\",value:function renderMaximizeIcon(){var iconClassName=classNames('p-dialog-header-maximize-icon pi',{'pi-window-maximize':!this.maximized,'pi-window-minimize':this.maximized});if(this.props.maximizable){return/*#__PURE__*/React.createElement(\"button\",{type:\"button\",className:\"p-dialog-header-icon p-dialog-header-maximize p-link\",onClick:this.toggleMaximize},/*#__PURE__*/React.createElement(\"span\",{className:iconClassName}),/*#__PURE__*/React.createElement(Ripple,null));}return null;}},{key:\"renderHeader\",value:function renderHeader(){var _this8=this;if(this.props.showHeader){var closeIcon=this.renderCloseIcon();var maximizeIcon=this.renderMaximizeIcon();var icons=ObjectUtils.getJSXElement(this.props.icons,this.props);var header=ObjectUtils.getJSXElement(this.props.header,this.props);return/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this8.headerEl=el;},className:\"p-dialog-header\",onMouseDown:this.onDragStart},/*#__PURE__*/React.createElement(\"span\",{id:this.id+'_header',className:\"p-dialog-title\"},header),/*#__PURE__*/React.createElement(\"div\",{className:\"p-dialog-header-icons\"},icons,maximizeIcon,closeIcon));}return null;}},{key:\"renderContent\",value:function renderContent(){var _this9=this;var contentClassName=classNames('p-dialog-content',this.props.contentClassName);return/*#__PURE__*/React.createElement(\"div\",{id:this.id+'_content',ref:function ref(el){return _this9.contentEl=el;},className:contentClassName,style:this.props.contentStyle},this.props.children);}},{key:\"renderFooter\",value:function renderFooter(){var _this10=this;var footer=ObjectUtils.getJSXElement(this.props.footer,this.props);return footer&&/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this10.footerElement=el;},className:\"p-dialog-footer\"},footer);}},{key:\"renderResizer\",value:function renderResizer(){if(this.props.resizable){return/*#__PURE__*/React.createElement(\"div\",{className:\"p-resizable-handle\",style:{zIndex:90},onMouseDown:this.onResizeStart});}return null;}},{key:\"renderElement\",value:function renderElement(){var _this11=this;var className=classNames('p-dialog p-component',this.props.className,{'p-dialog-rtl':this.props.rtl,'p-dialog-maximized':this.maximized});var maskClassName=classNames('p-dialog-mask',{'p-component-overlay':this.props.modal,'p-dialog-visible':this.state.maskVisible,'p-dialog-draggable':this.props.draggable,'p-dialog-resizable':this.props.resizable},this.props.maskClassName,this.getPositionClass());var header=this.renderHeader();var content=this.renderContent();var footer=this.renderFooter();var resizer=this.renderResizer();var transitionTimeout={enter:this.props.position==='center'?150:300,exit:this.props.position==='center'?150:300};return/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this11.mask=el;},className:maskClassName,onClick:this.onMaskClick},/*#__PURE__*/React.createElement(CSSTransition,{nodeRef:this.dialogRef,classNames:\"p-dialog\",timeout:transitionTimeout,in:this.state.visible,unmountOnExit:true,onEntered:this.onEntered,onExited:this.onExited},/*#__PURE__*/React.createElement(\"div\",{ref:this.dialogRef,id:this.id,className:className,style:this.props.style,role:\"dialog\",\"aria-labelledby\":this.id+'_header',\"aria-describedby\":this.id+'_content',\"aria-modal\":this.props.modal},header,content,footer,resizer)));}},{key:\"render\",value:function render(){if(this.state.maskVisible){var element=this.renderElement();if(this.props.appendTo)return ReactDOM.createPortal(element,this.props.appendTo);else return element;}return null;}}]);return Dialog;}(Component);Dialog.defaultProps={id:null,header:null,footer:null,visible:false,position:'center',draggable:true,resizable:true,modal:true,onHide:null,onShow:null,contentStyle:null,contentClassName:null,closeOnEscape:true,dismissableMask:false,rtl:false,closable:true,style:null,className:null,maskClassName:null,showHeader:true,appendTo:null,baseZIndex:0,maximizable:false,blockScroll:false,icons:null,ariaCloseIconLabel:'Close',focusOnShow:true,minX:0,minY:0,keepInViewport:true,maximized:false,onMaximize:null,onDragStart:null,onDrag:null,onDragEnd:null,onResizeStart:null,onResize:null,onResizeEnd:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/slotmaster-dashboard/src/components/dialog/Dialog.js"],"names":["React","Component","ReactDOM","DomHandler","classNames","UniqueComponentId","CSSTransition","ObjectUtils","Ripple","Dialog","props","state","maskVisible","visible","onMaximize","maximized","onClose","bind","toggleMaximize","onDragStart","onResizeStart","onMaskClick","onEntered","onExited","id","dialogRef","createRef","event","onHide","preventDefault","activeElement","document","isActiveElementInDialog","current","contains","closable","closeElement","focus","dismissableMask","modal","mask","target","originalEvent","setState","changeScrollOnMaximizable","hasClass","parentElement","draggable","dragging","lastPageX","pageX","lastPageY","pageY","dialogEl","style","margin","addClass","body","width","getOuterWidth","height","getOuterHeight","deltaX","deltaY","offset","getOffset","leftPos","left","topPos","top","viewport","getViewport","position","keepInViewport","minX","minY","onDrag","removeClass","onDragEnd","resizable","resizing","contentHeight","contentEl","newWidth","newHeight","minWidth","minHeight","hasBeenDragged","parseInt","onResize","onResizeEnd","positions","pos","find","item","replace","baseZIndex","generateZIndex","onShow","focusOnShow","enableDocumentSettings","disableDocumentSettings","bindGlobalListeners","blockScroll","maximizable","unbindGlobalListeners","hasBlockScroll","primeDialogParams","some","param","bindDocumentDragListener","bindDocumentResizeListeners","closeOnEscape","bindDocumentKeyDownListener","unbindDocumentDragListener","unbindDocumentResizeListeners","unbindDocumentKeyDownListener","documentDragListener","documentDragEndListener","window","addEventListener","removeEventListener","documentResizeListener","documentResizeEndListener","documentKeyDownListener","currentTarget","params","paramLength","length","dialogId","dialog","getElementById","which","stopImmediatePropagation","splice","focusableElements","getFocusableElements","focusedIndex","indexOf","shiftKey","newParam","filter","zIndex","String","prevProps","funcName","el","ariaCloseIconLabel","iconClassName","showHeader","closeIcon","renderCloseIcon","maximizeIcon","renderMaximizeIcon","icons","getJSXElement","header","headerEl","contentClassName","contentStyle","children","footer","footerElement","className","rtl","maskClassName","getPositionClass","renderHeader","content","renderContent","renderFooter","resizer","renderResizer","transitionTimeout","enter","exit","element","renderElement","appendTo","createPortal","defaultProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport UniqueComponentId from '../utils/UniqueComponentId';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\nimport { Ripple } from '../ripple/Ripple';\r\n\r\nexport class Dialog extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        header: null,\r\n        footer: null,\r\n        visible: false,\r\n        position: 'center',\r\n        draggable: true,\r\n        resizable: true,\r\n        modal: true,\r\n        onHide: null,\r\n        onShow: null,\r\n        contentStyle: null,\r\n        contentClassName: null,\r\n        closeOnEscape: true,\r\n        dismissableMask: false,\r\n        rtl: false,\r\n        closable: true,\r\n        style: null,\r\n        className: null,\r\n        maskClassName: null,\r\n        showHeader: true,\r\n        appendTo: null,\r\n        baseZIndex: 0,\r\n        maximizable: false,\r\n        blockScroll: false,\r\n        icons: null,\r\n        ariaCloseIconLabel: 'Close',\r\n        focusOnShow: true,\r\n        minX: 0,\r\n        minY: 0,\r\n        keepInViewport: true,\r\n        maximized: false,\r\n        onMaximize: null,\r\n        onDragStart: null,\r\n        onDrag: null,\r\n        onDragEnd: null,\r\n        onResizeStart: null,\r\n        onResize: null,\r\n        onResizeEnd: null\r\n    }\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        header: PropTypes.any,\r\n        footer: PropTypes.any,\r\n        visible: PropTypes.bool,\r\n        position: PropTypes.string,\r\n        draggable: PropTypes.bool,\r\n        resizable: PropTypes.bool,\r\n        modal: PropTypes.bool,\r\n        onHide: PropTypes.func.isRequired,\r\n        onShow: PropTypes.func,\r\n        contentStyle: PropTypes.object,\r\n        contentClassName: PropTypes.string,\r\n        closeOnEscape: PropTypes.bool,\r\n        dismissableMask: PropTypes.bool,\r\n        rtl: PropTypes.bool,\r\n        closable: PropTypes.bool,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        maskClassName: PropTypes.string,\r\n        showHeader: PropTypes.bool,\r\n        appendTo: PropTypes.object,\r\n        baseZIndex: PropTypes.number,\r\n        maximizable: PropTypes.bool,\r\n        blockScroll: PropTypes.bool,\r\n        icons: PropTypes.any,\r\n        ariaCloseIconLabel: PropTypes.string,\r\n        focusOnShow: PropTypes.bool,\r\n        minX: PropTypes.number,\r\n        minY: PropTypes.number,\r\n        keepInViewport: PropTypes.bool,\r\n        maximized: PropTypes.bool,\r\n        onMaximize: PropTypes.func,\r\n        onDragStart: PropTypes.func,\r\n        onDrag: PropTypes.func,\r\n        onDragEnd: PropTypes.func,\r\n        onResizeStart: PropTypes.func,\r\n        onResize: PropTypes.func,\r\n        onResizeEnd: PropTypes.func\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            maskVisible: props.visible,\r\n            visible: false\r\n        };\r\n\r\n        if (!this.props.onMaximize) {\r\n            this.state.maximized = props.maximized;\r\n        }\r\n\r\n        this.onClose = this.onClose.bind(this);\r\n        this.toggleMaximize = this.toggleMaximize.bind(this);\r\n        this.onDragStart = this.onDragStart.bind(this);\r\n        this.onResizeStart = this.onResizeStart.bind(this);\r\n        this.onMaskClick = this.onMaskClick.bind(this);\r\n        this.onEntered = this.onEntered.bind(this);\r\n        this.onExited = this.onExited.bind(this);\r\n\r\n        this.id = this.props.id || UniqueComponentId();\r\n        this.dialogRef = React.createRef();\r\n    }\r\n\r\n    onClose(event) {\r\n        this.props.onHide();\r\n        event.preventDefault();\r\n    }\r\n\r\n    focus() {\r\n        let activeElement = document.activeElement;\r\n        let isActiveElementInDialog = activeElement && this.dialogRef && this.dialogRef.current.contains(activeElement);\r\n        if (!isActiveElementInDialog && this.props.closable) {\r\n            this.closeElement.focus();\r\n        }\r\n    }\r\n\r\n    onMaskClick(event) {\r\n        if (this.props.dismissableMask && this.props.modal && this.mask === event.target) {\r\n            this.onClose(event);\r\n        }\r\n    }\r\n\r\n    toggleMaximize(event) {\r\n        let maximized = !this.maximized;\r\n\r\n        if (this.props.onMaximize) {\r\n            this.props.onMaximize({\r\n                originalEvent: event,\r\n                maximized\r\n            });\r\n        }\r\n        else {\r\n            this.setState({\r\n                maximized\r\n            }, this.changeScrollOnMaximizable);\r\n        }\r\n\r\n        event.preventDefault();\r\n    }\r\n\r\n    onDragStart(event) {\r\n        if (DomHandler.hasClass(event.target, 'p-dialog-header-icon') || DomHandler.hasClass(event.target.parentElement, 'p-dialog-header-icon')) {\r\n            return;\r\n        }\r\n\r\n        if (this.props.draggable) {\r\n            this.dragging = true;\r\n            this.lastPageX = event.pageX;\r\n            this.lastPageY = event.pageY;\r\n\r\n            this.dialogEl.style.margin = '0';\r\n            DomHandler.addClass(document.body, 'p-unselectable-text');\r\n\r\n            if (this.props.onDragStart) {\r\n                this.props.onDragStart(event);\r\n            }\r\n        }\r\n    }\r\n\r\n    onDrag(event) {\r\n        if (this.dragging) {\r\n            let width = DomHandler.getOuterWidth(this.dialogEl);\r\n            let height = DomHandler.getOuterHeight(this.dialogEl);\r\n            let deltaX = event.pageX - this.lastPageX;\r\n            let deltaY = event.pageY - this.lastPageY;\r\n            let offset = DomHandler.getOffset(this.dialogEl);\r\n            let leftPos = offset.left + deltaX;\r\n            let topPos = offset.top + deltaY;\r\n            let viewport = DomHandler.getViewport();\r\n\r\n            this.dialogEl.style.position = 'fixed';\r\n\r\n            if (this.props.keepInViewport) {\r\n                if (leftPos >= this.props.minX && (leftPos + width) < viewport.width) {\r\n                    this.lastPageX = event.pageX;\r\n                    this.dialogEl.style.left = leftPos + 'px';\r\n                }\r\n\r\n                if (topPos >= this.props.minY && (topPos + height) < viewport.height) {\r\n                    this.lastPageY = event.pageY;\r\n                    this.dialogEl.style.top = topPos + 'px';\r\n                }\r\n            }\r\n            else {\r\n                this.lastPageX = event.pageX;\r\n                this.dialogEl.style.left = leftPos + 'px';\r\n                this.lastPageY = event.pageY;\r\n                this.dialogEl.style.top = topPos + 'px';\r\n            }\r\n\r\n            if (this.props.onDrag) {\r\n                this.props.onDrag(event);\r\n            }\r\n        }\r\n    }\r\n\r\n    onDragEnd(event) {\r\n        if (this.dragging) {\r\n            this.dragging = false;\r\n            DomHandler.removeClass(document.body, 'p-unselectable-text');\r\n\r\n            if (this.props.onDragEnd) {\r\n                this.props.onDragEnd(event);\r\n            }\r\n        }\r\n    }\r\n\r\n    onResizeStart(event) {\r\n        if (this.props.resizable) {\r\n            this.resizing = true;\r\n            this.lastPageX = event.pageX;\r\n            this.lastPageY = event.pageY;\r\n            DomHandler.addClass(document.body, 'p-unselectable-text');\r\n\r\n            if (this.props.onResizeStart) {\r\n                this.props.onResizeStart(event);\r\n            }\r\n        }\r\n    }\r\n\r\n    onResize(event) {\r\n        if (this.resizing) {\r\n            let deltaX = event.pageX - this.lastPageX;\r\n            let deltaY = event.pageY - this.lastPageY;\r\n            let width = DomHandler.getOuterWidth(this.dialogEl);\r\n            let height = DomHandler.getOuterHeight(this.dialogEl);\r\n            let contentHeight = DomHandler.getOuterHeight(this.contentEl);\r\n            let newWidth = width + deltaX;\r\n            let newHeight = height + deltaY;\r\n            let minWidth = this.dialogEl.style.minWidth;\r\n            let minHeight = this.dialogEl.style.minHeight;\r\n            let offset = DomHandler.getOffset(this.dialogEl);\r\n            let viewport = DomHandler.getViewport();\r\n            let hasBeenDragged = !parseInt(this.dialogEl.style.top) || !parseInt(this.dialogEl.style.left);\r\n\r\n            if (hasBeenDragged) {\r\n                newWidth += deltaX;\r\n                newHeight += deltaY;\r\n            }\r\n\r\n            if ((!minWidth || newWidth > parseInt(minWidth)) && (offset.left + newWidth) < viewport.width) {\r\n                this.dialogEl.style.width = newWidth + 'px';\r\n            }\r\n\r\n            if ((!minHeight || newHeight > parseInt(minHeight)) && (offset.top + newHeight) < viewport.height) {\r\n                this.contentEl.style.height = contentHeight + newHeight - height + 'px';\r\n                this.dialogEl.style.height = newHeight + 'px';\r\n            }\r\n\r\n            this.lastPageX = event.pageX;\r\n            this.lastPageY = event.pageY;\r\n\r\n            if (this.props.onResize) {\r\n                this.props.onResize(event);\r\n            }\r\n        }\r\n    }\r\n\r\n    onResizeEnd(event) {\r\n        if (this.resizing) {\r\n            this.resizing = false;\r\n            DomHandler.removeClass(document.body, 'p-unselectable-text');\r\n\r\n            if (this.props.onResizeEnd) {\r\n                this.props.onResizeEnd(event);\r\n            }\r\n        }\r\n    }\r\n\r\n    resetPosition() {\r\n        this.dialogEl.style.position = '';\r\n        this.dialogEl.style.left = '';\r\n        this.dialogEl.style.top = '';\r\n        this.dialogEl.style.margin = '';\r\n    }\r\n\r\n    getPositionClass() {\r\n        const positions = ['center', 'left', 'right', 'top', 'top-left', 'top-right', 'bottom', 'bottom-left', 'bottom-right'];\r\n        const pos = positions.find(item => item === this.props.position || item.replace('-', '') === this.props.position);\r\n\r\n        return pos ? `p-dialog-${pos}` : '';\r\n    }\r\n\r\n    get zIndex() {\r\n        return this.props.baseZIndex + DomHandler.generateZIndex();\r\n    }\r\n\r\n    get maximized() {\r\n        return this.props.onMaximize ? this.props.maximized : this.state.maximized;\r\n    }\r\n\r\n    get dialogEl() {\r\n        return this.dialogRef.current;\r\n    }\r\n\r\n    onEntered() {\r\n        if (this.props.onShow) {\r\n            this.props.onShow();\r\n        }\r\n\r\n        if (this.props.focusOnShow) {\r\n            this.focus();\r\n        }\r\n\r\n        this.enableDocumentSettings();\r\n    }\r\n\r\n    onExited() {\r\n        this.dragging = false;\r\n        this.setState({ maskVisible: false });\r\n        this.disableDocumentSettings();\r\n    }\r\n\r\n    enableDocumentSettings() {\r\n        this.bindGlobalListeners();\r\n\r\n        if (this.props.blockScroll || (this.props.maximizable && this.maximized)) {\r\n            DomHandler.addClass(document.body, 'p-overflow-hidden');\r\n        }\r\n    }\r\n\r\n    disableDocumentSettings() {\r\n        this.unbindGlobalListeners();\r\n\r\n        if (this.props.modal) {\r\n            let hasBlockScroll = document.primeDialogParams && document.primeDialogParams.some(param => param.hasBlockScroll);\r\n            if (!hasBlockScroll) {\r\n                DomHandler.removeClass(document.body, 'p-overflow-hidden');\r\n            }\r\n        }\r\n        else if (this.props.blockScroll || (this.props.maximizable && this.maximized)) {\r\n            DomHandler.removeClass(document.body, 'p-overflow-hidden');\r\n        }\r\n    }\r\n\r\n    bindGlobalListeners() {\r\n        if (this.props.draggable) {\r\n            this.bindDocumentDragListener();\r\n        }\r\n\r\n        if (this.props.resizable) {\r\n            this.bindDocumentResizeListeners();\r\n        }\r\n\r\n        if (this.props.closeOnEscape && this.props.closable) {\r\n            this.bindDocumentKeyDownListener();\r\n        }\r\n    }\r\n\r\n    unbindGlobalListeners() {\r\n        this.unbindDocumentDragListener();\r\n        this.unbindDocumentResizeListeners();\r\n        this.unbindDocumentKeyDownListener();\r\n    }\r\n\r\n    bindDocumentDragListener() {\r\n        this.documentDragListener = this.onDrag.bind(this);\r\n        this.documentDragEndListener = this.onDragEnd.bind(this);\r\n        window.document.addEventListener('mousemove', this.documentDragListener);\r\n        window.document.addEventListener('mouseup', this.documentDragEndListener);\r\n    }\r\n\r\n    unbindDocumentDragListener() {\r\n        if (this.documentDragListener && this.documentDragEndListener) {\r\n            window.document.removeEventListener('mousemove', this.documentDragListener);\r\n            window.document.removeEventListener('mouseup', this.documentDragEndListener);\r\n            this.documentDragListener = null;\r\n            this.documentDragEndListener = null;\r\n        }\r\n    }\r\n\r\n    bindDocumentResizeListeners() {\r\n        this.documentResizeListener = this.onResize.bind(this);\r\n        this.documentResizeEndListener = this.onResizeEnd.bind(this);\r\n        window.document.addEventListener('mousemove', this.documentResizeListener);\r\n        window.document.addEventListener('mouseup', this.documentResizeEndListener);\r\n    }\r\n\r\n    unbindDocumentResizeListeners() {\r\n        if (this.documentResizeListener && this.documentResizeEndListener) {\r\n            window.document.removeEventListener('mousemove', this.documentResizeListener);\r\n            window.document.removeEventListener('mouseup', this.documentResizeEndListener);\r\n            this.documentResizeListener = null;\r\n            this.documentResizeEndListener = null;\r\n        }\r\n    }\r\n\r\n    bindDocumentKeyDownListener() {\r\n        this.documentKeyDownListener = (event) => {\r\n            let currentTarget = event.currentTarget;\r\n\r\n            if (currentTarget && currentTarget.primeDialogParams) {\r\n                let params = currentTarget.primeDialogParams;\r\n                let paramLength = params.length;\r\n                let dialogId = params[paramLength - 1].id;\r\n\r\n                if (dialogId === this.id) {\r\n                    let dialog = document.getElementById(dialogId);\r\n\r\n                    if (event.which === 27) {\r\n                        this.onClose(event);\r\n                        event.stopImmediatePropagation();\r\n\r\n                        params.splice(paramLength - 1, 1);\r\n                    }\r\n                    else if (event.which === 9) {\r\n                        event.preventDefault();\r\n                        let focusableElements = DomHandler.getFocusableElements(dialog);\r\n                        if (focusableElements && focusableElements.length > 0) {\r\n                            if (!document.activeElement) {\r\n                                focusableElements[0].focus();\r\n                            }\r\n                            else {\r\n                                let focusedIndex = focusableElements.indexOf(document.activeElement);\r\n                                if (event.shiftKey) {\r\n                                    if (focusedIndex === -1 || focusedIndex === 0)\r\n                                        focusableElements[focusableElements.length - 1].focus();\r\n                                    else\r\n                                        focusableElements[focusedIndex - 1].focus();\r\n                                }\r\n                                else {\r\n                                    if (focusedIndex === -1 || focusedIndex === (focusableElements.length - 1))\r\n                                        focusableElements[0].focus();\r\n                                    else\r\n                                        focusableElements[focusedIndex + 1].focus();\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n\r\n        let newParam = { id: this.id, hasBlockScroll: this.props.blockScroll };\r\n        document.primeDialogParams = document.primeDialogParams ? [ ...document.primeDialogParams, newParam ] : [ newParam ];\r\n\r\n        document.addEventListener('keydown', this.documentKeyDownListener);\r\n    }\r\n\r\n    unbindDocumentKeyDownListener() {\r\n        if (this.documentKeyDownListener) {\r\n            document.removeEventListener('keydown', this.documentKeyDownListener);\r\n            document.primeDialogParams = document.primeDialogParams && document.primeDialogParams.filter(param => param.id !== this.id);\r\n            this.documentKeyDownListener = null;\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.visible) {\r\n            this.setState({ visible: true }, () => {\r\n                this.mask.style.zIndex = String(this.zIndex);\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (this.props.visible && !this.state.maskVisible) {\r\n            this.setState({ maskVisible: true }, () => {\r\n                this.mask.style.zIndex = String(this.zIndex);\r\n            });\r\n        }\r\n\r\n        if (this.props.visible !== this.state.visible && this.state.maskVisible) {\r\n            this.setState({\r\n                visible: this.props.visible\r\n            });\r\n        }\r\n\r\n        if (prevProps.maximized !== this.props.maximized && this.props.onMaximize) {\r\n            this.changeScrollOnMaximizable();\r\n        }\r\n    }\r\n\r\n    changeScrollOnMaximizable() {\r\n        if (!this.props.blockScroll) {\r\n            let funcName = this.maximized ? 'addClass' : 'removeClass';\r\n            DomHandler[funcName](document.body, 'p-overflow-hidden');\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.disableDocumentSettings();\r\n    }\r\n\r\n    renderCloseIcon() {\r\n        if (this.props.closable) {\r\n            return (\r\n                <button ref={(el) => this.closeElement = el} type=\"button\" className=\"p-dialog-header-icon p-dialog-header-close p-link\" aria-label={this.props.ariaCloseIconLabel} onClick={this.onClose}>\r\n                    <span className=\"p-dialog-header-close-icon pi pi-times\"></span>\r\n                    <Ripple />\r\n                </button>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    renderMaximizeIcon() {\r\n        const iconClassName = classNames('p-dialog-header-maximize-icon pi', {'pi-window-maximize': !this.maximized, 'pi-window-minimize': this.maximized});\r\n\r\n        if (this.props.maximizable) {\r\n            return (\r\n                <button type=\"button\" className=\"p-dialog-header-icon p-dialog-header-maximize p-link\" onClick={this.toggleMaximize}>\r\n                    <span className={iconClassName}></span>\r\n                    <Ripple />\r\n                </button>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    renderHeader() {\r\n        if (this.props.showHeader) {\r\n            const closeIcon = this.renderCloseIcon();\r\n            const maximizeIcon = this.renderMaximizeIcon();\r\n            const icons = ObjectUtils.getJSXElement(this.props.icons, this.props);\r\n            const header = ObjectUtils.getJSXElement(this.props.header, this.props);\r\n\r\n            return (\r\n                <div ref={el => this.headerEl = el} className=\"p-dialog-header\" onMouseDown={this.onDragStart}>\r\n                    <span id={this.id + '_header'} className=\"p-dialog-title\">{header}</span>\r\n                    <div className=\"p-dialog-header-icons\">\r\n                        {icons}\r\n                        {maximizeIcon}\r\n                        {closeIcon}\r\n                    </div>\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    renderContent() {\r\n        let contentClassName = classNames('p-dialog-content', this.props.contentClassName)\r\n\r\n        return (\r\n            <div id={this.id + '_content'} ref={el => this.contentEl = el} className={contentClassName} style={this.props.contentStyle}>\r\n                {this.props.children}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderFooter() {\r\n        const footer = ObjectUtils.getJSXElement(this.props.footer, this.props);\r\n\r\n        return footer && <div ref={el => this.footerElement = el} className=\"p-dialog-footer\">{footer}</div>\r\n    }\r\n\r\n    renderResizer() {\r\n        if (this.props.resizable) {\r\n            return <div className=\"p-resizable-handle\" style={{zIndex: 90}} onMouseDown={this.onResizeStart}></div>\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    renderElement() {\r\n        const className = classNames('p-dialog p-component', this.props.className, {\r\n            'p-dialog-rtl': this.props.rtl,\r\n            'p-dialog-maximized': this.maximized\r\n        });\r\n\r\n        const maskClassName = classNames('p-dialog-mask', {\r\n            'p-component-overlay': this.props.modal,\r\n            'p-dialog-visible': this.state.maskVisible,\r\n            'p-dialog-draggable': this.props.draggable,\r\n            'p-dialog-resizable': this.props.resizable,\r\n        }, this.props.maskClassName, this.getPositionClass());\r\n\r\n        const header = this.renderHeader();\r\n        const content = this.renderContent();\r\n        const footer = this.renderFooter();\r\n        const resizer = this.renderResizer();\r\n\r\n        let transitionTimeout = {\r\n            enter: this.props.position === 'center' ? 150 : 300,\r\n            exit: this.props.position === 'center' ? 150 : 300\r\n        };\r\n\r\n        return (\r\n            <div ref={(el) => this.mask = el} className={maskClassName} onClick={this.onMaskClick}>\r\n                <CSSTransition nodeRef={this.dialogRef} classNames=\"p-dialog\" timeout={transitionTimeout} in={this.state.visible} unmountOnExit\r\n                    onEntered={this.onEntered} onExited={this.onExited}>\r\n                    <div ref={this.dialogRef} id={this.id} className={className} style={this.props.style}\r\n                        role=\"dialog\" aria-labelledby={this.id + '_header'} aria-describedby={this.id + '_content'} aria-modal={this.props.modal}>\r\n                        {header}\r\n                        {content}\r\n                        {footer}\r\n                        {resizer}\r\n                    </div>\r\n                </CSSTransition>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        if (this.state.maskVisible) {\r\n            const element = this.renderElement();\r\n\r\n            if (this.props.appendTo)\r\n                return ReactDOM.createPortal(element, this.props.appendTo);\r\n            else\r\n                return element;\r\n        }\r\n\r\n        return null;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}