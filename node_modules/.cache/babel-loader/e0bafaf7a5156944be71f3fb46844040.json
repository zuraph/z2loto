{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import axios from'axios';import{v4 as uuidv4}from'uuid';import EventEmitter from\"../utils/eventEmitter\";var http=axios.create({baseURL:'/',headers:{'content-type':'application/x-www-form-urlencoded'}});var eventEmitter=new EventEmitter();var Request={enableEvents:true,data:{event:false,loader:false,requestEventData:null,loaderData:null},events:{global:{},local:{},loader:{}},setEvents:function setEvents(){var status=arguments.length>0&&arguments[0]!==undefined?arguments[0]:true;this.enableEvents=status;return this;},event:function event(_ref){var name=_ref.name,_ref$type=_ref.type,type=_ref$type===void 0?\"error\":_ref$type,_ref$summary=_ref.summary,summary=_ref$summary===void 0?\"Http Error\":_ref$summary,_ref$details=_ref.details,details=_ref$details===void 0?\"error\":_ref$details,_ref$sticky=_ref.sticky,sticky=_ref$sticky===void 0?false:_ref$sticky,_ref$life=_ref.life,life=_ref$life===void 0?2000:_ref$life;eventEmitter.emit(name,{severity:type,summary:summary,detail:details,sticky:sticky,life:life});return this;},loader:function loader(){var event=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'app';var uuid=uuidv4();this.data.loader=true;this.data.loaderData={event:event,uuid:uuid};return this;},dispatchLoader:function dispatchLoader(){var event=arguments.length>0&&arguments[0]!==undefined?arguments[0]:'app';var status=arguments.length>1&&arguments[1]!==undefined?arguments[1]:false;if(!this.events['loader'][event])return;this.events[\"loader\"][event].forEach(function(callback){return callback(status);});return this;},subscribeLoader:function subscribeLoader(event,callback){if(!this.events[\"loader\"][event])this.events[\"loader\"][event]=[];this.events[\"loader\"][event].push(callback);return this;},unsubscribeLoader:function unsubscribeLoader(event){if(this.events[\"loader\"][event])delete this.events[\"loader\"][event];return this;},post:function post(url,data){var _this=this;var header=arguments.length>2&&arguments[2]!==undefined?arguments[2]:null;if(this.data.loader){this.dispatchLoader(this.data.loaderData.event,true);}return new Promise(function(resolve){try{http.post(url,data,header?{headers:_objectSpread(_objectSpread({},header),{},{Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")})}:{headers:{'Content-Type':'application/x-www-form-urlencoded',Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")}}).then(function(response){if(response.status===200){resolve({status:true,data:response.data});}else{if(_this.enableEvents){eventEmitter.emit(\"httpError\",{severity:'error',summary:'Http Error',detail:\"error  \".concat(response.status),sticky:false,life:2000});}resolve({status:false,data:response.data});}}).catch(function(reason){if(_this.enableEvents){eventEmitter.emit(\"httpError\",{severity:'error',summary:'Http Error',detail:\"error  \".concat(reason.response.status),sticky:false,life:2000});}resolve({status:false});});}catch(e){console.log(e.message);}}).finally(function(){if(_this.data.loader){_this.dispatchLoader(_this.data.loaderData.event,false);}});},get:function get(url){var _this2=this;if(this.data.loader){this.dispatchLoader(this.data.loaderData.event,true);}return new Promise(function(resolve){http.get(url,{headers:{Authorization:\"Bearer \"+localStorage.getItem(\"access_token\")}}).then(function(response){if(response.status===200){resolve({status:true,data:response.data});}else{if(_this2.enableEvents){eventEmitter.emit(\"httpError\",{severity:'error',summary:'Http Error',detail:\"error  \".concat(response.status),sticky:false,life:2000});}resolve({status:false,data:response.data});}}).catch(function(reason){if(_this2.enableEvents){eventEmitter.emit(\"httpError\",{severity:'error',summary:'Http Error',detail:\"error  \".concat(reason.response.status),sticky:false,life:2000});}resolve({status:false});});}).finally(function(){if(_this2.data.loader){_this2.dispatchLoader(_this2.data.loaderData.event,false);}});}};export default Request;","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/slotmaster-dashboard/src/core/http/http.js"],"names":["axios","v4","uuidv4","EventEmitter","http","create","baseURL","headers","eventEmitter","Request","enableEvents","data","event","loader","requestEventData","loaderData","events","global","local","setEvents","status","name","type","summary","details","sticky","life","emit","severity","detail","uuid","dispatchLoader","forEach","callback","subscribeLoader","push","unsubscribeLoader","post","url","header","Promise","resolve","Authorization","localStorage","getItem","then","response","catch","reason","e","console","log","message","finally","get"],"mappings":"qLAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,EAAE,GAAIC,CAAAA,MAAf,KAA6B,MAA7B,CACA,MAAOC,CAAAA,YAAP,KAAyB,uBAAzB,CACA,GAAMC,CAAAA,IAAI,CAAIJ,KAAK,CAACK,MAAN,CAAa,CACvBC,OAAO,CAAE,GADc,CAEvBC,OAAO,CAAE,CACL,eAAgB,mCADX,CAFc,CAAb,CAAd,CAMA,GAAMC,CAAAA,YAAY,CAAC,GAAIL,CAAAA,YAAJ,EAAnB,CACA,GAAMM,CAAAA,OAAO,CAAG,CACdC,YAAY,CAAC,IADC,CAEdC,IAAI,CAAC,CACCC,KAAK,CAAC,KADP,CAECC,MAAM,CAAC,KAFR,CAGCC,gBAAgB,CAAC,IAHlB,CAICC,UAAU,CAAC,IAJZ,CAFS,CAQZC,MAAM,CAAC,CACHC,MAAM,CAAC,EADJ,CAEHC,KAAK,CAAC,EAFH,CAGHL,MAAM,CAAC,EAHJ,CARK,CAaZM,SAAS,CAAC,oBAAsB,IAAZC,CAAAA,MAAY,2DAAL,IAAK,CAC9B,KAAKV,YAAL,CAAkBU,MAAlB,CACA,MAAO,KAAP,CACD,CAhBW,CAiBZR,KAAK,CAAC,oBAA2F,IAAjFS,CAAAA,IAAiF,MAAjFA,IAAiF,gBAA5EC,IAA4E,CAA5EA,IAA4E,oBAAvE,OAAuE,6BAA/DC,OAA+D,CAA/DA,OAA+D,uBAAvD,YAAuD,gCAAzCC,OAAyC,CAAzCA,OAAyC,uBAAjC,OAAiC,+BAAxBC,MAAwB,CAAxBA,MAAwB,sBAAjB,KAAiB,4BAAXC,IAAW,CAAXA,IAAW,oBAAN,IAAM,WAC7FlB,YAAY,CAACmB,IAAb,CAAkBN,IAAlB,CAAuB,CAACO,QAAQ,CAAEN,IAAX,CAAiBC,OAAO,CAAEA,OAA1B,CAAmCM,MAAM,CAAEL,OAA3C,CAAoDC,MAAM,CAAEA,MAA5D,CAAmEC,IAAI,CAACA,IAAxE,CAAvB,EACA,MAAO,KAAP,CACH,CApBW,CAqBZb,MAAM,CAAC,iBAAqB,IAAZD,CAAAA,KAAY,2DAAN,KAAM,CACxB,GAAMkB,CAAAA,IAAI,CAAG5B,MAAM,EAAnB,CACA,KAAKS,IAAL,CAAUE,MAAV,CAAiB,IAAjB,CACA,KAAKF,IAAL,CAAUI,UAAV,CAAuB,CAACH,KAAK,CAAEA,KAAR,CAAekB,IAAI,CAAEA,IAArB,CAAvB,CACA,MAAO,KAAP,CACH,CA1BW,CA4BZC,cAAc,CAAE,yBAAkC,IAAzBnB,CAAAA,KAAyB,2DAAnB,KAAmB,IAAbQ,CAAAA,MAAa,2DAAN,KAAM,CAC9C,GAAG,CAAC,KAAKJ,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,CAAJ,CAAkC,OAClC,KAAKI,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,EAA6BoB,OAA7B,CAAqC,SAAAC,QAAQ,QAAEA,CAAAA,QAAQ,CAACb,MAAD,CAAV,EAA7C,EACA,MAAO,KAAP,CACH,CAhCW,CAkCZc,eAAe,CAAE,yBAAUtB,KAAV,CAAgBqB,QAAhB,CAA0B,CACvC,GAAG,CAAC,KAAKjB,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,CAAJ,CAAkC,KAAKI,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,EAA+B,EAA/B,CAClC,KAAKI,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,EAA6BuB,IAA7B,CAAkCF,QAAlC,EACA,MAAO,KAAP,CACH,CAtCW,CAwCZG,iBAAiB,CAAE,2BAASxB,KAAT,CAAe,CAC9B,GAAG,KAAKI,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,CAAH,CAAiC,MAAO,MAAKI,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,CAAP,CACjC,MAAO,KAAP,CACH,CA3CW,CA4CZyB,IAAI,CAAC,cAASC,GAAT,CAAa3B,IAAb,CAA+B,mBAAZ4B,CAAAA,MAAY,2DAAL,IAAK,CAChC,GAAG,KAAK5B,IAAL,CAAUE,MAAb,CAAoB,CAChB,KAAKkB,cAAL,CAAoB,KAAKpB,IAAL,CAAUI,UAAV,CAAqBH,KAAzC,CAA+C,IAA/C,EACH,CACD,MAAO,IAAI4B,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAe,CAChC,GAAI,CACFrC,IAAI,CAACiC,IAAL,CAAUC,GAAV,CAAc3B,IAAd,CAAqB4B,MAAD,CAAW,CAC3BhC,OAAO,gCAAKgC,MAAL,MAAaG,aAAa,CAAE,UAAUC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAAtC,EADoB,CAAX,CAElB,CACErC,OAAO,CAAC,CACJ,eAAgB,mCADZ,CAEJmC,aAAa,CAAE,UAAUC,YAAY,CAACC,OAAb,CAAqB,cAArB,CAFrB,CADV,CAFF,EAOIC,IAPJ,CAOU,SAAAC,QAAQ,CAAI,CACpB,GAAGA,QAAQ,CAAC1B,MAAT,GAAkB,GAArB,CAAyB,CACrBqB,OAAO,CAAC,CAACrB,MAAM,CAAC,IAAR,CAAaT,IAAI,CAACmC,QAAQ,CAACnC,IAA3B,CAAD,CAAP,CACH,CAFD,IAEK,CACD,GAAG,KAAI,CAACD,YAAR,CAAqB,CACjBF,YAAY,CAACmB,IAAb,CAAkB,WAAlB,CAA8B,CAACC,QAAQ,CAAE,OAAX,CAAoBL,OAAO,CAAE,YAA7B,CAA2CM,MAAM,kBAAYiB,QAAQ,CAAC1B,MAArB,CAAjD,CAAgFK,MAAM,CAAE,KAAxF,CAA8FC,IAAI,CAAC,IAAnG,CAA9B,EACH,CACDe,OAAO,CAAC,CAACrB,MAAM,CAAC,KAAR,CAAcT,IAAI,CAACmC,QAAQ,CAACnC,IAA5B,CAAD,CAAP,CACH,CACF,CAhBD,EAgBGoC,KAhBH,CAgBS,SAAAC,MAAM,CAAI,CACf,GAAG,KAAI,CAACtC,YAAR,CAAsB,CAClBF,YAAY,CAACmB,IAAb,CAAkB,WAAlB,CAA8B,CAACC,QAAQ,CAAE,OAAX,CAAoBL,OAAO,CAAE,YAA7B,CAA2CM,MAAM,kBAAYmB,MAAM,CAACF,QAAP,CAAgB1B,MAA5B,CAAjD,CAAuFK,MAAM,CAAE,KAA/F,CAAqGC,IAAI,CAAC,IAA1G,CAA9B,EACH,CACDe,OAAO,CAAC,CAAErB,MAAM,CAAC,KAAT,CAAD,CAAP,CACH,CArBD,EAsBD,OAAO6B,CAAP,CAAU,CACPC,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,OAAd,EACH,CAEF,CA5BM,EA4BJC,OA5BI,CA4BI,UAAI,CACX,GAAG,KAAI,CAAC1C,IAAL,CAAUE,MAAb,CAAoB,CAChB,KAAI,CAACkB,cAAL,CAAoB,KAAI,CAACpB,IAAL,CAAUI,UAAV,CAAqBH,KAAzC,CAA+C,KAA/C,EACH,CACJ,CAhCM,CAAP,CAiCH,CAjFW,CAkFZ0C,GAAG,CAAC,aAAShB,GAAT,CAAa,iBACb,GAAG,KAAK3B,IAAL,CAAUE,MAAb,CAAoB,CAChB,KAAKkB,cAAL,CAAoB,KAAKpB,IAAL,CAAUI,UAAV,CAAqBH,KAAzC,CAA+C,IAA/C,EACH,CAED,MAAO,IAAI4B,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAa,CAC5BrC,IAAI,CAACkD,GAAL,CAAShB,GAAT,CAAa,CACL/B,OAAO,CAAC,CACJmC,aAAa,CAAE,UAAUC,YAAY,CAACC,OAAb,CAAqB,cAArB,CADrB,CADH,CAAb,EAIGC,IAJH,CAKI,SAAAC,QAAQ,CAAE,CACN,GAAGA,QAAQ,CAAC1B,MAAT,GAAkB,GAArB,CAAyB,CACrBqB,OAAO,CAAC,CAACrB,MAAM,CAAC,IAAR,CAAaT,IAAI,CAACmC,QAAQ,CAACnC,IAA3B,CAAD,CAAP,CACH,CAFD,IAEK,CACD,GAAG,MAAI,CAACD,YAAR,CAAsB,CAClBF,YAAY,CAACmB,IAAb,CAAkB,WAAlB,CAA8B,CAACC,QAAQ,CAAE,OAAX,CAAoBL,OAAO,CAAE,YAA7B,CAA2CM,MAAM,kBAAYiB,QAAQ,CAAC1B,MAArB,CAAjD,CAAgFK,MAAM,CAAE,KAAxF,CAA8FC,IAAI,CAAC,IAAnG,CAA9B,EACH,CACDe,OAAO,CAAC,CAACrB,MAAM,CAAC,KAAR,CAAcT,IAAI,CAACmC,QAAQ,CAACnC,IAA5B,CAAD,CAAP,CACH,CACJ,CAdL,EAcOoC,KAdP,CAca,SAAAC,MAAM,CAAI,CACnB,GAAG,MAAI,CAACtC,YAAR,CAAsB,CAClBF,YAAY,CAACmB,IAAb,CAAkB,WAAlB,CAA8B,CAACC,QAAQ,CAAE,OAAX,CAAoBL,OAAO,CAAE,YAA7B,CAA2CM,MAAM,kBAAYmB,MAAM,CAACF,QAAP,CAAgB1B,MAA5B,CAAjD,CAAuFK,MAAM,CAAE,KAA/F,CAAqGC,IAAI,CAAC,IAA1G,CAA9B,EAEH,CAEDe,OAAO,CAAC,CAAErB,MAAM,CAAC,KAAT,CAAD,CAAP,CACH,CArBD,EAsBH,CAvBM,EAuBJiC,OAvBI,CAuBI,UAAI,CACX,GAAG,MAAI,CAAC1C,IAAL,CAAUE,MAAb,CAAoB,CAChB,MAAI,CAACkB,cAAL,CAAoB,MAAI,CAACpB,IAAL,CAAUI,UAAV,CAAqBH,KAAzC,CAA+C,KAA/C,EACH,CACJ,CA3BM,CAAP,CA4BH,CAnHW,CAAhB,CAuHA,cAAeH,CAAAA,OAAf","sourcesContent":["import axios from 'axios';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport EventEmitter from \"../utils/eventEmitter\"\r\nconst http =  axios.create({\r\n    baseURL: '/',\r\n    headers: {\r\n        'content-type': 'application/x-www-form-urlencoded'\r\n    }\r\n})\r\nconst eventEmitter=new EventEmitter();\r\nconst Request = {\r\n  enableEvents:true,\r\n  data:{\r\n        event:false,\r\n        loader:false,\r\n        requestEventData:null,\r\n        loaderData:null\r\n    },\r\n    events:{\r\n        global:{},\r\n        local:{},\r\n        loader:{}\r\n    },\r\n    setEvents:function (status=true){\r\n      this.enableEvents=status;\r\n      return this;\r\n    },\r\n    event:function({name,type=\"error\",summary=\"Http Error\", details=\"error\", sticky=false,life=2000}){\r\n        eventEmitter.emit(name,{severity: type, summary: summary, detail: details, sticky: sticky,life:life})\r\n        return this;\r\n    },\r\n    loader:function(event='app'){\r\n        const uuid = uuidv4();\r\n        this.data.loader=true;\r\n        this.data.loaderData = {event: event, uuid: uuid};\r\n        return this;\r\n    },\r\n\r\n    dispatchLoader: function(event='app',status=false){\r\n        if(!this.events['loader'][event]) return;\r\n        this.events[\"loader\"][event].forEach(callback=>callback(status))\r\n        return this;\r\n    },\r\n\r\n    subscribeLoader: function (event,callback) {\r\n        if(!this.events[\"loader\"][event]) this.events[\"loader\"][event] = [];\r\n        this.events[\"loader\"][event].push(callback)\r\n        return this;\r\n    },\r\n\r\n    unsubscribeLoader: function(event){\r\n        if(this.events[\"loader\"][event]) delete this.events[\"loader\"][event];\r\n        return this;\r\n    },\r\n    post:function(url,data, header=null){\r\n        if(this.data.loader){\r\n            this.dispatchLoader(this.data.loaderData.event,true);\r\n        }\r\n        return new Promise((resolve, ) => {\r\n          try {\r\n            http.post(url,data,((header) ? {\r\n                headers:{...header, Authorization: `Bearer `+localStorage.getItem(\"access_token\")},\r\n            }:{\r\n                headers:{\r\n                    'Content-Type': 'application/x-www-form-urlencoded',\r\n                    Authorization: `Bearer `+localStorage.getItem(\"access_token\")\r\n                }\r\n            })).then( response => {\r\n              if(response.status===200){\r\n                  resolve({status:true,data:response.data})\r\n              }else{\r\n                  if(this.enableEvents){\r\n                      eventEmitter.emit(\"httpError\",{severity: 'error', summary: 'Http Error', detail: `error  ${response.status}`, sticky: false,life:2000})\r\n                  }\r\n                  resolve({status:false,data:response.data})\r\n              }\r\n            }).catch(reason => {\r\n                if(this.enableEvents) {\r\n                    eventEmitter.emit(\"httpError\",{severity: 'error', summary: 'Http Error', detail: `error  ${reason.response.status}`, sticky: false,life:2000})\r\n                }\r\n                resolve({ status:false })\r\n            })\r\n          }catch (e) {\r\n              console.log(e.message)\r\n          }\r\n\r\n        }).finally(()=>{\r\n            if(this.data.loader){\r\n                this.dispatchLoader(this.data.loaderData.event,false);\r\n            }\r\n        })\r\n    },\r\n    get:function(url){\r\n        if(this.data.loader){\r\n            this.dispatchLoader(this.data.loaderData.event,true);\r\n        }\r\n\r\n        return new Promise((resolve) => {\r\n            http.get(url,{\r\n                    headers:{\r\n                        Authorization: `Bearer `+localStorage.getItem(\"access_token\")\r\n                    }\r\n            }).then(\r\n                response=>{\r\n                    if(response.status===200){\r\n                        resolve({status:true,data:response.data})\r\n                    }else{\r\n                        if(this.enableEvents) {\r\n                            eventEmitter.emit(\"httpError\",{severity: 'error', summary: 'Http Error', detail: `error  ${response.status}`, sticky: false,life:2000})\r\n                        }\r\n                        resolve({status:false,data:response.data})\r\n                    }\r\n                }).catch(reason => {\r\n                if(this.enableEvents) {\r\n                    eventEmitter.emit(\"httpError\",{severity: 'error', summary: 'Http Error', detail: `error  ${reason.response.status}`, sticky: false,life:2000})\r\n\r\n                }\r\n\r\n                resolve({ status:false })\r\n            })\r\n        }).finally(()=>{\r\n            if(this.data.loader){\r\n                this.dispatchLoader(this.data.loaderData.event,false);\r\n            }\r\n        })\r\n    }\r\n\r\n};\r\n\r\nexport default Request;\r\n"]},"metadata":{},"sourceType":"module"}