{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import React,{Component}from'react';import ReactDOM from'react-dom';import{classNames}from'../utils/ClassNames';import{Button}from'../button/Button';import{CSSTransition}from'react-transition-group';import UniqueComponentId from'../utils/UniqueComponentId';import ConnectedOverlayScrollHandler from'../utils/ConnectedOverlayScrollHandler';import DomHandler from'../utils/DomHandler';import ObjectUtils from'../utils/ObjectUtils';import{localeOption}from'../api/Locale';import OverlayEventBus from'../overlayeventbus/OverlayEventBus';export function confirmPopup(props){var appendTo=props.appendTo||document.body;var confirmPopupWrapper=document.createDocumentFragment();DomHandler.appendChild(confirmPopupWrapper,appendTo);props=_objectSpread(_objectSpread({},props),{visible:props.visible===undefined?true:props.visible});var confirmPopupEl=React.createElement(ConfirmPopup,props);ReactDOM.render(confirmPopupEl,confirmPopupWrapper);var updateConfirmPopup=function updateConfirmPopup(newProps){props=_objectSpread(_objectSpread({},props),newProps);ReactDOM.render(React.cloneElement(confirmPopupEl,props),confirmPopupWrapper);};return{_destroy:function _destroy(){ReactDOM.unmountComponentAtNode(confirmPopupWrapper);},show:function show(){updateConfirmPopup({visible:true,onHide:function onHide(){updateConfirmPopup({visible:false});// reset\n}});},hide:function hide(){updateConfirmPopup({visible:false});},update:function update(newProps){updateConfirmPopup(newProps);}};}export var ConfirmPopup=/*#__PURE__*/function(_Component){_inherits(ConfirmPopup,_Component);var _super=_createSuper(ConfirmPopup);function ConfirmPopup(props){var _this;_classCallCheck(this,ConfirmPopup);_this=_super.call(this,props);_this.state={visible:false};_this.appendTo=props.appendTo||document.body;_this.reject=_this.reject.bind(_assertThisInitialized(_this));_this.accept=_this.accept.bind(_assertThisInitialized(_this));_this.hide=_this.hide.bind(_assertThisInitialized(_this));_this.onCloseClick=_this.onCloseClick.bind(_assertThisInitialized(_this));_this.onPanelClick=_this.onPanelClick.bind(_assertThisInitialized(_this));_this.onEnter=_this.onEnter.bind(_assertThisInitialized(_this));_this.onEntered=_this.onEntered.bind(_assertThisInitialized(_this));_this.onExit=_this.onExit.bind(_assertThisInitialized(_this));_this.id=_this.props.id||UniqueComponentId();_this.overlayRef=React.createRef();return _this;}_createClass(ConfirmPopup,[{key:\"acceptLabel\",value:function acceptLabel(){return this.props.acceptLabel||localeOption('accept');}},{key:\"rejectLabel\",value:function rejectLabel(){return this.props.rejectLabel||localeOption('reject');}},{key:\"bindDocumentClickListener\",value:function bindDocumentClickListener(){var _this2=this;if(!this.documentClickListener&&this.props.dismissable){this.documentClickListener=function(event){if(!_this2.isPanelClicked&&_this2.isOutsideClicked(event.target)){_this2.hide();}_this2.isPanelClicked=false;};document.addEventListener('click',this.documentClickListener);}}},{key:\"unbindDocumentClickListener\",value:function unbindDocumentClickListener(){if(this.documentClickListener){document.removeEventListener('click',this.documentClickListener);this.documentClickListener=null;}}},{key:\"bindScrollListener\",value:function bindScrollListener(){var _this3=this;if(!this.scrollHandler){this.scrollHandler=new ConnectedOverlayScrollHandler(this.props.target,function(){if(_this3.state.visible){_this3.hide();}});}this.scrollHandler.bindScrollListener();}},{key:\"unbindScrollListener\",value:function unbindScrollListener(){if(this.scrollHandler){this.scrollHandler.unbindScrollListener();}}},{key:\"bindResizeListener\",value:function bindResizeListener(){var _this4=this;if(!this.resizeListener){this.resizeListener=function(){if(_this4.state.visible){_this4.hide();}};window.addEventListener('resize',this.resizeListener);}}},{key:\"unbindResizeListener\",value:function unbindResizeListener(){if(this.resizeListener){window.removeEventListener('resize',this.resizeListener);this.resizeListener=null;}}},{key:\"isOutsideClicked\",value:function isOutsideClicked(target){return this.overlayRef&&this.overlayRef.current&&!(this.overlayRef.current.isSameNode(target)||this.overlayRef.current.contains(target));}},{key:\"onCloseClick\",value:function onCloseClick(event){this.hide();event.preventDefault();}},{key:\"onPanelClick\",value:function onPanelClick(event){this.isPanelClicked=true;OverlayEventBus.emit('overlay-click',{originalEvent:event,target:this.props.target});}},{key:\"accept\",value:function accept(){if(this.props.accept){this.props.accept();}this.hide('accept');}},{key:\"reject\",value:function reject(){if(this.props.reject){this.props.reject();}this.hide('reject');}},{key:\"show\",value:function show(){var _this5=this;this.setState({visible:true},function(){OverlayEventBus.on('overlay-click',function(e){if(!_this5.isOutsideClicked(e.target)){_this5.isPanelClicked=true;}});});}},{key:\"hide\",value:function hide(result){var _this6=this;this.setState({visible:false},function(){OverlayEventBus.off('overlay-click');if(_this6.props.onHide){_this6.props.onHide(result);}});}},{key:\"onEnter\",value:function onEnter(){this.overlayRef.current.style.zIndex=String(DomHandler.generateZIndex());this.align();}},{key:\"onEntered\",value:function onEntered(){this.bindDocumentClickListener();this.bindScrollListener();this.bindResizeListener();}},{key:\"onExit\",value:function onExit(){this.unbindDocumentClickListener();this.unbindScrollListener();this.unbindResizeListener();}},{key:\"align\",value:function align(){if(this.props.target){DomHandler.absolutePosition(this.overlayRef.current,this.props.target);var containerOffset=DomHandler.getOffset(this.overlayRef.current);var targetOffset=DomHandler.getOffset(this.props.target);var arrowLeft=0;if(containerOffset.left<targetOffset.left){arrowLeft=targetOffset.left-containerOffset.left;}this.overlayRef.current.style.setProperty('--overlayArrowLeft',\"\".concat(arrowLeft,\"px\"));if(containerOffset.top<targetOffset.top){DomHandler.addClass(this.overlayRef.current,'p-confirm-popup-flipped');}}}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.visible){this.setState({visible:true});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.visible!==this.props.visible){this.setState({visible:this.props.visible});}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unbindDocumentClickListener();this.unbindResizeListener();if(this.scrollHandler){this.scrollHandler.destroy();this.scrollHandler=null;}}},{key:\"renderContent\",value:function renderContent(){var iconClassName=classNames('p-confirm-popup-icon',this.props.icon);var message=ObjectUtils.getJSXElement(this.props.message,this.props);return/*#__PURE__*/React.createElement(\"div\",{className:\"p-confirm-popup-content\"},/*#__PURE__*/React.createElement(\"i\",{className:iconClassName}),/*#__PURE__*/React.createElement(\"span\",{className:\"p-confirm-popup-message\"},message));}},{key:\"renderFooter\",value:function renderFooter(){var acceptClassName=classNames('p-confirm-popup-accept p-button-sm',this.props.acceptClassName);var rejectClassName=classNames('p-confirm-popup-reject p-button-sm',{'p-button-text':!this.props.rejectClassName},this.props.rejectClassName);var content=this.props.footer?ObjectUtils.getJSXElement(this.props.footer,this.props):/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Button,{label:this.rejectLabel(),icon:this.props.rejectIcon,className:rejectClassName,onClick:this.reject}),/*#__PURE__*/React.createElement(Button,{label:this.acceptLabel(),icon:this.props.acceptIcon,className:acceptClassName,onClick:this.accept,autoFocus:true}));return/*#__PURE__*/React.createElement(\"div\",{className:\"p-confirm-popup-footer\"},content);}},{key:\"renderElement\",value:function renderElement(){var className=classNames('p-confirm-popup p-component',this.props.className);var content=this.renderContent();var footer=this.renderFooter();return/*#__PURE__*/React.createElement(CSSTransition,{nodeRef:this.overlayRef,classNames:\"p-connected-overlay\",in:this.state.visible,timeout:{enter:120,exit:100},unmountOnExit:true,onEnter:this.onEnter,onEntered:this.onEntered,onExit:this.onExit},/*#__PURE__*/React.createElement(\"div\",{ref:this.overlayRef,id:this.id,className:className,style:this.props.style,onClick:this.onPanelClick},content,footer));}},{key:\"render\",value:function render(){var element=this.renderElement();return ReactDOM.createPortal(element,this.appendTo);}}]);return ConfirmPopup;}(Component);ConfirmPopup.defaultProps={target:null,visible:false,message:null,rejectLabel:null,acceptLabel:null,icon:null,rejectIcon:null,acceptIcon:null,rejectClassName:null,acceptClassName:null,className:null,style:null,appendTo:null,dismissable:true,footer:null,onHide:null,accept:null,reject:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/components/confirmpopup/ConfirmPopup.js"],"names":["React","Component","ReactDOM","classNames","Button","CSSTransition","UniqueComponentId","ConnectedOverlayScrollHandler","DomHandler","ObjectUtils","localeOption","OverlayEventBus","confirmPopup","props","appendTo","document","body","confirmPopupWrapper","createDocumentFragment","appendChild","visible","undefined","confirmPopupEl","createElement","ConfirmPopup","render","updateConfirmPopup","newProps","cloneElement","_destroy","unmountComponentAtNode","show","onHide","hide","update","state","reject","bind","accept","onCloseClick","onPanelClick","onEnter","onEntered","onExit","id","overlayRef","createRef","acceptLabel","rejectLabel","documentClickListener","dismissable","event","isPanelClicked","isOutsideClicked","target","addEventListener","removeEventListener","scrollHandler","bindScrollListener","unbindScrollListener","resizeListener","window","current","isSameNode","contains","preventDefault","emit","originalEvent","setState","on","e","result","off","style","zIndex","String","generateZIndex","align","bindDocumentClickListener","bindResizeListener","unbindDocumentClickListener","unbindResizeListener","absolutePosition","containerOffset","getOffset","targetOffset","arrowLeft","left","setProperty","top","addClass","prevProps","destroy","iconClassName","icon","message","getJSXElement","acceptClassName","rejectClassName","content","footer","rejectIcon","acceptIcon","className","renderContent","renderFooter","enter","exit","element","renderElement","createPortal","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport { Button } from '../button/Button';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport UniqueComponentId from '../utils/UniqueComponentId';\r\nimport ConnectedOverlayScrollHandler from '../utils/ConnectedOverlayScrollHandler';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\nimport { localeOption } from '../api/Locale';\r\nimport OverlayEventBus from '../overlayeventbus/OverlayEventBus';\r\n\r\nexport function confirmPopup(props) {\r\n    let appendTo = props.appendTo || document.body;\r\n\r\n    let confirmPopupWrapper = document.createDocumentFragment();\r\n    DomHandler.appendChild(confirmPopupWrapper, appendTo);\r\n\r\n    props = {...props, ...{visible: props.visible === undefined ? true : props.visible}};\r\n\r\n    let confirmPopupEl = React.createElement(ConfirmPopup, props);\r\n    ReactDOM.render(confirmPopupEl, confirmPopupWrapper);\r\n\r\n    let updateConfirmPopup = (newProps) => {\r\n        props = { ...props, ...newProps };\r\n        ReactDOM.render(React.cloneElement(confirmPopupEl, props), confirmPopupWrapper);\r\n    };\r\n\r\n    return {\r\n        _destroy: () => {\r\n            ReactDOM.unmountComponentAtNode(confirmPopupWrapper);\r\n        },\r\n        show: () => {\r\n            updateConfirmPopup({ visible: true, onHide: () => {\r\n                updateConfirmPopup({ visible: false }); // reset\r\n            }});\r\n        },\r\n        hide: () => {\r\n            updateConfirmPopup({ visible: false });\r\n        },\r\n        update: (newProps) => {\r\n            updateConfirmPopup(newProps);\r\n        }\r\n    }\r\n}\r\n\r\nexport class ConfirmPopup extends Component {\r\n\r\n    static defaultProps = {\r\n        target: null,\r\n        visible: false,\r\n        message: null,\r\n        rejectLabel: null,\r\n        acceptLabel: null,\r\n        icon: null,\r\n        rejectIcon: null,\r\n        acceptIcon: null,\r\n        rejectClassName: null,\r\n        acceptClassName: null,\r\n        className: null,\r\n        style: null,\r\n        appendTo: null,\r\n        dismissable: true,\r\n        footer: null,\r\n        onHide: null,\r\n        accept: null,\r\n        reject: null\r\n    }\r\n\r\n    static propTypes = {\r\n        target: PropTypes.any,\r\n        visible: PropTypes.bool,\r\n        message: PropTypes.any,\r\n        rejectLabel: PropTypes.string,\r\n        acceptLabel: PropTypes.string,\r\n        icon: PropTypes.string,\r\n        rejectIcon: PropTypes.string,\r\n        acceptIcon: PropTypes.string,\r\n        rejectClassName: PropTypes.string,\r\n        acceptClassName: PropTypes.string,\r\n        className: PropTypes.string,\r\n        style: PropTypes.object,\r\n        appendTo: PropTypes.any,\r\n        dismissable: PropTypes.bool,\r\n        footer: PropTypes.any,\r\n        onHide: PropTypes.func,\r\n        accept: PropTypes.func,\r\n        reject: PropTypes.func\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            visible: false\r\n        };\r\n\r\n        this.appendTo = props.appendTo || document.body;\r\n\r\n        this.reject = this.reject.bind(this);\r\n        this.accept = this.accept.bind(this);\r\n        this.hide = this.hide.bind(this);\r\n        this.onCloseClick = this.onCloseClick.bind(this);\r\n        this.onPanelClick = this.onPanelClick.bind(this);\r\n        this.onEnter = this.onEnter.bind(this);\r\n        this.onEntered = this.onEntered.bind(this);\r\n        this.onExit = this.onExit.bind(this);\r\n\r\n        this.id = this.props.id || UniqueComponentId();\r\n        this.overlayRef = React.createRef();\r\n    }\r\n\r\n    acceptLabel() {\r\n        return this.props.acceptLabel || localeOption('accept');\r\n    }\r\n\r\n    rejectLabel() {\r\n        return this.props.rejectLabel || localeOption('reject');\r\n    }\r\n\r\n    bindDocumentClickListener() {\r\n        if(!this.documentClickListener && this.props.dismissable) {\r\n            this.documentClickListener = (event) => {\r\n                if (!this.isPanelClicked && this.isOutsideClicked(event.target)) {\r\n                    this.hide();\r\n                }\r\n\r\n                this.isPanelClicked = false;\r\n            };\r\n\r\n            document.addEventListener('click', this.documentClickListener);\r\n        }\r\n    }\r\n\r\n    unbindDocumentClickListener() {\r\n        if(this.documentClickListener) {\r\n            document.removeEventListener('click', this.documentClickListener);\r\n            this.documentClickListener = null;\r\n        }\r\n    }\r\n\r\n    bindScrollListener() {\r\n        if (!this.scrollHandler) {\r\n            this.scrollHandler = new ConnectedOverlayScrollHandler(this.props.target, () => {\r\n                if (this.state.visible) {\r\n                    this.hide();\r\n                }\r\n            });\r\n        }\r\n\r\n        this.scrollHandler.bindScrollListener();\r\n    }\r\n\r\n    unbindScrollListener() {\r\n        if (this.scrollHandler) {\r\n            this.scrollHandler.unbindScrollListener();\r\n        }\r\n    }\r\n\r\n    bindResizeListener() {\r\n        if (!this.resizeListener) {\r\n            this.resizeListener = () => {\r\n                if (this.state.visible) {\r\n                    this.hide();\r\n                }\r\n            };\r\n            window.addEventListener('resize', this.resizeListener);\r\n        }\r\n    }\r\n\r\n    unbindResizeListener() {\r\n        if (this.resizeListener) {\r\n            window.removeEventListener('resize', this.resizeListener);\r\n            this.resizeListener = null;\r\n        }\r\n    }\r\n\r\n    isOutsideClicked(target) {\r\n        return this.overlayRef && this.overlayRef.current && !(this.overlayRef.current.isSameNode(target) || this.overlayRef.current.contains(target));\r\n    }\r\n\r\n    onCloseClick(event) {\r\n        this.hide();\r\n\r\n        event.preventDefault();\r\n    }\r\n\r\n    onPanelClick(event) {\r\n        this.isPanelClicked = true;\r\n\r\n        OverlayEventBus.emit('overlay-click', {\r\n            originalEvent: event,\r\n            target: this.props.target\r\n        });\r\n    }\r\n\r\n    accept() {\r\n        if (this.props.accept) {\r\n            this.props.accept();\r\n        }\r\n\r\n        this.hide('accept');\r\n    }\r\n\r\n    reject() {\r\n        if (this.props.reject) {\r\n            this.props.reject();\r\n        }\r\n\r\n        this.hide('reject');\r\n    }\r\n\r\n    show() {\r\n        this.setState({ visible: true }, () => {\r\n            OverlayEventBus.on('overlay-click', (e) => {\r\n                if (!this.isOutsideClicked(e.target)) {\r\n                    this.isPanelClicked = true;\r\n                }\r\n            });\r\n        });\r\n    }\r\n\r\n    hide(result) {\r\n        this.setState({ visible: false }, () => {\r\n            OverlayEventBus.off('overlay-click');\r\n\r\n            if (this.props.onHide) {\r\n                this.props.onHide(result);\r\n            }\r\n        });\r\n    }\r\n\r\n    onEnter() {\r\n        this.overlayRef.current.style.zIndex = String(DomHandler.generateZIndex());\r\n        this.align();\r\n    }\r\n\r\n    onEntered() {\r\n        this.bindDocumentClickListener();\r\n        this.bindScrollListener();\r\n        this.bindResizeListener();\r\n    }\r\n\r\n    onExit() {\r\n        this.unbindDocumentClickListener();\r\n        this.unbindScrollListener();\r\n        this.unbindResizeListener();\r\n    }\r\n\r\n    align() {\r\n        if (this.props.target) {\r\n            DomHandler.absolutePosition(this.overlayRef.current, this.props.target);\r\n\r\n            const containerOffset = DomHandler.getOffset(this.overlayRef.current);\r\n            const targetOffset = DomHandler.getOffset(this.props.target);\r\n            let arrowLeft = 0;\r\n\r\n            if (containerOffset.left < targetOffset.left) {\r\n                arrowLeft = targetOffset.left - containerOffset.left;\r\n            }\r\n            this.overlayRef.current.style.setProperty('--overlayArrowLeft', `${arrowLeft}px`);\r\n\r\n            if (containerOffset.top < targetOffset.top) {\r\n                DomHandler.addClass(this.overlayRef.current, 'p-confirm-popup-flipped');\r\n            }\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.visible) {\r\n            this.setState({ visible: true });\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.visible !== this.props.visible) {\r\n            this.setState({ visible: this.props.visible });\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.unbindDocumentClickListener();\r\n        this.unbindResizeListener();\r\n        if (this.scrollHandler) {\r\n            this.scrollHandler.destroy();\r\n            this.scrollHandler = null;\r\n        }\r\n    }\r\n\r\n    renderContent() {\r\n        const iconClassName = classNames('p-confirm-popup-icon', this.props.icon);\r\n        const message = ObjectUtils.getJSXElement(this.props.message, this.props);\r\n\r\n        return (\r\n            <div className=\"p-confirm-popup-content\">\r\n                <i className={iconClassName} />\r\n                <span className=\"p-confirm-popup-message\">{message}</span>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderFooter() {\r\n        const acceptClassName = classNames('p-confirm-popup-accept p-button-sm', this.props.acceptClassName);\r\n        const rejectClassName = classNames('p-confirm-popup-reject p-button-sm', {\r\n            'p-button-text': !this.props.rejectClassName\r\n        }, this.props.rejectClassName);\r\n\r\n        const content = this.props.footer ? ObjectUtils.getJSXElement(this.props.footer, this.props) : (\r\n            <>\r\n                <Button label={this.rejectLabel()} icon={this.props.rejectIcon} className={rejectClassName} onClick={this.reject} />\r\n                <Button label={this.acceptLabel()} icon={this.props.acceptIcon} className={acceptClassName} onClick={this.accept} autoFocus />\r\n            </>\r\n        )\r\n\r\n        return (\r\n            <div className=\"p-confirm-popup-footer\">\r\n                {content}\r\n            </div>\r\n        )\r\n    }\r\n\r\n    renderElement() {\r\n        const className = classNames('p-confirm-popup p-component', this.props.className);\r\n        const content = this.renderContent();\r\n        const footer = this.renderFooter();\r\n\r\n        return (\r\n            <CSSTransition nodeRef={this.overlayRef} classNames=\"p-connected-overlay\" in={this.state.visible} timeout={{ enter: 120, exit: 100 }}\r\n                unmountOnExit onEnter={this.onEnter} onEntered={this.onEntered} onExit={this.onExit}>\r\n                <div ref={this.overlayRef} id={this.id} className={className} style={this.props.style} onClick={this.onPanelClick}>\r\n                    {content}\r\n                    {footer}\r\n                </div>\r\n            </CSSTransition>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        let element = this.renderElement();\r\n\r\n        return ReactDOM.createPortal(element, this.appendTo);\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}