{"ast":null,"code":"import _slicedToArray from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{classNames}from'../utils/ClassNames';import{FirstPageLink}from'./FirstPageLink';import{NextPageLink}from'./NextPageLink';import{PrevPageLink}from'./PrevPageLink';import{LastPageLink}from'./LastPageLink';import{PageLinks}from'./PageLinks';import{RowsPerPageDropdown}from'./RowsPerPageDropdown';import{CurrentPageReport}from'./CurrentPageReport';import ObjectUtils from'../utils/ObjectUtils';export var Paginator=/*#__PURE__*/function(_Component){_inherits(Paginator,_Component);var _super=_createSuper(Paginator);function Paginator(props){var _this;_classCallCheck(this,Paginator);_this=_super.call(this,props);_this.changePageToFirst=_this.changePageToFirst.bind(_assertThisInitialized(_this));_this.changePageToPrev=_this.changePageToPrev.bind(_assertThisInitialized(_this));_this.changePageToNext=_this.changePageToNext.bind(_assertThisInitialized(_this));_this.changePageToLast=_this.changePageToLast.bind(_assertThisInitialized(_this));_this.onRowsChange=_this.onRowsChange.bind(_assertThisInitialized(_this));_this.onPageLinkClick=_this.onPageLinkClick.bind(_assertThisInitialized(_this));return _this;}_createClass(Paginator,[{key:\"isFirstPage\",value:function isFirstPage(){return this.getPage()===0;}},{key:\"isLastPage\",value:function isLastPage(){return this.getPage()===this.getPageCount()-1;}},{key:\"getPageCount\",value:function getPageCount(){return Math.ceil(this.props.totalRecords/this.props.rows)||1;}},{key:\"calculatePageLinkBoundaries\",value:function calculatePageLinkBoundaries(){var numberOfPages=this.getPageCount();var visiblePages=Math.min(this.props.pageLinkSize,numberOfPages);//calculate range, keep current in middle if necessary\nvar start=Math.max(0,Math.ceil(this.getPage()-visiblePages/2));var end=Math.min(numberOfPages-1,start+visiblePages-1);//check when approaching to last page\nvar delta=this.props.pageLinkSize-(end-start+1);start=Math.max(0,start-delta);return[start,end];}},{key:\"updatePageLinks\",value:function updatePageLinks(){var pageLinks=[];var boundaries=this.calculatePageLinkBoundaries();var start=boundaries[0];var end=boundaries[1];for(var i=start;i<=end;i++){pageLinks.push(i+1);}return pageLinks;}},{key:\"changePage\",value:function changePage(first,rows){var pc=this.getPageCount();var p=Math.floor(first/rows);if(p>=0&&p<pc){var newPageState={first:first,rows:rows,page:p,pageCount:pc};if(this.props.onPageChange){this.props.onPageChange(newPageState);}}}},{key:\"getPage\",value:function getPage(){return Math.floor(this.props.first/this.props.rows);}},{key:\"changePageToFirst\",value:function changePageToFirst(event){this.changePage(0,this.props.rows);event.preventDefault();}},{key:\"changePageToPrev\",value:function changePageToPrev(event){this.changePage(this.props.first-this.props.rows,this.props.rows);event.preventDefault();}},{key:\"onPageLinkClick\",value:function onPageLinkClick(event){this.changePage((event.value-1)*this.props.rows,this.props.rows);}},{key:\"changePageToNext\",value:function changePageToNext(event){this.changePage(this.props.first+this.props.rows,this.props.rows);event.preventDefault();}},{key:\"changePageToLast\",value:function changePageToLast(event){this.changePage((this.getPageCount()-1)*this.props.rows,this.props.rows);event.preventDefault();}},{key:\"onRowsChange\",value:function onRowsChange(event){this.changePage(0,event.value);}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){if(this.props.rows!==prevProps.rows){this.changePage(0,this.props.rows);}else if(this.getPage()>0&&prevProps.totalRecords!==this.props.totalRecords&&this.props.first>=this.props.totalRecords){this.changePage((this.getPageCount()-1)*this.props.rows,this.props.rows);}}},{key:\"renderElement\",value:function renderElement(key,template){var element;switch(key){case'FirstPageLink':element=/*#__PURE__*/React.createElement(FirstPageLink,{key:key,onClick:this.changePageToFirst,disabled:this.isFirstPage(),template:template});break;case'PrevPageLink':element=/*#__PURE__*/React.createElement(PrevPageLink,{key:key,onClick:this.changePageToPrev,disabled:this.isFirstPage(),template:template});break;case'NextPageLink':element=/*#__PURE__*/React.createElement(NextPageLink,{key:key,onClick:this.changePageToNext,disabled:this.isLastPage(),template:template});break;case'LastPageLink':element=/*#__PURE__*/React.createElement(LastPageLink,{key:key,onClick:this.changePageToLast,disabled:this.isLastPage(),template:template});break;case'PageLinks':element=/*#__PURE__*/React.createElement(PageLinks,{key:key,value:this.updatePageLinks(),page:this.getPage(),rows:this.props.rows,pageCount:this.getPageCount(),onClick:this.onPageLinkClick,template:template});break;case'RowsPerPageDropdown':element=/*#__PURE__*/React.createElement(RowsPerPageDropdown,{key:key,value:this.props.rows,page:this.getPage(),pageCount:this.getPageCount(),totalRecords:this.props.totalRecords,options:this.props.rowsPerPageOptions,onChange:this.onRowsChange,appendTo:this.props.dropdownAppendTo,template:template});break;case'CurrentPageReport':element=/*#__PURE__*/React.createElement(CurrentPageReport,{reportTemplate:this.props.currentPageReportTemplate,key:key,page:this.getPage(),pageCount:this.getPageCount(),first:this.props.first,rows:this.props.rows,totalRecords:this.props.totalRecords,template:template});break;default:element=null;break;}return element;}},{key:\"renderElements\",value:function renderElements(){var _this2=this;var template=this.props.template;if(typeof template==='object'){return template.layout?template.layout.split(' ').map(function(value){var key=value.trim();return _this2.renderElement(key,template[key]);}):Object.entries(template).map(function(_ref){var _ref2=_slicedToArray(_ref,2),key=_ref2[0],_template=_ref2[1];return _this2.renderElement(key,_template);});}return template.split(' ').map(function(value){return _this2.renderElement(value.trim());});}},{key:\"render\",value:function render(){if(!this.props.alwaysShow&&this.getPageCount()===1){return null;}else{var className=classNames('p-paginator p-component',this.props.className);var leftContent=ObjectUtils.getJSXElement(this.props.leftContent,this.props);var rightContent=ObjectUtils.getJSXElement(this.props.rightContent,this.props);var elements=this.renderElements();var leftElement=leftContent&&/*#__PURE__*/React.createElement(\"div\",{className:\"p-paginator-left-content\"},leftContent);var rightElement=rightContent&&/*#__PURE__*/React.createElement(\"div\",{className:\"p-paginator-right-content\"},rightContent);return/*#__PURE__*/React.createElement(\"div\",{className:className,style:this.props.style},leftElement,elements,rightElement);}}}]);return Paginator;}(Component);Paginator.defaultProps={totalRecords:0,rows:0,first:0,pageLinkSize:5,rowsPerPageOptions:null,style:null,className:null,template:'FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown',onPageChange:null,leftContent:null,rightContent:null,dropdownAppendTo:null,currentPageReportTemplate:'({currentPage} of {totalPages})',alwaysShow:true};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/components/paginator/Paginator.js"],"names":["React","Component","classNames","FirstPageLink","NextPageLink","PrevPageLink","LastPageLink","PageLinks","RowsPerPageDropdown","CurrentPageReport","ObjectUtils","Paginator","props","changePageToFirst","bind","changePageToPrev","changePageToNext","changePageToLast","onRowsChange","onPageLinkClick","getPage","getPageCount","Math","ceil","totalRecords","rows","numberOfPages","visiblePages","min","pageLinkSize","start","max","end","delta","pageLinks","boundaries","calculatePageLinkBoundaries","i","push","first","pc","p","floor","newPageState","page","pageCount","onPageChange","event","changePage","preventDefault","value","prevProps","prevState","key","template","element","isFirstPage","isLastPage","updatePageLinks","rowsPerPageOptions","dropdownAppendTo","currentPageReportTemplate","layout","split","map","trim","renderElement","Object","entries","_template","alwaysShow","className","leftContent","getJSXElement","rightContent","elements","renderElements","leftElement","rightElement","style","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport { FirstPageLink } from './FirstPageLink';\r\nimport { NextPageLink } from './NextPageLink';\r\nimport { PrevPageLink } from './PrevPageLink';\r\nimport { LastPageLink } from './LastPageLink';\r\nimport { PageLinks } from './PageLinks';\r\nimport { RowsPerPageDropdown } from './RowsPerPageDropdown';\r\nimport { CurrentPageReport } from './CurrentPageReport';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\n\r\nexport class Paginator extends Component {\r\n\r\n    static defaultProps = {\r\n        totalRecords: 0,\r\n        rows: 0,\r\n        first: 0,\r\n        pageLinkSize: 5,\r\n        rowsPerPageOptions: null,\r\n        style: null,\r\n        className: null,\r\n        template: 'FirstPageLink PrevPageLink PageLinks NextPageLink LastPageLink RowsPerPageDropdown',\r\n        onPageChange: null,\r\n        leftContent: null,\r\n        rightContent: null,\r\n        dropdownAppendTo: null,\r\n        currentPageReportTemplate: '({currentPage} of {totalPages})',\r\n        alwaysShow: true\r\n    }\r\n\r\n    static propTypes = {\r\n        totalRecords: PropTypes.number,\r\n        rows: PropTypes.number,\r\n        first: PropTypes.number,\r\n        pageLinkSize: PropTypes.number,\r\n        rowsPerPageOptions: PropTypes.array,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        template: PropTypes.oneOfType([PropTypes.string, PropTypes.object]),\r\n        onPageChange: PropTypes.func,\r\n        leftContent: PropTypes.any,\r\n        rightContent: PropTypes.any,\r\n        dropdownAppendTo: PropTypes.any,\r\n        currentPageReportTemplate: PropTypes.any,\r\n        alwaysShow: PropTypes.bool\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.changePageToFirst = this.changePageToFirst.bind(this);\r\n        this.changePageToPrev = this.changePageToPrev.bind(this);\r\n        this.changePageToNext = this.changePageToNext.bind(this);\r\n        this.changePageToLast = this.changePageToLast.bind(this);\r\n        this.onRowsChange = this.onRowsChange.bind(this);\r\n        this.onPageLinkClick = this.onPageLinkClick.bind(this);\r\n    }\r\n\r\n    isFirstPage() {\r\n        return this.getPage() === 0;\r\n    }\r\n\r\n    isLastPage() {\r\n        return this.getPage() === this.getPageCount() - 1;\r\n    }\r\n\r\n    getPageCount() {\r\n        return Math.ceil(this.props.totalRecords / this.props.rows) || 1;\r\n    }\r\n\r\n    calculatePageLinkBoundaries() {\r\n        let numberOfPages = this.getPageCount();\r\n        let visiblePages = Math.min(this.props.pageLinkSize, numberOfPages);\r\n\r\n        //calculate range, keep current in middle if necessary\r\n        let start = Math.max(0, Math.ceil(this.getPage() - ((visiblePages) / 2)));\r\n        let end = Math.min(numberOfPages - 1, start + visiblePages - 1);\r\n\r\n        //check when approaching to last page\r\n        let delta = this.props.pageLinkSize - (end - start + 1);\r\n        start = Math.max(0, start - delta);\r\n\r\n        return [start, end];\r\n    }\r\n\r\n    updatePageLinks() {\r\n        let pageLinks = [];\r\n        let boundaries = this.calculatePageLinkBoundaries();\r\n        let start = boundaries[0];\r\n        let end = boundaries[1];\r\n\r\n        for (let i = start; i <= end; i++) {\r\n            pageLinks.push(i + 1);\r\n        }\r\n\r\n        return pageLinks;\r\n    }\r\n\r\n    changePage(first, rows) {\r\n        let pc = this.getPageCount();\r\n        let p = Math.floor(first / rows);\r\n\r\n        if (p >= 0 && p < pc) {\r\n            let newPageState = {\r\n                first: first,\r\n                rows: rows,\r\n                page: p,\r\n                pageCount: pc\r\n            };\r\n\r\n            if (this.props.onPageChange) {\r\n                this.props.onPageChange(newPageState);\r\n            }\r\n        }\r\n    }\r\n\r\n    getPage() {\r\n        return Math.floor(this.props.first / this.props.rows);\r\n    }\r\n\r\n    changePageToFirst(event) {\r\n        this.changePage(0, this.props.rows);\r\n        event.preventDefault();\r\n    }\r\n\r\n    changePageToPrev(event) {\r\n        this.changePage(this.props.first - this.props.rows, this.props.rows);\r\n        event.preventDefault();\r\n    }\r\n\r\n    onPageLinkClick(event) {\r\n        this.changePage((event.value - 1) * this.props.rows, this.props.rows);\r\n    }\r\n\r\n    changePageToNext(event) {\r\n        this.changePage(this.props.first + this.props.rows, this.props.rows);\r\n        event.preventDefault();\r\n    }\r\n\r\n    changePageToLast(event) {\r\n        this.changePage((this.getPageCount() - 1) * this.props.rows, this.props.rows);\r\n        event.preventDefault();\r\n    }\r\n\r\n    onRowsChange(event) {\r\n        this.changePage(0, event.value);\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.props.rows !== prevProps.rows) {\r\n            this.changePage(0, this.props.rows);\r\n        }\r\n        else if (this.getPage() > 0 && prevProps.totalRecords !== this.props.totalRecords && this.props.first >= this.props.totalRecords) {\r\n            this.changePage((this.getPageCount() - 1) * this.props.rows, this.props.rows);\r\n        }\r\n    }\r\n\r\n    renderElement(key, template) {\r\n        let element;\r\n\r\n        switch (key) {\r\n            case 'FirstPageLink':\r\n                element = <FirstPageLink key={key} onClick={this.changePageToFirst} disabled={this.isFirstPage()} template={template} />;\r\n                break;\r\n\r\n            case 'PrevPageLink':\r\n                element = <PrevPageLink key={key} onClick={this.changePageToPrev} disabled={this.isFirstPage()} template={template} />;\r\n                break;\r\n\r\n            case 'NextPageLink':\r\n                element = <NextPageLink key={key} onClick={this.changePageToNext} disabled={this.isLastPage()} template={template} />;\r\n                break;\r\n\r\n            case 'LastPageLink':\r\n                element = <LastPageLink key={key} onClick={this.changePageToLast} disabled={this.isLastPage()} template={template} />;\r\n                break;\r\n\r\n            case 'PageLinks':\r\n                element = <PageLinks key={key} value={this.updatePageLinks()} page={this.getPage()} rows={this.props.rows} pageCount={this.getPageCount()} onClick={this.onPageLinkClick} template={template} />;\r\n                break;\r\n\r\n            case 'RowsPerPageDropdown':\r\n                element = <RowsPerPageDropdown key={key} value={this.props.rows} page={this.getPage()} pageCount={this.getPageCount()} totalRecords={this.props.totalRecords} options={this.props.rowsPerPageOptions} onChange={this.onRowsChange} appendTo={this.props.dropdownAppendTo} template={template} />;\r\n                break;\r\n\r\n            case 'CurrentPageReport':\r\n                element = <CurrentPageReport reportTemplate={this.props.currentPageReportTemplate} key={key}\r\n                    page={this.getPage()} pageCount={this.getPageCount()} first={this.props.first}\r\n                    rows={this.props.rows} totalRecords={this.props.totalRecords} template={template}/>;\r\n                break;\r\n\r\n            default:\r\n                element = null;\r\n                break;\r\n        }\r\n\r\n        return element;\r\n    }\r\n\r\n    renderElements() {\r\n        const template = this.props.template;\r\n\r\n        if (typeof template === 'object') {\r\n            return template.layout ?\r\n                template.layout.split(' ').map((value) => {\r\n                    const key = value.trim();\r\n                    return this.renderElement(key, template[key]);\r\n                })\r\n                :\r\n                Object.entries(template).map(([key, _template]) => {\r\n                    return this.renderElement(key, _template);\r\n                });\r\n        }\r\n\r\n        return template.split(' ').map((value) => {\r\n            return this.renderElement(value.trim());\r\n        });\r\n    }\r\n\r\n    render() {\r\n        if (!this.props.alwaysShow && this.getPageCount() === 1) {\r\n            return null;\r\n        }\r\n        else {\r\n            const className = classNames('p-paginator p-component', this.props.className);\r\n            const leftContent = ObjectUtils.getJSXElement(this.props.leftContent, this.props);\r\n            const rightContent = ObjectUtils.getJSXElement(this.props.rightContent, this.props);\r\n\r\n            const elements = this.renderElements();\r\n            const leftElement = leftContent && <div className=\"p-paginator-left-content\">{leftContent}</div>;\r\n            const rightElement = rightContent && <div className=\"p-paginator-right-content\">{rightContent}</div>;\r\n\r\n            return (\r\n                <div className={className} style={this.props.style}>\r\n                    {leftElement}\r\n                    {elements}\r\n                    {rightElement}\r\n                </div>\r\n            );\r\n        }\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}