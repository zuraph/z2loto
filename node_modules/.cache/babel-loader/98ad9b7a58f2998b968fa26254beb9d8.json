{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _toConsumableArray from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{BodyRow}from'./BodyRow';import DomHandler from'../utils/DomHandler';import ObjectUtils from'../utils/ObjectUtils';import{RowTogglerButton}from'./RowTogglerButton';export var TableBody=/*#__PURE__*/function(_Component){_inherits(TableBody,_Component);var _super=_createSuper(TableBody);function TableBody(props){var _this;_classCallCheck(this,TableBody);_this=_super.call(this,props);_this.onRowClick=_this.onRowClick.bind(_assertThisInitialized(_this));_this.onRowRightClick=_this.onRowRightClick.bind(_assertThisInitialized(_this));_this.onRowTouchEnd=_this.onRowTouchEnd.bind(_assertThisInitialized(_this));_this.onRowToggle=_this.onRowToggle.bind(_assertThisInitialized(_this));_this.onRadioClick=_this.onRadioClick.bind(_assertThisInitialized(_this));_this.onCheckboxClick=_this.onCheckboxClick.bind(_assertThisInitialized(_this));_this.onRowDragEnd=_this.onRowDragEnd.bind(_assertThisInitialized(_this));_this.onRowDragLeave=_this.onRowDragLeave.bind(_assertThisInitialized(_this));_this.onRowDrop=_this.onRowDrop.bind(_assertThisInitialized(_this));return _this;}_createClass(TableBody,[{key:\"onRowClick\",value:function onRowClick(event){var targetNode=event.originalEvent.target.nodeName;if(targetNode==='INPUT'||targetNode==='BUTTON'||targetNode==='A'||DomHandler.hasClass(event.originalEvent.target,'p-clickable')){return;}if(this.props.onRowClick){this.props.onRowClick(event);}if(this.props.selectionMode){var rowData=event.data;var rowIndex=event.index;var selection;if(this.isMultipleSelectionMode()&&event.originalEvent.shiftKey&&this.anchorRowIndex!==null){DomHandler.clearSelection();this.rangeRowIndex=rowIndex;selection=this.selectRange(event);}else{var selected=this.isSelected(rowData);var metaSelection=this.rowTouched?false:this.props.metaKeySelection;this.anchorRowIndex=rowIndex;this.rangeRowIndex=rowIndex;this.anchorRowFirst=this.props.first;if(metaSelection){var metaKey=event.originalEvent.metaKey||event.originalEvent.ctrlKey;if(selected&&metaKey){if(this.isSingleSelectionMode()){selection=null;}else{var selectionIndex=this.findIndexInSelection(rowData);selection=this.props.selection.filter(function(val,i){return i!==selectionIndex;});}if(this.props.onRowUnselect){this.props.onRowUnselect({originalEvent:event.originalEvent,data:rowData,type:'row'});}}else{if(this.isSingleSelectionMode()){selection=rowData;}else if(this.isMultipleSelectionMode()){if(metaKey)selection=this.props.selection?_toConsumableArray(this.props.selection):[];else selection=[];selection=[].concat(_toConsumableArray(selection),[rowData]);}if(this.props.onRowSelect){this.props.onRowSelect({originalEvent:event.originalEvent,data:rowData,type:'row'});}}}else{if(this.isSingleSelectionMode()){if(selected){selection=null;if(this.props.onRowUnselect){this.props.onRowUnselect({originalEvent:event.originalEvent,data:rowData,type:'row'});}}else{selection=rowData;if(this.props.onRowSelect){this.props.onRowSelect({originalEvent:event.originalEvent,data:rowData,type:'row'});}}}else{if(selected){var _selectionIndex=this.findIndexInSelection(rowData);selection=this.props.selection.filter(function(val,i){return i!==_selectionIndex;});if(this.props.onRowSelect){this.props.onRowSelect({originalEvent:event.originalEvent,data:rowData,type:'row'});}}else{selection=[].concat(_toConsumableArray(this.props.selection||[]),[rowData]);if(this.props.onRowSelect){this.props.onRowSelect({originalEvent:event.originalEvent,data:rowData,type:'row'});}}}}}if(this.props.onSelectionChange){this.props.onSelectionChange({originalEvent:event.originalEvent,value:selection});}}this.rowTouched=false;}},{key:\"selectRange\",value:function selectRange(event){var rangeStart,rangeEnd;var isLazyAndPaginator=this.props.lazy&&this.props.paginator;if(isLazyAndPaginator){this.anchorRowIndex+=this.anchorRowFirst;this.rangeRowIndex+=this.props.first;}if(this.rangeRowIndex>this.anchorRowIndex){rangeStart=this.anchorRowIndex;rangeEnd=this.rangeRowIndex;}else if(this.rangeRowIndex<this.anchorRowIndex){rangeStart=this.rangeRowIndex;rangeEnd=this.anchorRowIndex;}else{rangeStart=this.rangeRowIndex;rangeEnd=this.rangeRowIndex;}if(isLazyAndPaginator){rangeStart=Math.max(rangeStart-this.props.first,0);rangeEnd-=this.props.first;}var value=this.props.value;var selection=[];for(var i=rangeStart;i<=rangeEnd;i++){var rangeRowData=value[i];selection.push(rangeRowData);if(this.props.onRowSelect){this.props.onRowSelect({originalEvent:event.originalEvent,data:rangeRowData,type:'row'});}}return selection;}},{key:\"onRowTouchEnd\",value:function onRowTouchEnd(event){this.rowTouched=true;}},{key:\"onRowRightClick\",value:function onRowRightClick(event){if(this.props.onContextMenu){DomHandler.clearSelection();if(this.props.onContextMenuSelectionChange){this.props.onContextMenuSelectionChange({originalEvent:event.originalEvent,value:event.data});}if(this.props.onContextMenu){this.props.onContextMenu({originalEvent:event.originalEvent,value:this.props.node});}event.originalEvent.preventDefault();}}},{key:\"onRadioClick\",value:function onRadioClick(event){var rowData=event.data;var selection;if(this.isSelected(rowData)){selection=null;if(this.props.onRowUnselect){this.props.onRowUnselect({originalEvent:event.originalEvent,data:rowData,type:'radio'});}}else{selection=rowData;if(this.props.onRowSelect){this.props.onRowSelect({originalEvent:event.originalEvent,data:rowData,type:'radio'});}}if(this.props.onSelectionChange){this.props.onSelectionChange({originalEvent:event.originalEvent,value:selection});}}},{key:\"onCheckboxClick\",value:function onCheckboxClick(event){var rowData=event.data;var selection;if(this.isSelected(rowData)){var selectionIndex=this.findIndexInSelection(rowData);selection=this.props.selection.filter(function(val,i){return i!==selectionIndex;});if(this.props.onRowUnselect){this.props.onRowUnselect({originalEvent:event.originalEvent,data:rowData,type:'checkbox'});}}else{selection=[].concat(_toConsumableArray(this.props.selection||[]),[rowData]);if(this.props.onRowSelect){this.props.onRowSelect({originalEvent:event.originalEvent,data:rowData,type:'checkbox'});}}if(this.props.onSelectionChange){this.props.onSelectionChange({originalEvent:event.originalEvent,value:selection});}}},{key:\"isSingleSelectionMode\",value:function isSingleSelectionMode(){return this.props.selectionMode==='single';}},{key:\"isMultipleSelectionMode\",value:function isMultipleSelectionMode(){return this.props.selectionMode==='multiple';}},{key:\"isSelected\",value:function isSelected(rowData){if(rowData&&this.props.selection){if(this.props.selection instanceof Array)return this.findIndexInSelection(rowData)>-1;else return this.equals(rowData,this.props.selection);}return false;}},{key:\"isContextMenuSelected\",value:function isContextMenuSelected(rowData){if(rowData&&this.props.contextMenuSelection){return this.equals(rowData,this.props.contextMenuSelection);}return false;}},{key:\"equals\",value:function equals(data1,data2){return this.compareSelectionBy==='equals'?data1===data2:ObjectUtils.equals(data1,data2,this.props.dataKey);}},{key:\"findIndexInSelection\",value:function findIndexInSelection(rowData){var index=-1;if(this.props.selection){for(var i=0;i<this.props.selection.length;i++){if(this.equals(rowData,this.props.selection[i])){index=i;break;}}}return index;}},{key:\"onRowToggle\",value:function onRowToggle(event){var expandedRows;var dataKey=this.props.dataKey;if(dataKey){var dataKeyValue=String(ObjectUtils.resolveFieldData(event.data,dataKey));expandedRows=this.props.expandedRows?_objectSpread({},this.props.expandedRows):{};if(expandedRows[dataKeyValue]!=null){delete expandedRows[dataKeyValue];if(this.props.onRowCollapse){this.props.onRowCollapse({originalEvent:event,data:event.data});}}else{expandedRows[dataKeyValue]=true;if(this.props.onRowExpand){this.props.onRowExpand({originalEvent:event,data:event.data});}}}else{var expandedRowIndex=this.findExpandedRowIndex(event.data);expandedRows=this.props.expandedRows?_toConsumableArray(this.props.expandedRows):[];if(expandedRowIndex!==-1){expandedRows=expandedRows.filter(function(val,i){return i!==expandedRowIndex;});if(this.props.onRowCollapse){this.props.onRowCollapse({originalEvent:event,data:event.data});}}else{expandedRows.push(event.data);if(this.props.onRowExpand){this.props.onRowExpand({originalEvent:event,data:event.data});}}}if(this.props.onRowToggle){this.props.onRowToggle({data:expandedRows});}}},{key:\"findExpandedRowIndex\",value:function findExpandedRowIndex(row){var index=-1;if(this.props.expandedRows){for(var i=0;i<this.props.expandedRows.length;i++){if(ObjectUtils.equals(this.props.expandedRows[i],row)){index=i;break;}}}return index;}},{key:\"isRowExpanded\",value:function isRowExpanded(row){var dataKey=this.props.dataKey;if(dataKey){var dataKeyValue=String(ObjectUtils.resolveFieldData(row,dataKey));return this.props.expandedRows&&this.props.expandedRows[dataKeyValue]!=null;}else{return this.findExpandedRowIndex(row)!==-1;}}},{key:\"isSelectionEnabled\",value:function isSelectionEnabled(){if(this.props.selectionMode||this.props.frozenSelectionMode!=null){return true;}else{if(Array.isArray(this.props.children)){for(var i=0;i<this.props.children.length;i++){if(this.props.children[i].props.selectionMode){return true;}}}else{return this.props.children&&this.props.children.selectionMode!=null;}}return false;}},{key:\"onRowDragStart\",value:function onRowDragStart(event,index){this.rowDragging=true;this.draggedRowIndex=index;event.dataTransfer.setData('text','b');// For firefox\n}},{key:\"onRowDragEnd\",value:function onRowDragEnd(event,index){this.rowDragging=false;this.draggedRowIndex=null;this.droppedRowIndex=null;}},{key:\"onRowDragOver\",value:function onRowDragOver(event,index){if(this.rowDragging&&this.draggedRowIndex!==index){var rowElement=event.rowElement;var rowY=DomHandler.getOffset(rowElement).top+DomHandler.getWindowScrollTop();var pageY=event.originalEvent.pageY;var rowMidY=rowY+DomHandler.getOuterHeight(rowElement)/2;var prevRowElement=rowElement.previousElementSibling;if(pageY<rowMidY){DomHandler.removeClass(rowElement,'p-datatable-dragpoint-bottom');this.droppedRowIndex=index;if(prevRowElement)DomHandler.addClass(prevRowElement,'p-datatable-dragpoint-bottom');else DomHandler.addClass(rowElement,'p-datatable-dragpoint-top');}else{if(prevRowElement)DomHandler.removeClass(prevRowElement,'p-datatable-dragpoint-bottom');else DomHandler.addClass(rowElement,'p-datatable-dragpoint-top');this.droppedRowIndex=index+1;DomHandler.addClass(rowElement,'p-datatable-dragpoint-bottom');}}}},{key:\"onRowDragLeave\",value:function onRowDragLeave(event){var rowElement=event.rowElement;var prevRowElement=rowElement.previousElementSibling;if(prevRowElement){DomHandler.removeClass(prevRowElement,'p-datatable-dragpoint-bottom');}DomHandler.removeClass(rowElement,'p-datatable-dragpoint-bottom');DomHandler.removeClass(rowElement,'p-datatable-dragpoint-top');}},{key:\"onRowDrop\",value:function onRowDrop(event){if(this.droppedRowIndex!=null){var dropIndex=this.draggedRowIndex>this.droppedRowIndex?this.droppedRowIndex:this.droppedRowIndex===0?0:this.droppedRowIndex-1;var val=_toConsumableArray(this.props.value);ObjectUtils.reorderArray(val,this.draggedRowIndex,dropIndex);if(this.props.onRowReorder){this.props.onRowReorder({originalEvent:event,value:val,dragIndex:this.draggedRowIndex,dropIndex:this.droppedRowIndex});}}//cleanup\nthis.onRowDragLeave(event);this.onRowDragEnd(event);}},{key:\"renderRowGroupHeader\",value:function renderRowGroupHeader(rowData,index){var content=null;if(this.props.rowGroupMode==='subheader'&&this.props.expandableRowGroups){content=/*#__PURE__*/React.createElement(RowTogglerButton,{onClick:this.onRowToggle,rowData:rowData,expanded:this.isRowExpanded(rowData)});}return/*#__PURE__*/React.createElement(\"tr\",{role:\"row\",key:index+'_rowgroupheader',className:\"p-rowgroup-header\"},/*#__PURE__*/React.createElement(\"td\",{role:\"cell\",colSpan:React.Children.count(this.props.children)},content,/*#__PURE__*/React.createElement(\"span\",{className:\"p-rowgroup-header-name\"},this.props.rowGroupHeaderTemplate(rowData,index))));}},{key:\"renderRowGroupFooter\",value:function renderRowGroupFooter(rowData,index){return/*#__PURE__*/React.createElement(\"tr\",{role:\"row\",key:index+'_rowgroupfooter',className:\"p-rowgroup-footer\"},this.props.rowGroupFooterTemplate(rowData,index));}},{key:\"render\",value:function render(){var _this2=this;var rows;if(this.props.children){var rpp=this.props.rows||0;var first=this.props.first||0;var selectionEnabled=this.isSelectionEnabled();var rowGroupMode=this.props.rowGroupMode;var hasSubheaderGrouping=rowGroupMode&&rowGroupMode==='subheader';var rowSpanGrouping=rowGroupMode&&rowGroupMode==='rowspan';var rowGroupHeaderExpanded=false;if(this.props.value&&this.props.value.length){rows=[];var startIndex=this.props.lazy?0:this.props.value.length>first?first:0;var endIndex=this.props.virtualScroll?startIndex+rpp*2:startIndex+rpp||this.props.value.length;var _loop=function _loop(i){if(i>=_this2.props.value.length){return\"break\";}var rowData=_this2.props.value[i];var expanded=_this2.isRowExpanded(rowData);var selected=selectionEnabled?_this2.isSelected(_this2.props.value[i]):false;var contextMenuSelected=_this2.isContextMenuSelected(rowData);var groupRowSpan=void 0;//header row group\nif(hasSubheaderGrouping){var currentRowFieldData=ObjectUtils.resolveFieldData(rowData,_this2.props.groupField);var previousRowFieldData=ObjectUtils.resolveFieldData(_this2.props.value[i-1],_this2.props.groupField);if(i===0||currentRowFieldData!==previousRowFieldData){rows.push(_this2.renderRowGroupHeader(rowData,i));rowGroupHeaderExpanded=expanded;}}if(rowSpanGrouping){var rowSpanIndex=i;var _currentRowFieldData=ObjectUtils.resolveFieldData(rowData,_this2.props.sortField);var shouldCountRowSpan=i===startIndex||ObjectUtils.resolveFieldData(_this2.props.value[i-1],_this2.props.sortField)!==_currentRowFieldData;if(shouldCountRowSpan){var nextRowFieldData=_currentRowFieldData;groupRowSpan=0;while(_currentRowFieldData===nextRowFieldData){groupRowSpan++;var nextRowData=_this2.props.value[++rowSpanIndex];if(nextRowData){nextRowFieldData=ObjectUtils.resolveFieldData(nextRowData,_this2.props.sortField);}else{break;}}}}var isRowGroupExpanded=_this2.props.expandableRowGroups&&hasSubheaderGrouping&&rowGroupHeaderExpanded;if(!_this2.props.expandableRowGroups||isRowGroupExpanded){//row content\nvar bodyRow=/*#__PURE__*/React.createElement(BodyRow,{tableId:_this2.props.tableId,key:i,value:_this2.props.value,rowData:rowData,rowIndex:i,onClick:_this2.onRowClick,onDoubleClick:_this2.props.onRowDoubleClick,onRightClick:_this2.onRowRightClick,onTouchEnd:_this2.onRowTouchEnd,onRowToggle:_this2.onRowToggle,expanded:expanded,selectionMode:_this2.props.selectionMode,onRadioClick:_this2.onRadioClick,onCheckboxClick:_this2.onCheckboxClick,selected:selected,contextMenuSelected:contextMenuSelected,rowClassName:_this2.props.rowClassName,sortField:_this2.props.sortField,rowGroupMode:_this2.props.rowGroupMode,groupRowSpan:groupRowSpan,onDragStart:function onDragStart(e){return _this2.onRowDragStart(e,i);},onDragEnd:_this2.onRowDragEnd,onDragOver:function onDragOver(e){return _this2.onRowDragOver(e,i);},onDragLeave:_this2.onRowDragLeave,onDrop:_this2.onRowDrop,virtualScroll:_this2.props.virtualScroll,virtualRowHeight:_this2.props.virtualRowHeight,editMode:_this2.props.editMode,rowEditorValidator:_this2.props.rowEditorValidator,onRowEditInit:_this2.props.onRowEditInit,onRowEditSave:_this2.props.onRowEditSave,onRowEditCancel:_this2.props.onRowEditCancel,showRowReorderElement:_this2.props.showRowReorderElement,showSelectionElement:_this2.props.showSelectionElement},_this2.props.children);rows.push(bodyRow);}//row expansion\nif(expanded&&!(hasSubheaderGrouping&&_this2.props.expandableRowGroups)){var expandedRowContent=_this2.props.rowExpansionTemplate(rowData);var id=\"\".concat(_this2.props.tableId?_this2.props.tableId+'_':'',\"content_\").concat(i,\"_expanded\");var expandedRow=/*#__PURE__*/React.createElement(\"tr\",{key:id,id:id,role:\"row\"},/*#__PURE__*/React.createElement(\"td\",{role:\"cell\",colSpan:_this2.props.children.length},expandedRowContent));rows.push(expandedRow);}//footer row group\nif(hasSubheaderGrouping&&(!_this2.props.expandableRowGroups||isRowGroupExpanded)){var _currentRowFieldData2=ObjectUtils.resolveFieldData(rowData,_this2.props.groupField);var _nextRowFieldData=ObjectUtils.resolveFieldData(_this2.props.value[i+1],_this2.props.groupField);if(i===_this2.props.value.length-1||_currentRowFieldData2!==_nextRowFieldData){rows.push(_this2.renderRowGroupFooter(rowData,i));}}};for(var i=startIndex;i<endIndex;i++){var _ret=_loop(i);if(_ret===\"break\")break;}}else{var emptyMessage=this.props.emptyMessage;rows=!this.props.loading&&emptyMessage!==null?/*#__PURE__*/React.createElement(\"tr\",{role:\"row\",className:\"p-datatable-emptymessage\"},/*#__PURE__*/React.createElement(\"td\",{role:\"cell\",colSpan:this.props.children.length},typeof emptyMessage==='function'?emptyMessage(this.props.frozen):emptyMessage)):null;}}return/*#__PURE__*/React.createElement(\"tbody\",{className:\"p-datatable-tbody\"},rows);}}]);return TableBody;}(Component);","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/slotmaster-dashboard/src/components/datatable/TableBody.js"],"names":["React","Component","BodyRow","DomHandler","ObjectUtils","RowTogglerButton","TableBody","props","onRowClick","bind","onRowRightClick","onRowTouchEnd","onRowToggle","onRadioClick","onCheckboxClick","onRowDragEnd","onRowDragLeave","onRowDrop","event","targetNode","originalEvent","target","nodeName","hasClass","selectionMode","rowData","data","rowIndex","index","selection","isMultipleSelectionMode","shiftKey","anchorRowIndex","clearSelection","rangeRowIndex","selectRange","selected","isSelected","metaSelection","rowTouched","metaKeySelection","anchorRowFirst","first","metaKey","ctrlKey","isSingleSelectionMode","selectionIndex","findIndexInSelection","filter","val","i","onRowUnselect","type","onRowSelect","onSelectionChange","value","rangeStart","rangeEnd","isLazyAndPaginator","lazy","paginator","Math","max","rangeRowData","push","onContextMenu","onContextMenuSelectionChange","node","preventDefault","Array","equals","contextMenuSelection","data1","data2","compareSelectionBy","dataKey","length","expandedRows","dataKeyValue","String","resolveFieldData","onRowCollapse","onRowExpand","expandedRowIndex","findExpandedRowIndex","row","frozenSelectionMode","isArray","children","rowDragging","draggedRowIndex","dataTransfer","setData","droppedRowIndex","rowElement","rowY","getOffset","top","getWindowScrollTop","pageY","rowMidY","getOuterHeight","prevRowElement","previousElementSibling","removeClass","addClass","dropIndex","reorderArray","onRowReorder","dragIndex","content","rowGroupMode","expandableRowGroups","isRowExpanded","Children","count","rowGroupHeaderTemplate","rowGroupFooterTemplate","rows","rpp","selectionEnabled","isSelectionEnabled","hasSubheaderGrouping","rowSpanGrouping","rowGroupHeaderExpanded","startIndex","endIndex","virtualScroll","expanded","contextMenuSelected","isContextMenuSelected","groupRowSpan","currentRowFieldData","groupField","previousRowFieldData","renderRowGroupHeader","rowSpanIndex","sortField","shouldCountRowSpan","nextRowFieldData","nextRowData","isRowGroupExpanded","bodyRow","tableId","onRowDoubleClick","rowClassName","e","onRowDragStart","onRowDragOver","virtualRowHeight","editMode","rowEditorValidator","onRowEditInit","onRowEditSave","onRowEditCancel","showRowReorderElement","showSelectionElement","expandedRowContent","rowExpansionTemplate","id","expandedRow","renderRowGroupFooter","emptyMessage","loading","frozen"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport {BodyRow} from './BodyRow';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\nimport { RowTogglerButton } from './RowTogglerButton';\r\n\r\nexport class TableBody extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.onRowClick = this.onRowClick.bind(this);\r\n        this.onRowRightClick = this.onRowRightClick.bind(this);\r\n        this.onRowTouchEnd = this.onRowTouchEnd.bind(this);\r\n        this.onRowToggle = this.onRowToggle.bind(this);\r\n        this.onRadioClick = this.onRadioClick.bind(this);\r\n        this.onCheckboxClick = this.onCheckboxClick.bind(this);\r\n        this.onRowDragEnd = this.onRowDragEnd.bind(this);\r\n        this.onRowDragLeave = this.onRowDragLeave.bind(this);\r\n        this.onRowDrop = this.onRowDrop.bind(this);\r\n    }\r\n\r\n    onRowClick(event) {\r\n        let targetNode = event.originalEvent.target.nodeName;\r\n        if(targetNode === 'INPUT' || targetNode === 'BUTTON' || targetNode ==='A' || (DomHandler.hasClass(event.originalEvent.target, 'p-clickable'))) {\r\n            return;\r\n        }\r\n\r\n        if(this.props.onRowClick) {\r\n            this.props.onRowClick(event);\r\n        }\r\n\r\n        if (this.props.selectionMode) {\r\n            let rowData = event.data;\r\n            let rowIndex = event.index;\r\n            let selection;\r\n\r\n            if (this.isMultipleSelectionMode() && event.originalEvent.shiftKey && this.anchorRowIndex !== null) {\r\n                DomHandler.clearSelection();\r\n                this.rangeRowIndex = rowIndex;\r\n                selection = this.selectRange(event);\r\n            }\r\n            else {\r\n                let selected = this.isSelected(rowData);\r\n                let metaSelection = this.rowTouched ? false : this.props.metaKeySelection;\r\n                this.anchorRowIndex = rowIndex;\r\n                this.rangeRowIndex = rowIndex;\r\n                this.anchorRowFirst = this.props.first;\r\n\r\n                if (metaSelection) {\r\n                    let metaKey = event.originalEvent.metaKey || event.originalEvent.ctrlKey;\r\n\r\n                    if(selected && metaKey) {\r\n                        if(this.isSingleSelectionMode()) {\r\n                            selection = null;\r\n                        }\r\n                        else {\r\n                            let selectionIndex = this.findIndexInSelection(rowData);\r\n                            selection = this.props.selection.filter((val,i) => i !== selectionIndex);\r\n                        }\r\n\r\n                        if(this.props.onRowUnselect) {\r\n                            this.props.onRowUnselect({originalEvent: event.originalEvent, data: rowData, type: 'row'});\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (this.isSingleSelectionMode()) {\r\n                            selection = rowData;\r\n                        }\r\n                        else if (this.isMultipleSelectionMode()) {\r\n                            if (metaKey)\r\n                                selection = this.props.selection ? [...this.props.selection] : [];\r\n                            else\r\n                                selection = [];\r\n\r\n                            selection = [...selection, rowData];\r\n                        }\r\n\r\n                        if(this.props.onRowSelect) {\r\n                            this.props.onRowSelect({originalEvent: event.originalEvent, data: rowData, type: 'row'});\r\n                        }\r\n                    }\r\n                }\r\n                else {\r\n                    if(this.isSingleSelectionMode()) {\r\n                        if(selected) {\r\n                            selection = null;\r\n                            if(this.props.onRowUnselect) {\r\n                                this.props.onRowUnselect({originalEvent: event.originalEvent, data: rowData, type: 'row'});\r\n                            }\r\n                        }\r\n                        else {\r\n                            selection = rowData;\r\n                            if(this.props.onRowSelect) {\r\n                                this.props.onRowSelect({originalEvent: event.originalEvent, data: rowData, type: 'row'});\r\n                            }\r\n                        }\r\n                    }\r\n                    else {\r\n                        if (selected) {\r\n                            let selectionIndex = this.findIndexInSelection(rowData);\r\n                            selection = this.props.selection.filter((val,i) => i !== selectionIndex);\r\n                            if(this.props.onRowSelect) {\r\n                                this.props.onRowSelect({originalEvent: event.originalEvent, data: rowData, type: 'row'});\r\n                            }\r\n                        }\r\n                        else {\r\n                            selection = [...this.props.selection||[], rowData];\r\n                            if(this.props.onRowSelect) {\r\n                                this.props.onRowSelect({originalEvent: event.originalEvent, data: rowData, type: 'row'});\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if(this.props.onSelectionChange) {\r\n                this.props.onSelectionChange({\r\n                    originalEvent: event.originalEvent,\r\n                    value: selection\r\n                });\r\n            }\r\n        }\r\n\r\n        this.rowTouched = false;\r\n    }\r\n\r\n    selectRange(event) {\r\n        let rangeStart, rangeEnd;\r\n        let isLazyAndPaginator = this.props.lazy && this.props.paginator;\r\n\r\n        if (isLazyAndPaginator) {\r\n            this.anchorRowIndex += this.anchorRowFirst;\r\n            this.rangeRowIndex += this.props.first;\r\n        }\r\n\r\n        if (this.rangeRowIndex > this.anchorRowIndex) {\r\n            rangeStart = this.anchorRowIndex;\r\n            rangeEnd = this.rangeRowIndex;\r\n        }\r\n        else if(this.rangeRowIndex < this.anchorRowIndex) {\r\n            rangeStart = this.rangeRowIndex;\r\n            rangeEnd = this.anchorRowIndex;\r\n        }\r\n        else {\r\n            rangeStart = this.rangeRowIndex;\r\n            rangeEnd = this.rangeRowIndex;\r\n        }\r\n\r\n        if (isLazyAndPaginator) {\r\n            rangeStart = Math.max(rangeStart - this.props.first, 0);\r\n            rangeEnd -= this.props.first;\r\n        }\r\n\r\n        const value = this.props.value;\r\n        let selection = [];\r\n        for(let i = rangeStart; i <= rangeEnd; i++) {\r\n            let rangeRowData = value[i];\r\n            selection.push(rangeRowData);\r\n\r\n            if(this.props.onRowSelect) {\r\n                this.props.onRowSelect({originalEvent: event.originalEvent, data: rangeRowData, type: 'row'});\r\n            }\r\n        }\r\n\r\n        return selection;\r\n    }\r\n\r\n    onRowTouchEnd(event) {\r\n        this.rowTouched = true;\r\n    }\r\n\r\n    onRowRightClick(event) {\r\n        if (this.props.onContextMenu) {\r\n            DomHandler.clearSelection();\r\n\r\n            if (this.props.onContextMenuSelectionChange) {\r\n                this.props.onContextMenuSelectionChange({\r\n                    originalEvent: event.originalEvent,\r\n                    value: event.data\r\n                });\r\n            }\r\n\r\n            if (this.props.onContextMenu) {\r\n                this.props.onContextMenu({\r\n                    originalEvent: event.originalEvent,\r\n                    value: this.props.node\r\n                });\r\n            }\r\n\r\n            event.originalEvent.preventDefault();\r\n        }\r\n    }\r\n\r\n    onRadioClick(event) {\r\n        let rowData = event.data;\r\n        let selection;\r\n\r\n        if(this.isSelected(rowData)) {\r\n            selection = null;\r\n            if(this.props.onRowUnselect) {\r\n                this.props.onRowUnselect({originalEvent: event.originalEvent, data: rowData, type: 'radio'});\r\n            }\r\n        }\r\n        else {\r\n            selection = rowData;\r\n            if(this.props.onRowSelect) {\r\n                this.props.onRowSelect({originalEvent: event.originalEvent, data: rowData, type: 'radio'});\r\n            }\r\n        }\r\n\r\n        if(this.props.onSelectionChange) {\r\n            this.props.onSelectionChange({\r\n                originalEvent: event.originalEvent,\r\n                value: selection\r\n            });\r\n        }\r\n    }\r\n\r\n    onCheckboxClick(event) {\r\n        let rowData = event.data;\r\n        let selection;\r\n\r\n        if(this.isSelected(rowData)) {\r\n            let selectionIndex = this.findIndexInSelection(rowData);\r\n            selection = this.props.selection.filter((val,i) => i !== selectionIndex);\r\n            if(this.props.onRowUnselect) {\r\n                this.props.onRowUnselect({originalEvent: event.originalEvent, data: rowData, type: 'checkbox'});\r\n            }\r\n        }\r\n        else {\r\n            selection = [...this.props.selection||[], rowData];\r\n            if(this.props.onRowSelect) {\r\n                this.props.onRowSelect({originalEvent: event.originalEvent, data: rowData, type: 'checkbox'});\r\n            }\r\n        }\r\n\r\n        if(this.props.onSelectionChange) {\r\n            this.props.onSelectionChange({\r\n                originalEvent: event.originalEvent,\r\n                value: selection\r\n            });\r\n        }\r\n    }\r\n\r\n    isSingleSelectionMode() {\r\n        return this.props.selectionMode === 'single';\r\n    }\r\n\r\n    isMultipleSelectionMode() {\r\n        return this.props.selectionMode === 'multiple';\r\n    }\r\n\r\n    isSelected(rowData) {\r\n        if(rowData && this.props.selection) {\r\n            if(this.props.selection instanceof Array)\r\n                return this.findIndexInSelection(rowData) > -1;\r\n            else\r\n                return this.equals(rowData, this.props.selection);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    isContextMenuSelected(rowData) {\r\n        if(rowData && this.props.contextMenuSelection) {\r\n            return this.equals(rowData, this.props.contextMenuSelection);\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    equals(data1, data2) {\r\n        return this.compareSelectionBy === 'equals' ? (data1 === data2) : ObjectUtils.equals(data1, data2, this.props.dataKey);\r\n    }\r\n\r\n    findIndexInSelection(rowData) {\r\n        let index = -1;\r\n        if(this.props.selection) {\r\n            for(let i = 0; i  < this.props.selection.length; i++) {\r\n                if(this.equals(rowData, this.props.selection[i])) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n\r\n        return index;\r\n    }\r\n\r\n    onRowToggle(event) {\r\n        let expandedRows;\r\n        let dataKey = this.props.dataKey;\r\n\r\n        if (dataKey) {\r\n            let dataKeyValue = String(ObjectUtils.resolveFieldData(event.data, dataKey));\r\n            expandedRows = this.props.expandedRows ? {...this.props.expandedRows} : {};\r\n\r\n            if (expandedRows[dataKeyValue] != null) {\r\n                delete expandedRows[dataKeyValue];\r\n                if (this.props.onRowCollapse) {\r\n                    this.props.onRowCollapse({originalEvent: event, data: event.data});\r\n                }\r\n            }\r\n            else {\r\n                expandedRows[dataKeyValue] = true;\r\n                if (this.props.onRowExpand) {\r\n                    this.props.onRowExpand({originalEvent: event, data: event.data});\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            let expandedRowIndex = this.findExpandedRowIndex(event.data);\r\n            expandedRows = this.props.expandedRows ? [...this.props.expandedRows] : [];\r\n\r\n            if (expandedRowIndex !== -1) {\r\n                expandedRows = expandedRows.filter((val,i) => i !== expandedRowIndex);\r\n                if (this.props.onRowCollapse) {\r\n                    this.props.onRowCollapse({originalEvent: event, data: event.data});\r\n                }\r\n            }\r\n            else {\r\n                expandedRows.push(event.data);\r\n                if (this.props.onRowExpand) {\r\n                    this.props.onRowExpand({originalEvent: event, data: event.data});\r\n                }\r\n            }\r\n        }\r\n\r\n        if (this.props.onRowToggle) {\r\n            this.props.onRowToggle({\r\n                data: expandedRows\r\n            });\r\n        }\r\n    }\r\n\r\n    findExpandedRowIndex(row) {\r\n        let index = -1;\r\n        if (this.props.expandedRows) {\r\n            for (let i = 0; i < this.props.expandedRows.length; i++) {\r\n                if (ObjectUtils.equals(this.props.expandedRows[i], row)) {\r\n                    index = i;\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        return index;\r\n    }\r\n\r\n    isRowExpanded(row) {\r\n        let dataKey = this.props.dataKey;\r\n\r\n        if (dataKey) {\r\n            let dataKeyValue = String(ObjectUtils.resolveFieldData(row, dataKey));\r\n\r\n            return this.props.expandedRows && this.props.expandedRows[dataKeyValue] != null;\r\n        }\r\n        else {\r\n            return this.findExpandedRowIndex(row) !== -1\r\n        }\r\n    }\r\n\r\n    isSelectionEnabled() {\r\n        if(this.props.selectionMode || this.props.frozenSelectionMode != null) {\r\n            return true;\r\n        }\r\n        else {\r\n            if(Array.isArray(this.props.children)) {\r\n                for(let i = 0; i < this.props.children.length; i++) {\r\n                    if(this.props.children[i].props.selectionMode) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                return this.props.children && this.props.children.selectionMode != null;\r\n            }\r\n        }\r\n\r\n        return false;\r\n    }\r\n\r\n    onRowDragStart(event, index) {\r\n        this.rowDragging = true;\r\n        this.draggedRowIndex = index;\r\n        event.dataTransfer.setData('text', 'b');    // For firefox\r\n    }\r\n\r\n    onRowDragEnd(event, index) {\r\n        this.rowDragging = false;\r\n        this.draggedRowIndex = null;\r\n        this.droppedRowIndex = null;\r\n    }\r\n\r\n    onRowDragOver(event, index) {\r\n        if (this.rowDragging && this.draggedRowIndex !== index) {\r\n            let rowElement = event.rowElement;\r\n            let rowY = DomHandler.getOffset(rowElement).top + DomHandler.getWindowScrollTop();\r\n            let pageY = event.originalEvent.pageY;\r\n            let rowMidY = rowY + DomHandler.getOuterHeight(rowElement) / 2;\r\n            let prevRowElement = rowElement.previousElementSibling;\r\n\r\n            if (pageY < rowMidY) {\r\n                DomHandler.removeClass(rowElement, 'p-datatable-dragpoint-bottom');\r\n\r\n                this.droppedRowIndex = index;\r\n                if (prevRowElement)\r\n                    DomHandler.addClass(prevRowElement, 'p-datatable-dragpoint-bottom');\r\n                else\r\n                    DomHandler.addClass(rowElement, 'p-datatable-dragpoint-top');\r\n            }\r\n            else {\r\n                if (prevRowElement)\r\n                    DomHandler.removeClass(prevRowElement, 'p-datatable-dragpoint-bottom');\r\n                else\r\n                    DomHandler.addClass(rowElement, 'p-datatable-dragpoint-top');\r\n\r\n                this.droppedRowIndex = index + 1;\r\n                DomHandler.addClass(rowElement, 'p-datatable-dragpoint-bottom');\r\n            }\r\n        }\r\n    }\r\n\r\n    onRowDragLeave(event) {\r\n        let rowElement = event.rowElement;\r\n        let prevRowElement = rowElement.previousElementSibling;\r\n        if (prevRowElement) {\r\n            DomHandler.removeClass(prevRowElement, 'p-datatable-dragpoint-bottom');\r\n        }\r\n\r\n        DomHandler.removeClass(rowElement, 'p-datatable-dragpoint-bottom');\r\n        DomHandler.removeClass(rowElement, 'p-datatable-dragpoint-top');\r\n    }\r\n\r\n    onRowDrop(event) {\r\n        if (this.droppedRowIndex != null) {\r\n            let dropIndex = (this.draggedRowIndex > this.droppedRowIndex) ? this.droppedRowIndex : (this.droppedRowIndex === 0) ? 0 : this.droppedRowIndex - 1;\r\n            let val = [...this.props.value];\r\n            ObjectUtils.reorderArray(val, this.draggedRowIndex, dropIndex);\r\n\r\n            if(this.props.onRowReorder) {\r\n                this.props.onRowReorder({\r\n                    originalEvent: event,\r\n                    value: val,\r\n                    dragIndex: this.draggedRowIndex,\r\n                    dropIndex: this.droppedRowIndex\r\n                })\r\n            }\r\n        }\r\n\r\n        //cleanup\r\n        this.onRowDragLeave(event);\r\n        this.onRowDragEnd(event);\r\n    }\r\n\r\n    renderRowGroupHeader(rowData, index) {\r\n        let content = null;\r\n\r\n        if (this.props.rowGroupMode === 'subheader' && this.props.expandableRowGroups) {\r\n            content = <RowTogglerButton onClick={this.onRowToggle} rowData={rowData} expanded={this.isRowExpanded(rowData)}/>\r\n        }\r\n\r\n        return (\r\n            <tr role=\"row\" key={index + '_rowgroupheader'} className=\"p-rowgroup-header\">\r\n                <td role=\"cell\" colSpan={React.Children.count(this.props.children)}>\r\n                    { content }\r\n                    <span className=\"p-rowgroup-header-name\">\r\n                        {this.props.rowGroupHeaderTemplate(rowData, index)}\r\n                    </span>\r\n                </td>\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    renderRowGroupFooter(rowData, index) {\r\n        return (\r\n            <tr role=\"row\" key={index + '_rowgroupfooter'} className=\"p-rowgroup-footer\">\r\n                {this.props.rowGroupFooterTemplate(rowData, index)}\r\n            </tr>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        let rows;\r\n\r\n        if (this.props.children) {\r\n            let rpp = this.props.rows||0;\r\n            let first = this.props.first||0;\r\n            let selectionEnabled = this.isSelectionEnabled();\r\n            let rowGroupMode = this.props.rowGroupMode;\r\n            let hasSubheaderGrouping = (rowGroupMode && rowGroupMode === 'subheader');\r\n            let rowSpanGrouping = (rowGroupMode && rowGroupMode === 'rowspan');\r\n            let rowGroupHeaderExpanded = false;\r\n\r\n            if(this.props.value && this.props.value.length) {\r\n                rows = [];\r\n                let startIndex = this.props.lazy ? 0 : (this.props.value.length > first ? first : 0);\r\n                let endIndex = this.props.virtualScroll ? (startIndex + rpp * 2) : (startIndex + rpp||this.props.value.length);\r\n\r\n                for(let i = startIndex; i < endIndex; i++) {\r\n                    if(i >= this.props.value.length) {\r\n                        break;\r\n                    }\r\n\r\n                    let rowData = this.props.value[i];\r\n                    let expanded = this.isRowExpanded(rowData);\r\n                    let selected = selectionEnabled ? this.isSelected(this.props.value[i]) : false;\r\n                    let contextMenuSelected = this.isContextMenuSelected(rowData);\r\n                    let groupRowSpan;\r\n\r\n                    //header row group\r\n                    if(hasSubheaderGrouping) {\r\n                        let currentRowFieldData = ObjectUtils.resolveFieldData(rowData, this.props.groupField);\r\n                        let previousRowFieldData = ObjectUtils.resolveFieldData(this.props.value[i - 1], this.props.groupField);\r\n\r\n                        if(i === 0 || (currentRowFieldData !== previousRowFieldData)) {\r\n                            rows.push(this.renderRowGroupHeader(rowData, i));\r\n                            rowGroupHeaderExpanded = expanded;\r\n                        }\r\n                    }\r\n\r\n                    if(rowSpanGrouping) {\r\n                        let rowSpanIndex = i;\r\n                        let currentRowFieldData = ObjectUtils.resolveFieldData(rowData, this.props.sortField);\r\n                        let shouldCountRowSpan = (i === startIndex) || ObjectUtils.resolveFieldData(this.props.value[i - 1], this.props.sortField) !== currentRowFieldData ;\r\n\r\n                        if(shouldCountRowSpan) {\r\n                            let nextRowFieldData = currentRowFieldData;\r\n                            groupRowSpan = 0;\r\n\r\n                            while(currentRowFieldData === nextRowFieldData) {\r\n                                groupRowSpan++;\r\n                                let nextRowData = this.props.value[++rowSpanIndex];\r\n                                if(nextRowData) {\r\n                                    nextRowFieldData = ObjectUtils.resolveFieldData(nextRowData, this.props.sortField);\r\n                                }\r\n                                else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    let isRowGroupExpanded = this.props.expandableRowGroups && hasSubheaderGrouping && rowGroupHeaderExpanded;\r\n                    if (!this.props.expandableRowGroups || isRowGroupExpanded) {\r\n                        //row content\r\n                        let bodyRow = <BodyRow tableId={this.props.tableId} key={i} value={this.props.value} rowData={rowData} rowIndex={i} onClick={this.onRowClick} onDoubleClick={this.props.onRowDoubleClick} onRightClick={this.onRowRightClick} onTouchEnd={this.onRowTouchEnd}\r\n                                            onRowToggle={this.onRowToggle} expanded={expanded} selectionMode={this.props.selectionMode}\r\n                                            onRadioClick={this.onRadioClick} onCheckboxClick={this.onCheckboxClick} selected={selected} contextMenuSelected={contextMenuSelected} rowClassName={this.props.rowClassName}\r\n                                            sortField={this.props.sortField} rowGroupMode={this.props.rowGroupMode} groupRowSpan={groupRowSpan}\r\n                                            onDragStart={(e) => this.onRowDragStart(e, i)} onDragEnd={this.onRowDragEnd} onDragOver={(e) => this.onRowDragOver(e, i)} onDragLeave={this.onRowDragLeave}\r\n                                            onDrop={this.onRowDrop} virtualScroll={this.props.virtualScroll} virtualRowHeight={this.props.virtualRowHeight}\r\n                                            editMode={this.props.editMode} rowEditorValidator={this.props.rowEditorValidator} onRowEditInit={this.props.onRowEditInit} onRowEditSave={this.props.onRowEditSave} onRowEditCancel={this.props.onRowEditCancel}\r\n                                            showRowReorderElement={this.props.showRowReorderElement} showSelectionElement={this.props.showSelectionElement}>\r\n                                            {this.props.children}\r\n                                    </BodyRow>\r\n\r\n                        rows.push(bodyRow);\r\n                    }\r\n\r\n                    //row expansion\r\n                    if (expanded && !(hasSubheaderGrouping && this.props.expandableRowGroups)) {\r\n                        let expandedRowContent = this.props.rowExpansionTemplate(rowData);\r\n                        let id = `${this.props.tableId ? this.props.tableId + '_' : ''}content_${i}_expanded`;\r\n                        let expandedRow = <tr key={id} id={id} role=\"row\"><td role=\"cell\" colSpan={this.props.children.length}>{expandedRowContent}</td></tr>\r\n                        rows.push(expandedRow);\r\n                    }\r\n\r\n                    //footer row group\r\n                    if (hasSubheaderGrouping && (!this.props.expandableRowGroups || isRowGroupExpanded)) {\r\n                        let currentRowFieldData = ObjectUtils.resolveFieldData(rowData, this.props.groupField);\r\n                        let nextRowFieldData = ObjectUtils.resolveFieldData(this.props.value[i + 1], this.props.groupField);\r\n\r\n                        if((i === this.props.value.length - 1) || (currentRowFieldData !== nextRowFieldData)) {\r\n                            rows.push(this.renderRowGroupFooter(rowData, i));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else {\r\n                let emptyMessage = this.props.emptyMessage;\r\n\r\n                rows = !this.props.loading && emptyMessage !== null ?\r\n                    <tr role=\"row\" className=\"p-datatable-emptymessage\">\r\n                        <td role=\"cell\" colSpan={this.props.children.length}>\r\n                            {\r\n                                (typeof emptyMessage === 'function') ? emptyMessage(this.props.frozen) : emptyMessage\r\n                            }\r\n                            </td>\r\n                    </tr> : null;\r\n            }\r\n        }\r\n\r\n        return (\r\n            <tbody className=\"p-datatable-tbody\">\r\n                {rows}\r\n            </tbody>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}