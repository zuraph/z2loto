{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{classNames}from'../utils/ClassNames';import DomHandler from'../utils/DomHandler';import{Ripple}from'../ripple/Ripple';import ObjectUtils from'../utils/ObjectUtils';export var TieredMenuSub=/*#__PURE__*/function(_Component){_inherits(TieredMenuSub,_Component);var _super=_createSuper(TieredMenuSub);function TieredMenuSub(props){var _this;_classCallCheck(this,TieredMenuSub);_this=_super.call(this,props);_this.state={activeItem:null};_this.onLeafClick=_this.onLeafClick.bind(_assertThisInitialized(_this));_this.onChildItemKeyDown=_this.onChildItemKeyDown.bind(_assertThisInitialized(_this));return _this;}_createClass(TieredMenuSub,[{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.parentActive&&!this.props.parentActive){this.setState({activeItem:null});}}},{key:\"componentDidMount\",value:function componentDidMount(){var _this2=this;if(!this.documentClickListener){this.documentClickListener=function(event){if(_this2.element&&!_this2.element.contains(event.target)){_this2.setState({activeItem:null});}};document.addEventListener('click',this.documentClickListener);}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.documentClickListener){document.removeEventListener('click',this.documentClickListener);this.documentClickListener=null;}}},{key:\"onItemMouseEnter\",value:function onItemMouseEnter(event,item){if(item.disabled){event.preventDefault();return;}if(this.props.root){if(this.state.activeItem||this.props.popup){this.setState({activeItem:item});}}else{this.setState({activeItem:item});}}},{key:\"onItemClick\",value:function onItemClick(event,item){if(item.disabled){event.preventDefault();return;}if(!item.url){event.preventDefault();}if(item.command){item.command({originalEvent:event,item:item});}if(this.props.root){if(item.items){if(this.state.activeItem&&item===this.state.activeItem){this.setState({activeItem:null});}else{this.setState({activeItem:item});}}}if(!item.items){this.onLeafClick();}}},{key:\"onItemKeyDown\",value:function onItemKeyDown(event,item){var listItem=event.currentTarget.parentElement;switch(event.which){//down\ncase 40:var nextItem=this.findNextItem(listItem);if(nextItem){nextItem.children[0].focus();}event.preventDefault();break;//up\ncase 38:var prevItem=this.findPrevItem(listItem);if(prevItem){prevItem.children[0].focus();}event.preventDefault();break;//right\ncase 39:if(item.items){this.setState({activeItem:item});setTimeout(function(){listItem.children[1].children[0].children[0].focus();},50);}event.preventDefault();break;default:break;}if(this.props.onKeyDown){this.props.onKeyDown(event,listItem);}}},{key:\"onChildItemKeyDown\",value:function onChildItemKeyDown(event,childListItem){//left\nif(event.which===37){this.setState({activeItem:null});childListItem.parentElement.previousElementSibling.focus();}}},{key:\"findNextItem\",value:function findNextItem(item){var nextItem=item.nextElementSibling;if(nextItem)return DomHandler.hasClass(nextItem,'p-disabled')||!DomHandler.hasClass(nextItem,'p-menuitem')?this.findNextItem(nextItem):nextItem;else return null;}},{key:\"findPrevItem\",value:function findPrevItem(item){var prevItem=item.previousElementSibling;if(prevItem)return DomHandler.hasClass(prevItem,'p-disabled')||!DomHandler.hasClass(prevItem,'p-menuitem')?this.findPrevItem(prevItem):prevItem;else return null;}},{key:\"onLeafClick\",value:function onLeafClick(){this.setState({activeItem:null});if(this.props.onLeafClick){this.props.onLeafClick();}}},{key:\"renderSeparator\",value:function renderSeparator(index){return/*#__PURE__*/React.createElement(\"li\",{key:'separator_'+index,className:\"p-menu-separator\",role:\"separator\"});}},{key:\"renderSubmenu\",value:function renderSubmenu(item){if(item.items){return/*#__PURE__*/React.createElement(TieredMenuSub,{model:item.items,onLeafClick:this.onLeafClick,popup:this.props.popup,onKeyDown:this.onChildItemKeyDown,parentActive:item===this.state.activeItem});}return null;}},{key:\"renderMenuitem\",value:function renderMenuitem(item,index){var _this3=this;var active=this.state.activeItem===item;var className=classNames('p-menuitem',{'p-menuitem-active':active},item.className);var linkClassName=classNames('p-menuitem-link',{'p-disabled':item.disabled});var iconClassName=classNames('p-menuitem-icon',item.icon);var submenuIconClassName='p-submenu-icon pi pi-angle-right';var icon=item.icon&&/*#__PURE__*/React.createElement(\"span\",{className:iconClassName});var label=item.label&&/*#__PURE__*/React.createElement(\"span\",{className:\"p-menuitem-text\"},item.label);var submenuIcon=item.items&&/*#__PURE__*/React.createElement(\"span\",{className:submenuIconClassName});var submenu=this.renderSubmenu(item);var content=/*#__PURE__*/React.createElement(\"a\",{href:item.url||'#',className:linkClassName,target:item.target,role:\"menuitem\",\"aria-haspopup\":item.items!=null,onClick:function onClick(event){return _this3.onItemClick(event,item);},onKeyDown:function onKeyDown(event){return _this3.onItemKeyDown(event,item);}},icon,label,submenuIcon,/*#__PURE__*/React.createElement(Ripple,null));if(item.template){var defaultContentOptions={onClick:function onClick(event){return _this3.onItemClick(event,item);},onKeyDown:function onKeyDown(event){return _this3.onItemKeyDown(event,item);},className:linkClassName,labelClassName:'p-menuitem-text',iconClassName:iconClassName,submenuIconClassName:submenuIconClassName,element:content,props:this.props,active:active};content=ObjectUtils.getJSXElement(item.template,item,defaultContentOptions);}return/*#__PURE__*/React.createElement(\"li\",{key:item.label+'_'+index,className:className,style:item.style,onMouseEnter:function onMouseEnter(event){return _this3.onItemMouseEnter(event,item);},role:\"none\"},content,submenu);}},{key:\"renderItem\",value:function renderItem(item,index){if(item.separator)return this.renderSeparator(index);else return this.renderMenuitem(item,index);}},{key:\"renderMenu\",value:function renderMenu(){var _this4=this;if(this.props.model){return this.props.model.map(function(item,index){return _this4.renderItem(item,index);});}return null;}},{key:\"render\",value:function render(){var _this5=this;var className=classNames({'p-submenu-list':!this.props.root});var submenu=this.renderMenu();return/*#__PURE__*/React.createElement(\"ul\",{ref:function ref(el){return _this5.element=el;},className:className,role:this.props.root?'menubar':'menu',\"aria-orientation\":\"horizontal\"},submenu);}}]);return TieredMenuSub;}(Component);TieredMenuSub.defaultProps={model:null,root:false,className:null,popup:false,onLeafClick:null,onKeyDown:null,parentActive:false};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/components/tieredmenu/TieredMenuSub.js"],"names":["React","Component","classNames","DomHandler","Ripple","ObjectUtils","TieredMenuSub","props","state","activeItem","onLeafClick","bind","onChildItemKeyDown","prevProps","parentActive","setState","documentClickListener","event","element","contains","target","document","addEventListener","removeEventListener","item","disabled","preventDefault","root","popup","url","command","originalEvent","items","listItem","currentTarget","parentElement","which","nextItem","findNextItem","children","focus","prevItem","findPrevItem","setTimeout","onKeyDown","childListItem","previousElementSibling","nextElementSibling","hasClass","index","active","className","linkClassName","iconClassName","icon","submenuIconClassName","label","submenuIcon","submenu","renderSubmenu","content","onItemClick","onItemKeyDown","template","defaultContentOptions","onClick","labelClassName","getJSXElement","style","onItemMouseEnter","separator","renderSeparator","renderMenuitem","model","map","renderItem","renderMenu","el","defaultProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport { Ripple } from '../ripple/Ripple';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\n\r\nexport class TieredMenuSub extends Component {\r\n\r\n    static defaultProps = {\r\n        model: null,\r\n        root: false,\r\n        className: null,\r\n        popup: false,\r\n        onLeafClick: null,\r\n        onKeyDown: null,\r\n        parentActive: false\r\n    };\r\n\r\n    static propTypes = {\r\n        model: PropTypes.any,\r\n        root: PropTypes.bool,\r\n        className: PropTypes.string,\r\n        popup: PropTypes.bool,\r\n        onLeafClick: PropTypes.func,\r\n        onKeyDown: PropTypes.func,\r\n        parentActive: PropTypes.bool\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            activeItem: null\r\n        };\r\n\r\n        this.onLeafClick = this.onLeafClick.bind(this);\r\n        this.onChildItemKeyDown = this.onChildItemKeyDown.bind(this);\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.parentActive && !this.props.parentActive) {\r\n            this.setState({\r\n                activeItem: null\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (!this.documentClickListener) {\r\n            this.documentClickListener = (event) => {\r\n                if (this.element && !this.element.contains(event.target)) {\r\n                    this.setState({activeItem: null});\r\n                }\r\n            };\r\n\r\n            document.addEventListener('click', this.documentClickListener);\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.documentClickListener) {\r\n            document.removeEventListener('click', this.documentClickListener);\r\n            this.documentClickListener = null;\r\n        }\r\n    }\r\n\r\n    onItemMouseEnter(event, item) {\r\n        if (item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (this.props.root) {\r\n            if (this.state.activeItem || this.props.popup) {\r\n                this.setState({\r\n                    activeItem: item\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            this.setState({\r\n                activeItem: item\r\n            });\r\n        }\r\n    }\r\n\r\n    onItemClick(event, item) {\r\n        if (item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (!item.url) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        if (item.command) {\r\n            item.command({\r\n                originalEvent: event,\r\n                item: item\r\n            });\r\n        }\r\n\r\n        if (this.props.root) {\r\n            if (item.items) {\r\n                if (this.state.activeItem && item === this.state.activeItem) {\r\n                    this.setState({\r\n                        activeItem: null\r\n                    });\r\n                }\r\n                else {\r\n                    this.setState({\r\n                        activeItem: item\r\n                    });\r\n                }\r\n            }\r\n        }\r\n\r\n        if (!item.items) {\r\n            this.onLeafClick();\r\n        }\r\n    }\r\n\r\n    onItemKeyDown(event, item) {\r\n        let listItem = event.currentTarget.parentElement;\r\n\r\n        switch(event.which) {\r\n            //down\r\n            case 40:\r\n                let nextItem = this.findNextItem(listItem);\r\n                if (nextItem) {\r\n                    nextItem.children[0].focus();\r\n                }\r\n\r\n                event.preventDefault();\r\n            break;\r\n\r\n            //up\r\n            case 38:\r\n                let prevItem = this.findPrevItem(listItem);\r\n                if (prevItem) {\r\n                    prevItem.children[0].focus();\r\n                }\r\n\r\n                event.preventDefault();\r\n            break;\r\n\r\n            //right\r\n            case 39:\r\n                if (item.items) {\r\n                    this.setState({\r\n                        activeItem: item\r\n                    });\r\n\r\n                    setTimeout(() => {\r\n                        listItem.children[1].children[0].children[0].focus();\r\n                    }, 50);\r\n                }\r\n\r\n                event.preventDefault();\r\n            break;\r\n\r\n            default:\r\n            break;\r\n        }\r\n\r\n        if (this.props.onKeyDown) {\r\n            this.props.onKeyDown(event, listItem);\r\n        }\r\n    }\r\n\r\n    onChildItemKeyDown(event, childListItem) {\r\n        //left\r\n        if (event.which === 37) {\r\n            this.setState({activeItem: null});\r\n            childListItem.parentElement.previousElementSibling.focus();\r\n        }\r\n    }\r\n\r\n    findNextItem(item) {\r\n        let nextItem = item.nextElementSibling;\r\n\r\n        if (nextItem)\r\n            return DomHandler.hasClass(nextItem, 'p-disabled') || !DomHandler.hasClass(nextItem, 'p-menuitem') ? this.findNextItem(nextItem) : nextItem;\r\n        else\r\n            return null;\r\n    }\r\n\r\n    findPrevItem(item) {\r\n        let prevItem = item.previousElementSibling;\r\n\r\n        if (prevItem)\r\n            return DomHandler.hasClass(prevItem, 'p-disabled') || !DomHandler.hasClass(prevItem, 'p-menuitem') ? this.findPrevItem(prevItem) : prevItem;\r\n        else\r\n            return null;\r\n    }\r\n\r\n    onLeafClick() {\r\n        this.setState({\r\n            activeItem: null\r\n        });\r\n\r\n        if (this.props.onLeafClick) {\r\n            this.props.onLeafClick();\r\n        }\r\n    }\r\n\r\n    renderSeparator(index) {\r\n        return (\r\n            <li key={'separator_' + index} className=\"p-menu-separator\" role=\"separator\"></li>\r\n        );\r\n    }\r\n\r\n    renderSubmenu(item) {\r\n        if(item.items) {\r\n            return (\r\n                <TieredMenuSub model={item.items} onLeafClick={this.onLeafClick} popup={this.props.popup} onKeyDown={this.onChildItemKeyDown} parentActive={item === this.state.activeItem} />\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    renderMenuitem(item, index) {\r\n        const active = this.state.activeItem === item;\r\n        const className = classNames('p-menuitem', {'p-menuitem-active': active}, item.className);\r\n        const linkClassName = classNames('p-menuitem-link', {'p-disabled': item.disabled});\r\n        const iconClassName = classNames('p-menuitem-icon', item.icon);\r\n        const submenuIconClassName = 'p-submenu-icon pi pi-angle-right';\r\n        const icon = item.icon && <span className={iconClassName}></span>;\r\n        const label = item.label && <span className=\"p-menuitem-text\">{item.label}</span>;\r\n        const submenuIcon = item.items && <span className={submenuIconClassName}></span>;\r\n        const submenu = this.renderSubmenu(item);\r\n        let content = (\r\n            <a href={item.url || '#'} className={linkClassName} target={item.target} role=\"menuitem\" aria-haspopup={item.items != null}\r\n                onClick={(event) => this.onItemClick(event, item)} onKeyDown={(event) => this.onItemKeyDown(event, item)}>\r\n                {icon}\r\n                {label}\r\n                {submenuIcon}\r\n                <Ripple />\r\n            </a>\r\n        );\r\n\r\n        if (item.template) {\r\n            const defaultContentOptions = {\r\n                onClick: (event) => this.onItemClick(event, item),\r\n                onKeyDown: (event) => this.onItemKeyDown(event, item),\r\n                className: linkClassName,\r\n                labelClassName: 'p-menuitem-text',\r\n                iconClassName,\r\n                submenuIconClassName,\r\n                element: content,\r\n                props: this.props,\r\n                active\r\n            };\r\n\r\n            content = ObjectUtils.getJSXElement(item.template, item, defaultContentOptions);\r\n        }\r\n\r\n        return (\r\n            <li key={item.label + '_' + index} className={className} style={item.style} onMouseEnter={(event) => this.onItemMouseEnter(event, item)} role=\"none\">\r\n                {content}\r\n                {submenu}\r\n            </li>\r\n        );\r\n    }\r\n\r\n    renderItem(item, index) {\r\n        if (item.separator)\r\n            return this.renderSeparator(index);\r\n        else\r\n            return this.renderMenuitem(item, index);\r\n    }\r\n\r\n    renderMenu() {\r\n        if (this.props.model) {\r\n            return (\r\n                this.props.model.map((item, index) => {\r\n                    return this.renderItem(item, index);\r\n                })\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        const className = classNames({'p-submenu-list': !this.props.root});\r\n        const submenu = this.renderMenu();\r\n\r\n        return (\r\n            <ul ref={el => this.element = el} className={className} role={this.props.root ? 'menubar' : 'menu'} aria-orientation=\"horizontal\">\r\n                {submenu}\r\n            </ul>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}