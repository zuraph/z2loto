{"ast":null,"code":"import _createForOfIteratorHelper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _toConsumableArray from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{classNames}from'../utils/ClassNames';import ObjectUtils from'../utils/ObjectUtils';import FilterUtils from'../utils/FilterUtils';import{ListBoxItem}from'./ListBoxItem';import{ListBoxHeader}from'./ListBoxHeader';import{tip}from'../tooltip/Tooltip';export var ListBox=/*#__PURE__*/function(_Component){_inherits(ListBox,_Component);var _super=_createSuper(ListBox);function ListBox(props){var _this;_classCallCheck(this,ListBox);_this=_super.call(this,props);_this.state={};if(!_this.props.onFilterValueChange){_this.state.filterValue='';}_this.onFilter=_this.onFilter.bind(_assertThisInitialized(_this));_this.onOptionClick=_this.onOptionClick.bind(_assertThisInitialized(_this));return _this;}_createClass(ListBox,[{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.tooltip){this.renderTooltip();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.tooltip!==this.props.tooltip||prevProps.tooltipOptions!==this.props.tooltipOptions){if(this.tooltip)this.tooltip.update(_objectSpread({content:this.props.tooltip},this.props.tooltipOptions||{}));else this.renderTooltip();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.tooltip){this.tooltip.destroy();this.tooltip=null;}}},{key:\"renderTooltip\",value:function renderTooltip(){this.tooltip=tip({target:this.element,content:this.props.tooltip,options:this.props.tooltipOptions});}},{key:\"getFilterValue\",value:function getFilterValue(){return(this.props.onFilterValueChange?this.props.filterValue:this.state.filterValue)||'';}},{key:\"onOptionClick\",value:function onOptionClick(event){if(this.props.disabled){return;}if(this.props.multiple)this.onOptionClickMultiple(event.originalEvent,event.option);else this.onOptionClickSingle(event.originalEvent,event.option);this.optionTouched=false;}},{key:\"onOptionTouchEnd\",value:function onOptionTouchEnd(){if(this.props.disabled){return;}this.optionTouched=true;}},{key:\"onOptionClickSingle\",value:function onOptionClickSingle(event,option){var selected=this.isSelected(option);var valueChanged=false;var value=null;var metaSelection=this.optionTouched?false:this.props.metaKeySelection;if(metaSelection){var metaKey=event.metaKey||event.ctrlKey;if(selected){if(metaKey){value=null;valueChanged=true;}}else{value=this.getOptionValue(option);valueChanged=true;}}else{value=selected?null:this.getOptionValue(option);valueChanged=true;}if(valueChanged){this.updateModel(event,value);}}},{key:\"onOptionClickMultiple\",value:function onOptionClickMultiple(event,option){var selected=this.isSelected(option);var valueChanged=false;var value=null;var metaSelection=this.optionTouched?false:this.props.metaKeySelection;if(metaSelection){var metaKey=event.metaKey||event.ctrlKey;if(selected){if(metaKey)value=this.removeOption(option);else value=[this.getOptionValue(option)];valueChanged=true;}else{value=metaKey?this.props.value||[]:[];value=[].concat(_toConsumableArray(value),[this.getOptionValue(option)]);valueChanged=true;}}else{if(selected)value=this.removeOption(option);else value=[].concat(_toConsumableArray(this.props.value||[]),[this.getOptionValue(option)]);valueChanged=true;}if(valueChanged){this.props.onChange({originalEvent:event,value:value,stopPropagation:function stopPropagation(){},preventDefault:function preventDefault(){},target:{name:this.props.name,id:this.props.id,value:value}});}}},{key:\"onFilter\",value:function onFilter(event){var originalEvent=event.originalEvent,value=event.value;if(this.props.onFilterValueChange){this.props.onFilterValueChange({originalEvent:originalEvent,value:value});}else{this.setState({filterValue:value});}}},{key:\"updateModel\",value:function updateModel(event,value){if(this.props.onChange){this.props.onChange({originalEvent:event,value:value,stopPropagation:function stopPropagation(){},preventDefault:function preventDefault(){},target:{name:this.props.name,id:this.props.id,value:value}});}}},{key:\"removeOption\",value:function removeOption(option){var _this2=this;return this.props.value.filter(function(val){return!ObjectUtils.equals(val,_this2.getOptionValue(option),_this2.props.dataKey);});}},{key:\"isSelected\",value:function isSelected(option){var selected=false;var optionValue=this.getOptionValue(option);if(this.props.multiple){if(this.props.value){var _iterator=_createForOfIteratorHelper(this.props.value),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var val=_step.value;if(ObjectUtils.equals(val,optionValue,this.props.dataKey)){selected=true;break;}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}}else{selected=ObjectUtils.equals(this.props.value,optionValue,this.props.dataKey);}return selected;}},{key:\"filter\",value:function filter(option){var filterValue=this.getFilterValue().trim().toLocaleLowerCase(this.props.filterLocale);var optionLabel=this.getOptionLabel(option).toLocaleLowerCase(this.props.filterLocale);return optionLabel.indexOf(filterValue)>-1;}},{key:\"hasFilter\",value:function hasFilter(){var filter=this.getFilterValue();return filter&&filter.trim().length>0;}},{key:\"getOptionLabel\",value:function getOptionLabel(option){return this.props.optionLabel?ObjectUtils.resolveFieldData(option,this.props.optionLabel):option['label']!==undefined?option['label']:option;}},{key:\"getOptionValue\",value:function getOptionValue(option){return this.props.optionValue?ObjectUtils.resolveFieldData(option,this.props.optionValue):option['value']!==undefined?option['value']:option;}},{key:\"render\",value:function render(){var _this3=this;var className=classNames('p-listbox p-component',{'p-disabled':this.props.disabled},this.props.className);var listClassName=classNames('p-listbox-list-wrapper',this.props.listClassName);var items=this.props.options;var header;if(this.props.options){if(this.hasFilter()){var filterValue=this.getFilterValue().trim().toLocaleLowerCase(this.props.filterLocale);var searchFields=this.props.filterBy?this.props.filterBy.split(','):[this.props.optionLabel||'label'];items=FilterUtils.filter(items,searchFields,filterValue,this.props.filterMatchMode,this.props.filterLocale);}items=items.map(function(option,index){var optionLabel=_this3.getOptionLabel(option);var optionKey=\"pr_id__\".concat(optionLabel,\"-\").concat(index);return/*#__PURE__*/React.createElement(ListBoxItem,{key:optionKey,label:optionLabel,option:option,template:_this3.props.itemTemplate,selected:_this3.isSelected(option),onClick:_this3.onOptionClick,onTouchEnd:function onTouchEnd(e){return _this3.onOptionTouchEnd(e,option,index);},tabIndex:_this3.props.tabIndex});});}if(this.props.filter){header=/*#__PURE__*/React.createElement(ListBoxHeader,{filter:this.getFilterValue(),onFilter:this.onFilter,disabled:this.props.disabled,filterPlaceholder:this.props.filterPlaceholder});}return/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this3.element=el;},id:this.props.id,className:className,style:this.props.style},header,/*#__PURE__*/React.createElement(\"div\",{className:listClassName,style:this.props.listStyle},/*#__PURE__*/React.createElement(\"ul\",{className:\"p-listbox-list\",role:\"listbox\",\"aria-multiselectable\":this.props.multiple},items)));}}]);return ListBox;}(Component);ListBox.defaultProps={id:null,value:null,options:null,optionLabel:null,optionValue:null,itemTemplate:null,style:null,listStyle:null,listClassName:null,className:null,disabled:null,dataKey:null,multiple:false,metaKeySelection:false,filter:false,filterBy:null,filterValue:null,filterMatchMode:'contains',filterPlaceholder:null,filterLocale:undefined,tabIndex:0,tooltip:null,tooltipOptions:null,ariaLabelledBy:null,onChange:null,onFilterValueChange:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/slotmaster-dashboard/src/components/listbox/ListBox.js"],"names":["React","Component","classNames","ObjectUtils","FilterUtils","ListBoxItem","ListBoxHeader","tip","ListBox","props","state","onFilterValueChange","filterValue","onFilter","bind","onOptionClick","tooltip","renderTooltip","prevProps","tooltipOptions","update","content","destroy","target","element","options","event","disabled","multiple","onOptionClickMultiple","originalEvent","option","onOptionClickSingle","optionTouched","selected","isSelected","valueChanged","value","metaSelection","metaKeySelection","metaKey","ctrlKey","getOptionValue","updateModel","removeOption","onChange","stopPropagation","preventDefault","name","id","setState","filter","val","equals","dataKey","optionValue","getFilterValue","trim","toLocaleLowerCase","filterLocale","optionLabel","getOptionLabel","indexOf","length","resolveFieldData","undefined","className","listClassName","items","header","hasFilter","searchFields","filterBy","split","filterMatchMode","map","index","optionKey","itemTemplate","e","onOptionTouchEnd","tabIndex","filterPlaceholder","el","style","listStyle","defaultProps","ariaLabelledBy"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\nimport FilterUtils from '../utils/FilterUtils';\r\nimport {ListBoxItem} from './ListBoxItem';\r\nimport {ListBoxHeader} from './ListBoxHeader';\r\nimport { tip } from '../tooltip/Tooltip';\r\n\r\nexport class ListBox extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        value: null,\r\n        options: null,\r\n        optionLabel: null,\r\n        optionValue: null,\r\n        itemTemplate: null,\r\n        style: null,\r\n        listStyle: null,\r\n        listClassName: null,\r\n        className: null,\r\n        disabled: null,\r\n        dataKey: null,\r\n        multiple: false,\r\n        metaKeySelection: false,\r\n        filter: false,\r\n        filterBy: null,\r\n        filterValue: null,\r\n        filterMatchMode: 'contains',\r\n        filterPlaceholder: null,\r\n        filterLocale: undefined,\r\n        tabIndex: 0,\r\n        tooltip: null,\r\n        tooltipOptions: null,\r\n        ariaLabelledBy: null,\r\n        onChange: null,\r\n        onFilterValueChange: null\r\n    }\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        value: PropTypes.any,\r\n        options: PropTypes.array,\r\n        optionLabel: PropTypes.string,\r\n        optionValue: PropTypes.string,\r\n        itemTemplate: PropTypes.any,\r\n        style: PropTypes.object,\r\n        listStyle: PropTypes.object,\r\n        listClassName: PropTypes.string,\r\n        className: PropTypes.string,\r\n        dataKey: PropTypes.string,\r\n        multiple: PropTypes.bool,\r\n        metaKeySelection: PropTypes.bool,\r\n        filter: PropTypes.bool,\r\n        filterBy: PropTypes.string,\r\n        filterValue: PropTypes.string,\r\n        filterMatchMode: PropTypes.string,\r\n        filterPlaceholder: PropTypes.string,\r\n        filterLocale: PropTypes.string,\r\n        tabIndex: PropTypes.number,\r\n        tooltip: PropTypes.string,\r\n        tooltipOptions: PropTypes.object,\r\n        ariaLabelledBy: PropTypes.string,\r\n        onChange: PropTypes.func,\r\n        onFilterValueChange: PropTypes.func\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n\r\n        if (!this.props.onFilterValueChange) {\r\n            this.state.filterValue = '';\r\n        }\r\n\r\n        this.onFilter = this.onFilter.bind(this);\r\n        this.onOptionClick = this.onOptionClick.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.tooltip) {\r\n            this.renderTooltip();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.tooltip !== this.props.tooltip || prevProps.tooltipOptions !== this.props.tooltipOptions) {\r\n            if (this.tooltip)\r\n                this.tooltip.update({ content: this.props.tooltip, ...(this.props.tooltipOptions || {}) });\r\n            else\r\n                this.renderTooltip();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.tooltip) {\r\n            this.tooltip.destroy();\r\n            this.tooltip = null;\r\n        }\r\n    }\r\n\r\n    renderTooltip() {\r\n        this.tooltip = tip({\r\n            target: this.element,\r\n            content: this.props.tooltip,\r\n            options: this.props.tooltipOptions\r\n        });\r\n    }\r\n\r\n    getFilterValue() {\r\n        return (this.props.onFilterValueChange ? this.props.filterValue : this.state.filterValue) || '';\r\n    }\r\n\r\n    onOptionClick(event) {\r\n        if (this.props.disabled) {\r\n            return;\r\n        }\r\n\r\n        if (this.props.multiple)\r\n            this.onOptionClickMultiple(event.originalEvent, event.option);\r\n        else\r\n            this.onOptionClickSingle(event.originalEvent, event.option);\r\n\r\n        this.optionTouched = false;\r\n    }\r\n\r\n    onOptionTouchEnd() {\r\n        if (this.props.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.optionTouched = true;\r\n    }\r\n\r\n    onOptionClickSingle(event, option) {\r\n        let selected = this.isSelected(option);\r\n        let valueChanged = false;\r\n        let value = null;\r\n        let metaSelection = this.optionTouched ? false : this.props.metaKeySelection;\r\n\r\n        if (metaSelection) {\r\n            let metaKey = (event.metaKey || event.ctrlKey);\r\n\r\n            if (selected) {\r\n                if (metaKey) {\r\n                    value = null;\r\n                    valueChanged = true;\r\n                }\r\n            }\r\n            else {\r\n                value = this.getOptionValue(option);\r\n                valueChanged = true;\r\n            }\r\n        }\r\n        else {\r\n            value = selected ? null : this.getOptionValue(option);\r\n            valueChanged = true;\r\n        }\r\n\r\n        if (valueChanged) {\r\n            this.updateModel(event, value);\r\n        }\r\n    }\r\n\r\n    onOptionClickMultiple(event, option) {\r\n        let selected = this.isSelected(option);\r\n        let valueChanged = false;\r\n        let value = null;\r\n        let metaSelection = this.optionTouched ? false : this.props.metaKeySelection;\r\n\r\n        if (metaSelection) {\r\n            let metaKey = (event.metaKey || event.ctrlKey);\r\n\r\n            if (selected) {\r\n                if (metaKey)\r\n                    value = this.removeOption(option);\r\n                else\r\n                    value = [this.getOptionValue(option)];\r\n\r\n                valueChanged = true;\r\n            }\r\n            else {\r\n                value = (metaKey) ? this.props.value || [] : [];\r\n                value = [...value, this.getOptionValue(option)];\r\n                valueChanged = true;\r\n            }\r\n        }\r\n        else {\r\n            if (selected)\r\n                value = this.removeOption(option);\r\n            else\r\n                value = [...this.props.value || [], this.getOptionValue(option)];\r\n\r\n            valueChanged = true;\r\n        }\r\n\r\n        if (valueChanged) {\r\n            this.props.onChange({\r\n                originalEvent: event,\r\n                value: value,\r\n                stopPropagation : () =>{},\r\n                preventDefault : () =>{},\r\n                target: {\r\n                    name: this.props.name,\r\n                    id: this.props.id,\r\n                    value: value\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    onFilter(event) {\r\n        const { originalEvent, value } = event;\r\n        if (this.props.onFilterValueChange) {\r\n            this.props.onFilterValueChange({\r\n                originalEvent,\r\n                value\r\n            });\r\n        }\r\n        else {\r\n            this.setState({ filterValue: value });\r\n        }\r\n    }\r\n\r\n    updateModel(event, value) {\r\n        if (this.props.onChange) {\r\n            this.props.onChange({\r\n                originalEvent: event,\r\n                value: value,\r\n                stopPropagation : () =>{},\r\n                preventDefault : () =>{},\r\n                target: {\r\n                    name: this.props.name,\r\n                    id: this.props.id,\r\n                    value: value\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    removeOption(option) {\r\n        return this.props.value.filter(val => !ObjectUtils.equals(val, this.getOptionValue(option), this.props.dataKey));\r\n    }\r\n\r\n    isSelected(option) {\r\n        let selected = false;\r\n        let optionValue = this.getOptionValue(option);\r\n\r\n        if (this.props.multiple) {\r\n            if (this.props.value) {\r\n                for (let val of this.props.value) {\r\n                    if (ObjectUtils.equals(val, optionValue, this.props.dataKey)) {\r\n                        selected = true;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            selected = ObjectUtils.equals(this.props.value, optionValue, this.props.dataKey);\r\n        }\r\n\r\n        return selected;\r\n    }\r\n\r\n    filter(option) {\r\n        let filterValue = this.getFilterValue().trim().toLocaleLowerCase(this.props.filterLocale);\r\n        let optionLabel = this.getOptionLabel(option).toLocaleLowerCase(this.props.filterLocale);\r\n\r\n        return optionLabel.indexOf(filterValue) > -1;\r\n    }\r\n\r\n    hasFilter() {\r\n        let filter = this.getFilterValue();\r\n        return filter && filter.trim().length > 0;\r\n    }\r\n\r\n    getOptionLabel(option) {\r\n        return this.props.optionLabel ? ObjectUtils.resolveFieldData(option, this.props.optionLabel) : (option['label'] !== undefined ? option['label'] : option);\r\n    }\r\n\r\n    getOptionValue(option) {\r\n        return this.props.optionValue ? ObjectUtils.resolveFieldData(option, this.props.optionValue) : (option['value'] !== undefined ? option['value'] : option);\r\n    }\r\n\r\n    render() {\r\n        let className = classNames('p-listbox p-component', {\r\n            'p-disabled': this.props.disabled\r\n        }, this.props.className);\r\n        let listClassName = classNames('p-listbox-list-wrapper', this.props.listClassName);\r\n        let items = this.props.options;\r\n        let header;\r\n\r\n        if (this.props.options) {\r\n            if (this.hasFilter()) {\r\n                let filterValue = this.getFilterValue().trim().toLocaleLowerCase(this.props.filterLocale)\r\n                let searchFields = this.props.filterBy ? this.props.filterBy.split(',') : [this.props.optionLabel || 'label'];\r\n                items = FilterUtils.filter(items, searchFields, filterValue, this.props.filterMatchMode, this.props.filterLocale);\r\n            }\r\n\r\n            items = items.map((option, index) => {\r\n                let optionLabel = this.getOptionLabel(option);\r\n                let optionKey = `pr_id__${optionLabel}-${index}`;\r\n\r\n                return (\r\n                    <ListBoxItem key={optionKey} label={optionLabel} option={option} template={this.props.itemTemplate} selected={this.isSelected(option)}\r\n                        onClick={this.onOptionClick} onTouchEnd={(e) => this.onOptionTouchEnd(e, option, index)} tabIndex={this.props.tabIndex} />\r\n                );\r\n            });\r\n        }\r\n\r\n        if (this.props.filter) {\r\n            header = <ListBoxHeader filter={this.getFilterValue()} onFilter={this.onFilter} disabled={this.props.disabled} filterPlaceholder={this.props.filterPlaceholder} />\r\n        }\r\n\r\n        return (\r\n            <div ref={(el) => this.element = el} id={this.props.id} className={className} style={this.props.style}>\r\n                {header}\r\n                <div className={listClassName} style={this.props.listStyle}>\r\n                    <ul className=\"p-listbox-list\" role=\"listbox\" aria-multiselectable={this.props.multiple}>\r\n                        {items}\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}