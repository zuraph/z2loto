{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import ReactDOM from'react-dom';import DomHandler from'../utils/DomHandler';import ObjectUtils from'../utils/ObjectUtils';import{classNames}from'../utils/ClassNames';import{CSSTransition}from'react-transition-group';import UniqueComponentId from'../utils/UniqueComponentId';import ConnectedOverlayScrollHandler from'../utils/ConnectedOverlayScrollHandler';import OverlayEventBus from'../overlayeventbus/OverlayEventBus';export var Menu=/*#__PURE__*/function(_Component){_inherits(Menu,_Component);var _super=_createSuper(Menu);function Menu(props){var _this;_classCallCheck(this,Menu);_this=_super.call(this,props);_this.state={visible:!props.popup};_this.onEnter=_this.onEnter.bind(_assertThisInitialized(_this));_this.onEntered=_this.onEntered.bind(_assertThisInitialized(_this));_this.onExit=_this.onExit.bind(_assertThisInitialized(_this));_this.onPanelClick=_this.onPanelClick.bind(_assertThisInitialized(_this));_this.id=_this.props.id||UniqueComponentId();_this.menuRef=React.createRef();return _this;}_createClass(Menu,[{key:\"onPanelClick\",value:function onPanelClick(event){if(this.props.popup){OverlayEventBus.emit('overlay-click',{originalEvent:event,target:this.target});}}},{key:\"onItemClick\",value:function onItemClick(event,item){if(item.disabled){event.preventDefault();return;}if(!item.url){event.preventDefault();}if(item.command){item.command({originalEvent:event,item:item});}if(this.props.popup){this.hide(event);}}},{key:\"onItemKeyDown\",value:function onItemKeyDown(event,item){var listItem=event.currentTarget.parentElement;switch(event.which){//down\ncase 40:var nextItem=this.findNextItem(listItem);if(nextItem){nextItem.children[0].focus();}event.preventDefault();break;//up\ncase 38:var prevItem=this.findPrevItem(listItem);if(prevItem){prevItem.children[0].focus();}event.preventDefault();break;default:break;}}},{key:\"findNextItem\",value:function findNextItem(item){var nextItem=item.nextElementSibling;if(nextItem)return DomHandler.hasClass(nextItem,'p-disabled')||!DomHandler.hasClass(nextItem,'p-menuitem')?this.findNextItem(nextItem):nextItem;else return null;}},{key:\"findPrevItem\",value:function findPrevItem(item){var prevItem=item.previousElementSibling;if(prevItem)return DomHandler.hasClass(prevItem,'p-disabled')||!DomHandler.hasClass(prevItem,'p-menuitem')?this.findPrevItem(prevItem):prevItem;else return null;}},{key:\"toggle\",value:function toggle(event){if(this.props.popup){if(this.state.visible)this.hide(event);else this.show(event);}}},{key:\"show\",value:function show(event){var _this2=this;this.target=event.currentTarget;var currentEvent=event;this.setState({visible:true},function(){if(_this2.props.onShow){_this2.props.onShow(currentEvent);}});}},{key:\"hide\",value:function hide(event){var _this3=this;var currentEvent=event;this.setState({visible:false},function(){if(_this3.props.onHide){_this3.props.onHide(currentEvent);}});}},{key:\"onEnter\",value:function onEnter(){this.menuRef.current.style.zIndex=String(this.props.baseZIndex+DomHandler.generateZIndex());DomHandler.absolutePosition(this.menuRef.current,this.target);}},{key:\"onEntered\",value:function onEntered(){this.bindDocumentListeners();this.bindScrollListener();}},{key:\"onExit\",value:function onExit(){this.target=null;this.unbindDocumentListeners();this.unbindScrollListener();}},{key:\"bindDocumentListeners\",value:function bindDocumentListeners(){var _this4=this;if(!this.documentClickListener){this.documentClickListener=function(event){if(_this4.state.visible&&_this4.isOutsideClicked(event)){_this4.hide(event);}};document.addEventListener('click',this.documentClickListener);}if(!this.documentResizeListener){this.documentResizeListener=function(event){if(_this4.state.visible){_this4.hide(event);}};window.addEventListener('resize',this.documentResizeListener);}}},{key:\"unbindDocumentListeners\",value:function unbindDocumentListeners(){if(this.documentClickListener){document.removeEventListener('click',this.documentClickListener);this.documentClickListener=null;}if(this.documentResizeListener){window.removeEventListener('resize',this.documentResizeListener);this.documentResizeListener=null;}}},{key:\"bindScrollListener\",value:function bindScrollListener(){var _this5=this;if(!this.scrollHandler){this.scrollHandler=new ConnectedOverlayScrollHandler(this.target,function(event){if(_this5.state.visible){_this5.hide(event);}});}this.scrollHandler.bindScrollListener();}},{key:\"unbindScrollListener\",value:function unbindScrollListener(){if(this.scrollHandler){this.scrollHandler.unbindScrollListener();}}},{key:\"isOutsideClicked\",value:function isOutsideClicked(event){return this.menuRef&&this.menuRef.current&&!(this.menuRef.current.isSameNode(event.target)||this.menuRef.current.contains(event.target));}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unbindDocumentListeners();if(this.scrollHandler){this.scrollHandler.destroy();this.scrollHandler=null;}}},{key:\"renderSubmenu\",value:function renderSubmenu(submenu,index){var _this6=this;var className=classNames('p-submenu-header',{'p-disabled':submenu.disabled},submenu.className);var items=submenu.items.map(function(item,index){return _this6.renderMenuitem(item,index);});return/*#__PURE__*/React.createElement(React.Fragment,{key:submenu.label+'_'+index},/*#__PURE__*/React.createElement(\"li\",{className:className,style:submenu.style,role:\"presentation\"},submenu.label),items);}},{key:\"renderSeparator\",value:function renderSeparator(index){return/*#__PURE__*/React.createElement(\"li\",{key:'separator_'+index,className:\"p-menu-separator\",role:\"separator\"});}},{key:\"renderMenuitem\",value:function renderMenuitem(item,index){var _this7=this;var className=classNames('p-menuitem',item.className);var linkClassName=classNames('p-menuitem-link',{'p-disabled':item.disabled});var iconClassName=classNames('p-menuitem-icon',item.icon);var icon=item.icon&&/*#__PURE__*/React.createElement(\"span\",{className:iconClassName});var label=item.label&&/*#__PURE__*/React.createElement(\"span\",{className:\"p-menuitem-text\"},item.label);var tabIndex=item.disabled?null:0;var content=/*#__PURE__*/React.createElement(\"a\",{href:item.url||'#',className:linkClassName,role:\"menuitem\",target:item.target,onClick:function onClick(event){return _this7.onItemClick(event,item);},onKeyDown:function onKeyDown(event){return _this7.onItemKeyDown(event,item);},tabIndex:tabIndex},icon,label);if(item.template){var defaultContentOptions={onClick:function onClick(event){return _this7.onItemClick(event,item);},onKeyDown:function onKeyDown(event){return _this7.onItemKeyDown(event,item);},className:linkClassName,tabIndex:tabIndex,labelClassName:'p-menuitem-text',iconClassName:iconClassName,element:content,props:this.props};content=ObjectUtils.getJSXElement(item.template,item,defaultContentOptions);}return/*#__PURE__*/React.createElement(\"li\",{key:item.label+'_'+index,className:className,style:item.style,role:\"none\"},content);}},{key:\"renderItem\",value:function renderItem(item,index){if(item.separator){return this.renderSeparator(index);}else{if(item.items)return this.renderSubmenu(item,index);else return this.renderMenuitem(item,index);}}},{key:\"renderMenu\",value:function renderMenu(){var _this8=this;return this.props.model.map(function(item,index){return _this8.renderItem(item,index);});}},{key:\"renderElement\",value:function renderElement(){if(this.props.model){var className=classNames('p-menu p-component',this.props.className,{'p-menu-overlay':this.props.popup});var menuitems=this.renderMenu();return/*#__PURE__*/React.createElement(CSSTransition,{nodeRef:this.menuRef,classNames:\"p-connected-overlay\",in:this.state.visible,timeout:{enter:120,exit:100},unmountOnExit:true,onEnter:this.onEnter,onEntered:this.onEntered,onExit:this.onExit},/*#__PURE__*/React.createElement(\"div\",{ref:this.menuRef,id:this.id,className:className,style:this.props.style,onClick:this.onPanelClick},/*#__PURE__*/React.createElement(\"ul\",{className:\"p-menu-list p-reset\",role:\"menu\"},menuitems)));}return null;}},{key:\"render\",value:function render(){var element=this.renderElement();if(this.props.appendTo)return ReactDOM.createPortal(element,this.props.appendTo);else return element;}}]);return Menu;}(Component);Menu.defaultProps={id:null,model:null,popup:false,style:null,className:null,autoZIndex:true,baseZIndex:0,appendTo:null,onShow:null,onHide:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/slotmaster-dashboard/src/components/menu/Menu.js"],"names":["React","Component","ReactDOM","DomHandler","ObjectUtils","classNames","CSSTransition","UniqueComponentId","ConnectedOverlayScrollHandler","OverlayEventBus","Menu","props","state","visible","popup","onEnter","bind","onEntered","onExit","onPanelClick","id","menuRef","createRef","event","emit","originalEvent","target","item","disabled","preventDefault","url","command","hide","listItem","currentTarget","parentElement","which","nextItem","findNextItem","children","focus","prevItem","findPrevItem","nextElementSibling","hasClass","previousElementSibling","show","currentEvent","setState","onShow","onHide","current","style","zIndex","String","baseZIndex","generateZIndex","absolutePosition","bindDocumentListeners","bindScrollListener","unbindDocumentListeners","unbindScrollListener","documentClickListener","isOutsideClicked","document","addEventListener","documentResizeListener","window","removeEventListener","scrollHandler","isSameNode","contains","destroy","submenu","index","className","items","map","renderMenuitem","label","linkClassName","iconClassName","icon","tabIndex","content","onItemClick","onItemKeyDown","template","defaultContentOptions","onClick","onKeyDown","labelClassName","element","getJSXElement","separator","renderSeparator","renderSubmenu","model","renderItem","menuitems","renderMenu","enter","exit","renderElement","appendTo","createPortal","defaultProps","autoZIndex"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport PropTypes from 'prop-types';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport UniqueComponentId from '../utils/UniqueComponentId';\r\nimport ConnectedOverlayScrollHandler from '../utils/ConnectedOverlayScrollHandler';\r\nimport OverlayEventBus from '../overlayeventbus/OverlayEventBus';\r\n\r\nexport class Menu extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        model: null,\r\n        popup: false,\r\n        style: null,\r\n        className: null,\r\n        autoZIndex: true,\r\n        baseZIndex: 0,\r\n        appendTo: null,\r\n        onShow: null,\r\n        onHide: null\r\n    };\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        model: PropTypes.array,\r\n        popup: PropTypes.bool,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        autoZIndex: PropTypes.bool,\r\n        baseZIndex: PropTypes.number,\r\n        appendTo: PropTypes.any,\r\n        onShow: PropTypes.func,\r\n        onHide: PropTypes.func\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            visible: !props.popup\r\n        };\r\n\r\n        this.onEnter = this.onEnter.bind(this);\r\n        this.onEntered = this.onEntered.bind(this);\r\n        this.onExit = this.onExit.bind(this);\r\n        this.onPanelClick = this.onPanelClick.bind(this);\r\n\r\n        this.id = this.props.id || UniqueComponentId();\r\n        this.menuRef = React.createRef();\r\n    }\r\n\r\n    onPanelClick(event) {\r\n        if (this.props.popup) {\r\n            OverlayEventBus.emit('overlay-click', {\r\n                originalEvent: event,\r\n                target: this.target\r\n            });\r\n        }\r\n    }\r\n\r\n    onItemClick(event, item) {\r\n        if (item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (!item.url) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        if (item.command) {\r\n            item.command({\r\n                originalEvent: event,\r\n                item: item\r\n            });\r\n        }\r\n\r\n        if (this.props.popup) {\r\n            this.hide(event);\r\n        }\r\n    }\r\n\r\n    onItemKeyDown(event, item) {\r\n        let listItem = event.currentTarget.parentElement;\r\n\r\n        switch (event.which) {\r\n            //down\r\n            case 40:\r\n                let nextItem = this.findNextItem(listItem);\r\n                if (nextItem) {\r\n                    nextItem.children[0].focus();\r\n                }\r\n\r\n                event.preventDefault();\r\n                break;\r\n\r\n            //up\r\n            case 38:\r\n                let prevItem = this.findPrevItem(listItem);\r\n                if (prevItem) {\r\n                    prevItem.children[0].focus();\r\n                }\r\n\r\n                event.preventDefault();\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    findNextItem(item) {\r\n        let nextItem = item.nextElementSibling;\r\n\r\n        if (nextItem)\r\n            return DomHandler.hasClass(nextItem, 'p-disabled') || !DomHandler.hasClass(nextItem, 'p-menuitem') ? this.findNextItem(nextItem) : nextItem;\r\n        else\r\n            return null;\r\n    }\r\n\r\n    findPrevItem(item) {\r\n        let prevItem = item.previousElementSibling;\r\n\r\n        if (prevItem)\r\n            return DomHandler.hasClass(prevItem, 'p-disabled') || !DomHandler.hasClass(prevItem, 'p-menuitem') ? this.findPrevItem(prevItem) : prevItem;\r\n        else\r\n            return null;\r\n    }\r\n\r\n    toggle(event) {\r\n        if (this.props.popup) {\r\n            if (this.state.visible)\r\n                this.hide(event);\r\n            else\r\n                this.show(event);\r\n        }\r\n    }\r\n\r\n    show(event) {\r\n        this.target = event.currentTarget;\r\n        let currentEvent = event;\r\n\r\n        this.setState({ visible: true }, () => {\r\n            if (this.props.onShow) {\r\n                this.props.onShow(currentEvent);\r\n            }\r\n        });\r\n    }\r\n\r\n    hide(event) {\r\n        let currentEvent = event;\r\n        this.setState({ visible: false }, () => {\r\n            if (this.props.onHide) {\r\n                this.props.onHide(currentEvent);\r\n            }\r\n        });\r\n    }\r\n\r\n    onEnter() {\r\n        this.menuRef.current.style.zIndex = String(this.props.baseZIndex + DomHandler.generateZIndex());\r\n        DomHandler.absolutePosition(this.menuRef.current, this.target);\r\n    }\r\n\r\n    onEntered() {\r\n        this.bindDocumentListeners();\r\n        this.bindScrollListener();\r\n    }\r\n\r\n    onExit() {\r\n        this.target = null;\r\n        this.unbindDocumentListeners();\r\n        this.unbindScrollListener();\r\n    }\r\n\r\n    bindDocumentListeners() {\r\n        if (!this.documentClickListener) {\r\n            this.documentClickListener = (event) => {\r\n                if (this.state.visible && this.isOutsideClicked(event)) {\r\n                    this.hide(event);\r\n                }\r\n            };\r\n\r\n            document.addEventListener('click', this.documentClickListener);\r\n        }\r\n\r\n        if (!this.documentResizeListener) {\r\n            this.documentResizeListener = (event) => {\r\n                if (this.state.visible) {\r\n                    this.hide(event);\r\n                }\r\n            };\r\n\r\n            window.addEventListener('resize', this.documentResizeListener);\r\n        }\r\n    }\r\n\r\n    unbindDocumentListeners() {\r\n        if (this.documentClickListener) {\r\n            document.removeEventListener('click', this.documentClickListener);\r\n            this.documentClickListener = null;\r\n        }\r\n\r\n        if (this.documentResizeListener) {\r\n            window.removeEventListener('resize', this.documentResizeListener);\r\n            this.documentResizeListener = null;\r\n        }\r\n    }\r\n\r\n    bindScrollListener() {\r\n        if (!this.scrollHandler) {\r\n            this.scrollHandler = new ConnectedOverlayScrollHandler(this.target, (event) => {\r\n                if (this.state.visible) {\r\n                    this.hide(event);\r\n                }\r\n            });\r\n        }\r\n\r\n        this.scrollHandler.bindScrollListener();\r\n    }\r\n\r\n    unbindScrollListener() {\r\n        if (this.scrollHandler) {\r\n            this.scrollHandler.unbindScrollListener();\r\n        }\r\n    }\r\n\r\n    isOutsideClicked(event) {\r\n        return this.menuRef && this.menuRef.current && !(this.menuRef.current.isSameNode(event.target) || this.menuRef.current.contains(event.target));\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.unbindDocumentListeners();\r\n        if (this.scrollHandler) {\r\n            this.scrollHandler.destroy();\r\n            this.scrollHandler = null;\r\n        }\r\n    }\r\n\r\n    renderSubmenu(submenu, index) {\r\n        const className = classNames('p-submenu-header', { 'p-disabled': submenu.disabled }, submenu.className);\r\n        const items = submenu.items.map((item, index) => {\r\n            return this.renderMenuitem(item, index);\r\n        });\r\n\r\n        return (\r\n            <React.Fragment key={submenu.label + '_' + index}>\r\n                <li className={className} style={submenu.style} role=\"presentation\">{submenu.label}</li>\r\n                {items}\r\n            </React.Fragment>\r\n        );\r\n    }\r\n\r\n    renderSeparator(index) {\r\n        return (\r\n            <li key={'separator_' + index} className=\"p-menu-separator\" role=\"separator\"></li>\r\n        );\r\n    }\r\n\r\n    renderMenuitem(item, index) {\r\n        const className = classNames('p-menuitem', item.className);\r\n        const linkClassName = classNames('p-menuitem-link', { 'p-disabled': item.disabled })\r\n        const iconClassName = classNames('p-menuitem-icon', item.icon);\r\n        const icon = item.icon && <span className={iconClassName}></span>;\r\n        const label = item.label && <span className=\"p-menuitem-text\">{item.label}</span>;\r\n        const tabIndex = item.disabled ? null : 0;\r\n        let content = (\r\n            <a href={item.url || '#'} className={linkClassName} role=\"menuitem\" target={item.target} onClick={(event) => this.onItemClick(event, item)} onKeyDown={(event) => this.onItemKeyDown(event, item)} tabIndex={tabIndex}>\r\n                {icon}\r\n                {label}\r\n            </a>\r\n        );\r\n\r\n        if (item.template) {\r\n            const defaultContentOptions = {\r\n                onClick: (event) => this.onItemClick(event, item),\r\n                onKeyDown: (event) => this.onItemKeyDown(event, item),\r\n                className: linkClassName,\r\n                tabIndex: tabIndex,\r\n                labelClassName: 'p-menuitem-text',\r\n                iconClassName,\r\n                element: content,\r\n                props: this.props\r\n            };\r\n\r\n            content = ObjectUtils.getJSXElement(item.template, item, defaultContentOptions);\r\n        }\r\n\r\n        return (\r\n            <li key={item.label + '_' + index} className={className} style={item.style} role=\"none\">\r\n                {content}\r\n            </li>\r\n        );\r\n    }\r\n\r\n    renderItem(item, index) {\r\n        if (item.separator) {\r\n            return this.renderSeparator(index);\r\n        }\r\n        else {\r\n            if (item.items)\r\n                return this.renderSubmenu(item, index);\r\n            else\r\n                return this.renderMenuitem(item, index);\r\n        }\r\n    }\r\n\r\n    renderMenu() {\r\n        return (\r\n            this.props.model.map((item, index) => {\r\n                return this.renderItem(item, index);\r\n            })\r\n        );\r\n    }\r\n\r\n    renderElement() {\r\n        if (this.props.model) {\r\n            const className = classNames('p-menu p-component', this.props.className, { 'p-menu-overlay': this.props.popup });\r\n            const menuitems = this.renderMenu();\r\n\r\n            return (\r\n                <CSSTransition nodeRef={this.menuRef} classNames=\"p-connected-overlay\" in={this.state.visible} timeout={{ enter: 120, exit: 100 }}\r\n                    unmountOnExit onEnter={this.onEnter} onEntered={this.onEntered} onExit={this.onExit}>\r\n                    <div ref={this.menuRef} id={this.id} className={className} style={this.props.style} onClick={this.onPanelClick}>\r\n                        <ul className=\"p-menu-list p-reset\" role=\"menu\">\r\n                            {menuitems}\r\n                        </ul>\r\n                    </div>\r\n                </CSSTransition>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        const element = this.renderElement();\r\n\r\n        if (this.props.appendTo)\r\n            return ReactDOM.createPortal(element, this.props.appendTo);\r\n        else\r\n            return element;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}