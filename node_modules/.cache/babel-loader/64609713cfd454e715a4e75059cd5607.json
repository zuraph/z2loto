{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{classNames}from'../utils/ClassNames';import ReactDOM from'react-dom';import DomHandler from'../utils/DomHandler';import{CSSTransition}from'react-transition-group';import{Ripple}from'../ripple/Ripple';import ObjectUtils from'../utils/ObjectUtils';var ContextMenuSub=/*#__PURE__*/function(_Component){_inherits(ContextMenuSub,_Component);var _super=_createSuper(ContextMenuSub);function ContextMenuSub(props){var _this;_classCallCheck(this,ContextMenuSub);_this=_super.call(this,props);_this.state={activeItem:null};_this.onEnter=_this.onEnter.bind(_assertThisInitialized(_this));_this.submenuRef=React.createRef();return _this;}_createClass(ContextMenuSub,[{key:\"onItemMouseEnter\",value:function onItemMouseEnter(event,item){if(item.disabled){event.preventDefault();return;}this.setState({activeItem:item});}},{key:\"onItemClick\",value:function onItemClick(event,item){if(item.disabled){event.preventDefault();return;}if(!item.url){event.preventDefault();}if(item.command){item.command({originalEvent:event,item:item});}if(!item.items){this.props.onLeafClick(event);}}},{key:\"position\",value:function position(){var parentItem=this.submenuRef.current.parentElement;var containerOffset=DomHandler.getOffset(this.submenuRef.current.parentElement);var viewport=DomHandler.getViewport();var sublistWidth=this.submenuRef.current.offsetParent?this.submenuRef.current.offsetWidth:DomHandler.getHiddenElementOuterWidth(this.submenuRef.current);var itemOuterWidth=DomHandler.getOuterWidth(parentItem.children[0]);this.submenuRef.current.style.top='0px';if(parseInt(containerOffset.left,10)+itemOuterWidth+sublistWidth>viewport.width-DomHandler.calculateScrollbarWidth()){this.submenuRef.current.style.left=-1*sublistWidth+'px';}else{this.submenuRef.current.style.left=itemOuterWidth+'px';}}},{key:\"onEnter\",value:function onEnter(){this.position();}},{key:\"isActive\",value:function isActive(){return this.props.root||!this.props.resetMenu;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.isActive()){this.position();}}},{key:\"renderSeparator\",value:function renderSeparator(index){return/*#__PURE__*/React.createElement(\"li\",{key:'separator_'+index,className:\"p-menu-separator\",role:\"separator\"});}},{key:\"renderSubmenu\",value:function renderSubmenu(item){if(item.items){return/*#__PURE__*/React.createElement(ContextMenuSub,{model:item.items,resetMenu:item!==this.state.activeItem,onLeafClick:this.props.onLeafClick});}return null;}},{key:\"renderMenuitem\",value:function renderMenuitem(item,index){var _this2=this;var active=this.state.activeItem===item;var className=classNames('p-menuitem',{'p-menuitem-active':active},item.className);var linkClassName=classNames('p-menuitem-link',{'p-disabled':item.disabled});var iconClassName=classNames('p-menuitem-icon',item.icon);var submenuIconClassName='p-submenu-icon pi pi-angle-right';var icon=item.icon&&/*#__PURE__*/React.createElement(\"span\",{className:iconClassName});var label=item.label&&/*#__PURE__*/React.createElement(\"span\",{className:\"p-menuitem-text\"},item.label);var submenuIcon=item.items&&/*#__PURE__*/React.createElement(\"span\",{className:submenuIconClassName});var submenu=this.renderSubmenu(item);var content=/*#__PURE__*/React.createElement(\"a\",{href:item.url||'#',className:linkClassName,target:item.target,onClick:function onClick(event){return _this2.onItemClick(event,item,index);},role:\"menuitem\",\"aria-haspopup\":item.items!=null},icon,label,submenuIcon,/*#__PURE__*/React.createElement(Ripple,null));if(item.template){var defaultContentOptions={onClick:function onClick(event){return _this2.onItemClick(event,item,index);},className:linkClassName,labelClassName:'p-menuitem-text',iconClassName:iconClassName,submenuIconClassName:submenuIconClassName,element:content,props:this.props,active:active};content=ObjectUtils.getJSXElement(item.template,item,defaultContentOptions);}return/*#__PURE__*/React.createElement(\"li\",{key:item.label+'_'+index,role:\"none\",className:className,style:item.style,onMouseEnter:function onMouseEnter(event){return _this2.onItemMouseEnter(event,item);}},content,submenu);}},{key:\"renderItem\",value:function renderItem(item,index){if(item.separator)return this.renderSeparator(index);else return this.renderMenuitem(item,index);}},{key:\"renderMenu\",value:function renderMenu(){var _this3=this;if(this.props.model){return this.props.model.map(function(item,index){return _this3.renderItem(item,index);});}return null;}},{key:\"render\",value:function render(){var className=classNames({'p-submenu-list':!this.props.root});var submenu=this.renderMenu();var isActive=this.isActive();return/*#__PURE__*/React.createElement(CSSTransition,{nodeRef:this.submenuRef,classNames:\"p-contextmenusub\",in:isActive,timeout:{enter:0,exit:0},unmountOnExit:true,onEnter:this.onEnter},/*#__PURE__*/React.createElement(\"ul\",{ref:this.submenuRef,className:className},submenu));}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.resetMenu===true){return{activeItem:null};}return null;}}]);return ContextMenuSub;}(Component);ContextMenuSub.defaultProps={model:null,root:false,className:null,resetMenu:false,onLeafClick:null};export var ContextMenu=/*#__PURE__*/function(_Component2){_inherits(ContextMenu,_Component2);var _super2=_createSuper(ContextMenu);function ContextMenu(props){var _this4;_classCallCheck(this,ContextMenu);_this4=_super2.call(this,props);_this4.state={visible:false,reshow:false,resetMenu:false};_this4.onMenuClick=_this4.onMenuClick.bind(_assertThisInitialized(_this4));_this4.onLeafClick=_this4.onLeafClick.bind(_assertThisInitialized(_this4));_this4.onMenuMouseEnter=_this4.onMenuMouseEnter.bind(_assertThisInitialized(_this4));_this4.onEnter=_this4.onEnter.bind(_assertThisInitialized(_this4));_this4.onEntered=_this4.onEntered.bind(_assertThisInitialized(_this4));_this4.onExit=_this4.onExit.bind(_assertThisInitialized(_this4));_this4.menuRef=React.createRef();return _this4;}_createClass(ContextMenu,[{key:\"onMenuClick\",value:function onMenuClick(){this.setState({resetMenu:false});}},{key:\"onMenuMouseEnter\",value:function onMenuMouseEnter(){this.setState({resetMenu:false});}},{key:\"show\",value:function show(event){var _this5=this;if(!(event instanceof Event)){event.persist();}event.stopPropagation();event.preventDefault();this.currentEvent=event;if(this.state.visible){this.setState({reshow:true});}else{this.setState({visible:true},function(){if(_this5.props.onShow){_this5.props.onShow(_this5.currentEvent);}});}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var _this6=this;if(this.state.visible&&prevState.reshow!==this.state.reshow){var event=this.currentEvent;this.setState({visible:false,reshow:false,rePosition:false,resetMenu:true},function(){return _this6.show(event);});}}},{key:\"hide\",value:function hide(event){var _this7=this;if(!(event instanceof Event)){event.persist();}this.currentEvent=event;this.setState({visible:false,reshow:false},function(){if(_this7.props.onHide){_this7.props.onHide(_this7.currentEvent);}});}},{key:\"onEnter\",value:function onEnter(){if(this.props.autoZIndex){this.menuRef.current.style.zIndex=String(this.props.baseZIndex+DomHandler.generateZIndex());}this.position(this.currentEvent);}},{key:\"onEntered\",value:function onEntered(){this.bindDocumentListeners();}},{key:\"onExit\",value:function onExit(){this.currentEvent=null;this.unbindDocumentListeners();}},{key:\"position\",value:function position(event){if(event){var left=event.pageX+1;var top=event.pageY+1;var width=this.menuRef.current.offsetParent?this.menuRef.current.offsetWidth:DomHandler.getHiddenElementOuterWidth(this.menuRef.current);var height=this.menuRef.current.offsetParent?this.menuRef.current.offsetHeight:DomHandler.getHiddenElementOuterHeight(this.menuRef.current);var viewport=DomHandler.getViewport();//flip\nif(left+width-document.body.scrollLeft>viewport.width){left-=width;}//flip\nif(top+height-document.body.scrollTop>viewport.height){top-=height;}//fit\nif(left<document.body.scrollLeft){left=document.body.scrollLeft;}//fit\nif(top<document.body.scrollTop){top=document.body.scrollTop;}this.menuRef.current.style.left=left+'px';this.menuRef.current.style.top=top+'px';}}},{key:\"onLeafClick\",value:function onLeafClick(event){this.setState({resetMenu:true});this.hide(event);event.stopPropagation();}},{key:\"isOutsideClicked\",value:function isOutsideClicked(event){return this.menuRef&&this.menuRef.current&&!(this.menuRef.current.isSameNode(event.target)||this.menuRef.current.contains(event.target));}},{key:\"bindDocumentListeners\",value:function bindDocumentListeners(){this.bindDocumentResizeListener();this.bindDocumentClickListener();}},{key:\"unbindDocumentListeners\",value:function unbindDocumentListeners(){this.unbindDocumentResizeListener();this.unbindDocumentClickListener();}},{key:\"bindDocumentClickListener\",value:function bindDocumentClickListener(){var _this8=this;if(!this.documentClickListener){this.documentClickListener=function(event){if(_this8.isOutsideClicked(event)&&event.button!==2){_this8.hide(event);_this8.setState({resetMenu:true});}};document.addEventListener('click',this.documentClickListener);}}},{key:\"bindDocumentContextMenuListener\",value:function bindDocumentContextMenuListener(){var _this9=this;if(!this.documentContextMenuListener){this.documentContextMenuListener=function(event){_this9.show(event);};document.addEventListener('contextmenu',this.documentContextMenuListener);}}},{key:\"bindDocumentResizeListener\",value:function bindDocumentResizeListener(){var _this10=this;if(!this.documentResizeListener){this.documentResizeListener=function(event){if(_this10.state.visible){_this10.hide(event);}};window.addEventListener('resize',this.documentResizeListener);}}},{key:\"unbindDocumentClickListener\",value:function unbindDocumentClickListener(){if(this.documentClickListener){document.removeEventListener('click',this.documentClickListener);this.documentClickListener=null;}}},{key:\"unbindDocumentContextMenuListener\",value:function unbindDocumentContextMenuListener(){if(this.documentContextMenuListener){document.removeEventListener('contextmenu',this.documentContextMenuListener);this.documentContextMenuListener=null;}}},{key:\"unbindDocumentResizeListener\",value:function unbindDocumentResizeListener(){if(this.documentResizeListener){window.removeEventListener('resize',this.documentResizeListener);this.documentResizeListener=null;}}},{key:\"componentDidMount\",value:function componentDidMount(){if(this.props.global){this.bindDocumentContextMenuListener();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unbindDocumentListeners();this.unbindDocumentContextMenuListener();}},{key:\"renderContextMenu\",value:function renderContextMenu(){var className=classNames('p-contextmenu p-component',this.props.className);return/*#__PURE__*/React.createElement(CSSTransition,{nodeRef:this.menuRef,classNames:\"p-contextmenu\",in:this.state.visible,timeout:{enter:250,exit:0},unmountOnExit:true,onEnter:this.onEnter,onEntered:this.onEntered,onExit:this.onExit},/*#__PURE__*/React.createElement(\"div\",{ref:this.menuRef,id:this.props.id,className:className,style:this.props.style,onClick:this.onMenuClick,onMouseEnter:this.onMenuMouseEnter},/*#__PURE__*/React.createElement(ContextMenuSub,{model:this.props.model,root:true,resetMenu:this.state.resetMenu,onLeafClick:this.onLeafClick})));}},{key:\"render\",value:function render(){var element=this.renderContextMenu();if(this.props.appendTo)return ReactDOM.createPortal(element,this.props.appendTo);else return element;}}]);return ContextMenu;}(Component);ContextMenu.defaultProps={id:null,model:null,style:null,className:null,global:false,autoZIndex:true,baseZIndex:0,appendTo:null,onShow:null,onHide:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/components/contextmenu/ContextMenu.js"],"names":["React","Component","classNames","ReactDOM","DomHandler","CSSTransition","Ripple","ObjectUtils","ContextMenuSub","props","state","activeItem","onEnter","bind","submenuRef","createRef","event","item","disabled","preventDefault","setState","url","command","originalEvent","items","onLeafClick","parentItem","current","parentElement","containerOffset","getOffset","viewport","getViewport","sublistWidth","offsetParent","offsetWidth","getHiddenElementOuterWidth","itemOuterWidth","getOuterWidth","children","style","top","parseInt","left","width","calculateScrollbarWidth","position","root","resetMenu","isActive","index","active","className","linkClassName","iconClassName","icon","submenuIconClassName","label","submenuIcon","submenu","renderSubmenu","content","target","onItemClick","template","defaultContentOptions","onClick","labelClassName","element","getJSXElement","onItemMouseEnter","separator","renderSeparator","renderMenuitem","model","map","renderItem","renderMenu","enter","exit","nextProps","prevState","defaultProps","ContextMenu","visible","reshow","onMenuClick","onMenuMouseEnter","onEntered","onExit","menuRef","Event","persist","stopPropagation","currentEvent","onShow","prevProps","rePosition","show","onHide","autoZIndex","zIndex","String","baseZIndex","generateZIndex","bindDocumentListeners","unbindDocumentListeners","pageX","pageY","height","offsetHeight","getHiddenElementOuterHeight","document","body","scrollLeft","scrollTop","hide","isSameNode","contains","bindDocumentResizeListener","bindDocumentClickListener","unbindDocumentResizeListener","unbindDocumentClickListener","documentClickListener","isOutsideClicked","button","addEventListener","documentContextMenuListener","documentResizeListener","window","removeEventListener","global","bindDocumentContextMenuListener","unbindDocumentContextMenuListener","id","renderContextMenu","appendTo","createPortal"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport ReactDOM from 'react-dom';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport { CSSTransition } from 'react-transition-group';\r\nimport { Ripple } from '../ripple/Ripple';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\n\r\nclass ContextMenuSub extends Component {\r\n\r\n    static defaultProps = {\r\n        model: null,\r\n        root: false,\r\n        className: null,\r\n        resetMenu: false,\r\n        onLeafClick: null\r\n    };\r\n\r\n    static propTypes = {\r\n        model: PropTypes.any,\r\n        root: PropTypes.bool,\r\n        className: PropTypes.string,\r\n        resetMenu: PropTypes.bool,\r\n        onLeafClick: PropTypes.func\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            activeItem: null\r\n        };\r\n\r\n        this.onEnter = this.onEnter.bind(this);\r\n        this.submenuRef = React.createRef();\r\n    }\r\n\r\n    onItemMouseEnter(event, item) {\r\n        if (item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        this.setState({\r\n            activeItem: item\r\n        });\r\n    }\r\n\r\n    onItemClick(event, item) {\r\n        if (item.disabled) {\r\n            event.preventDefault();\r\n            return;\r\n        }\r\n\r\n        if (!item.url) {\r\n            event.preventDefault();\r\n        }\r\n\r\n        if (item.command) {\r\n            item.command({\r\n                originalEvent: event,\r\n                item: item\r\n            });\r\n        }\r\n\r\n        if (!item.items) {\r\n            this.props.onLeafClick(event);\r\n        }\r\n    }\r\n\r\n    position() {\r\n        const parentItem = this.submenuRef.current.parentElement;\r\n        const containerOffset = DomHandler.getOffset(this.submenuRef.current.parentElement)\r\n        const viewport = DomHandler.getViewport();\r\n        const sublistWidth = this.submenuRef.current.offsetParent ? this.submenuRef.current.offsetWidth : DomHandler.getHiddenElementOuterWidth(this.submenuRef.current);\r\n        const itemOuterWidth = DomHandler.getOuterWidth(parentItem.children[0]);\r\n\r\n        this.submenuRef.current.style.top = '0px';\r\n\r\n        if ((parseInt(containerOffset.left, 10) + itemOuterWidth + sublistWidth) > (viewport.width - DomHandler.calculateScrollbarWidth())) {\r\n            this.submenuRef.current.style.left = -1 * sublistWidth + 'px';\r\n        }\r\n        else {\r\n            this.submenuRef.current.style.left = itemOuterWidth + 'px';\r\n        }\r\n    }\r\n\r\n    onEnter() {\r\n        this.position();\r\n    }\r\n\r\n    isActive() {\r\n        return this.props.root || !this.props.resetMenu;\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps, prevState) {\r\n        if (nextProps.resetMenu === true) {\r\n            return {\r\n                activeItem: null\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.isActive()) {\r\n            this.position();\r\n        }\r\n    }\r\n\r\n    renderSeparator(index) {\r\n        return (\r\n            <li key={'separator_' + index} className=\"p-menu-separator\" role=\"separator\"></li>\r\n        );\r\n    }\r\n\r\n    renderSubmenu(item) {\r\n        if (item.items) {\r\n            return (\r\n                <ContextMenuSub model={item.items} resetMenu={item !== this.state.activeItem} onLeafClick={this.props.onLeafClick} />\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    renderMenuitem(item, index) {\r\n        const active = this.state.activeItem === item;\r\n        const className = classNames('p-menuitem', { 'p-menuitem-active': active }, item.className);\r\n        const linkClassName = classNames('p-menuitem-link', { 'p-disabled': item.disabled });\r\n        const iconClassName = classNames('p-menuitem-icon', item.icon);\r\n        const submenuIconClassName = 'p-submenu-icon pi pi-angle-right';\r\n        const icon = item.icon && <span className={iconClassName}></span>;\r\n        const label = item.label && <span className=\"p-menuitem-text\">{item.label}</span>;\r\n        const submenuIcon = item.items && <span className={submenuIconClassName}></span>;\r\n        const submenu = this.renderSubmenu(item);\r\n        let content = (\r\n            <a href={item.url || '#'} className={linkClassName} target={item.target} onClick={(event) => this.onItemClick(event, item, index)} role=\"menuitem\"\r\n                aria-haspopup={item.items != null}>\r\n                {icon}\r\n                {label}\r\n                {submenuIcon}\r\n                <Ripple />\r\n            </a>\r\n        );\r\n\r\n        if (item.template) {\r\n            const defaultContentOptions = {\r\n                onClick: (event) => this.onItemClick(event, item, index),\r\n                className: linkClassName,\r\n                labelClassName: 'p-menuitem-text',\r\n                iconClassName,\r\n                submenuIconClassName,\r\n                element: content,\r\n                props: this.props,\r\n                active\r\n            };\r\n\r\n            content = ObjectUtils.getJSXElement(item.template, item, defaultContentOptions);\r\n        }\r\n\r\n        return (\r\n            <li key={item.label + '_' + index} role=\"none\" className={className} style={item.style} onMouseEnter={(event) => this.onItemMouseEnter(event, item)}>\r\n                {content}\r\n                {submenu}\r\n            </li>\r\n        );\r\n    }\r\n\r\n    renderItem(item, index) {\r\n        if (item.separator)\r\n            return this.renderSeparator(index);\r\n        else\r\n            return this.renderMenuitem(item, index);\r\n    }\r\n\r\n    renderMenu() {\r\n        if (this.props.model) {\r\n            return (\r\n                this.props.model.map((item, index) => {\r\n                    return this.renderItem(item, index);\r\n                })\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        const className = classNames({ 'p-submenu-list': !this.props.root });\r\n        const submenu = this.renderMenu();\r\n        const isActive = this.isActive();\r\n\r\n        return (\r\n            <CSSTransition nodeRef={this.submenuRef} classNames=\"p-contextmenusub\" in={isActive} timeout={{ enter: 0, exit: 0 }}\r\n                unmountOnExit onEnter={this.onEnter}>\r\n                <ul ref={this.submenuRef} className={className}>\r\n                    {submenu}\r\n                </ul>\r\n            </CSSTransition>\r\n        );\r\n    }\r\n}\r\n\r\nexport class ContextMenu extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        model: null,\r\n        style: null,\r\n        className: null,\r\n        global: false,\r\n        autoZIndex: true,\r\n        baseZIndex: 0,\r\n        appendTo: null,\r\n        onShow: null,\r\n        onHide: null\r\n    };\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        model: PropTypes.array,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        global: PropTypes.bool,\r\n        autoZIndex: PropTypes.bool,\r\n        baseZIndex: PropTypes.number,\r\n        appendTo: PropTypes.any,\r\n        onShow: PropTypes.func,\r\n        onHide: PropTypes.func\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            visible: false,\r\n            reshow: false,\r\n            resetMenu: false\r\n        };\r\n\r\n        this.onMenuClick = this.onMenuClick.bind(this);\r\n        this.onLeafClick = this.onLeafClick.bind(this);\r\n        this.onMenuMouseEnter = this.onMenuMouseEnter.bind(this);\r\n        this.onEnter = this.onEnter.bind(this);\r\n        this.onEntered = this.onEntered.bind(this);\r\n        this.onExit = this.onExit.bind(this);\r\n\r\n        this.menuRef = React.createRef();\r\n    }\r\n\r\n    onMenuClick() {\r\n        this.setState({\r\n            resetMenu: false\r\n        });\r\n    }\r\n\r\n    onMenuMouseEnter() {\r\n        this.setState({\r\n            resetMenu: false\r\n        });\r\n    }\r\n\r\n    show(event) {\r\n        if (!(event instanceof Event)) {\r\n            event.persist();\r\n        }\r\n\r\n        event.stopPropagation();\r\n        event.preventDefault();\r\n\r\n        this.currentEvent = event;\r\n\r\n        if (this.state.visible) {\r\n            this.setState({ reshow: true });\r\n        }\r\n        else {\r\n            this.setState({ visible: true }, () => {\r\n                if (this.props.onShow) {\r\n                    this.props.onShow(this.currentEvent);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        if (this.state.visible && prevState.reshow !== this.state.reshow) {\r\n            let event = this.currentEvent;\r\n            this.setState({\r\n                visible: false,\r\n                reshow: false,\r\n                rePosition: false,\r\n                resetMenu: true\r\n            }, () => this.show(event));\r\n        }\r\n    }\r\n\r\n    hide(event) {\r\n        if (!(event instanceof Event)) {\r\n            event.persist();\r\n        }\r\n\r\n        this.currentEvent = event;\r\n        this.setState({ visible: false, reshow: false }, () => {\r\n            if (this.props.onHide) {\r\n                this.props.onHide(this.currentEvent);\r\n            }\r\n        });\r\n    }\r\n\r\n    onEnter() {\r\n        if (this.props.autoZIndex) {\r\n            this.menuRef.current.style.zIndex = String(this.props.baseZIndex + DomHandler.generateZIndex());\r\n        }\r\n\r\n        this.position(this.currentEvent);\r\n    }\r\n\r\n    onEntered() {\r\n        this.bindDocumentListeners();\r\n    }\r\n\r\n    onExit() {\r\n        this.currentEvent = null;\r\n        this.unbindDocumentListeners();\r\n    }\r\n\r\n    position(event) {\r\n        if (event) {\r\n            let left = event.pageX + 1;\r\n            let top = event.pageY + 1;\r\n            let width = this.menuRef.current.offsetParent ? this.menuRef.current.offsetWidth : DomHandler.getHiddenElementOuterWidth(this.menuRef.current);\r\n            let height = this.menuRef.current.offsetParent ? this.menuRef.current.offsetHeight : DomHandler.getHiddenElementOuterHeight(this.menuRef.current);\r\n            let viewport = DomHandler.getViewport();\r\n\r\n            //flip\r\n            if (left + width - document.body.scrollLeft > viewport.width) {\r\n                left -= width;\r\n            }\r\n\r\n            //flip\r\n            if (top + height - document.body.scrollTop > viewport.height) {\r\n                top -= height;\r\n            }\r\n\r\n            //fit\r\n            if (left < document.body.scrollLeft) {\r\n                left = document.body.scrollLeft;\r\n            }\r\n\r\n            //fit\r\n            if (top < document.body.scrollTop) {\r\n                top = document.body.scrollTop;\r\n            }\r\n\r\n            this.menuRef.current.style.left = left + 'px';\r\n            this.menuRef.current.style.top = top + 'px';\r\n        }\r\n    }\r\n\r\n    onLeafClick(event) {\r\n        this.setState({\r\n            resetMenu: true\r\n        });\r\n\r\n        this.hide(event);\r\n\r\n        event.stopPropagation();\r\n    }\r\n\r\n    isOutsideClicked(event) {\r\n        return this.menuRef && this.menuRef.current && !(this.menuRef.current.isSameNode(event.target) || this.menuRef.current.contains(event.target));\r\n    }\r\n\r\n    bindDocumentListeners() {\r\n        this.bindDocumentResizeListener();\r\n        this.bindDocumentClickListener();\r\n    }\r\n\r\n    unbindDocumentListeners() {\r\n        this.unbindDocumentResizeListener();\r\n        this.unbindDocumentClickListener();\r\n    }\r\n\r\n    bindDocumentClickListener() {\r\n        if (!this.documentClickListener) {\r\n            this.documentClickListener = (event) => {\r\n                if (this.isOutsideClicked(event) && event.button !== 2) {\r\n                    this.hide(event);\r\n\r\n                    this.setState({\r\n                        resetMenu: true\r\n                    });\r\n                }\r\n            };\r\n\r\n            document.addEventListener('click', this.documentClickListener);\r\n        }\r\n    }\r\n\r\n    bindDocumentContextMenuListener() {\r\n        if (!this.documentContextMenuListener) {\r\n            this.documentContextMenuListener = (event) => {\r\n                this.show(event);\r\n            };\r\n\r\n            document.addEventListener('contextmenu', this.documentContextMenuListener);\r\n        }\r\n    }\r\n\r\n    bindDocumentResizeListener() {\r\n        if (!this.documentResizeListener) {\r\n            this.documentResizeListener = (event) => {\r\n                if (this.state.visible) {\r\n                    this.hide(event);\r\n                }\r\n            };\r\n\r\n            window.addEventListener('resize', this.documentResizeListener);\r\n        }\r\n    }\r\n\r\n    unbindDocumentClickListener() {\r\n        if (this.documentClickListener) {\r\n            document.removeEventListener('click', this.documentClickListener);\r\n            this.documentClickListener = null;\r\n        }\r\n    }\r\n\r\n    unbindDocumentContextMenuListener() {\r\n        if (this.documentContextMenuListener) {\r\n            document.removeEventListener('contextmenu', this.documentContextMenuListener);\r\n            this.documentContextMenuListener = null;\r\n        }\r\n    }\r\n\r\n    unbindDocumentResizeListener() {\r\n        if (this.documentResizeListener) {\r\n            window.removeEventListener('resize', this.documentResizeListener);\r\n            this.documentResizeListener = null;\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        if (this.props.global) {\r\n            this.bindDocumentContextMenuListener();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.unbindDocumentListeners();\r\n        this.unbindDocumentContextMenuListener();\r\n    }\r\n\r\n    renderContextMenu() {\r\n        const className = classNames('p-contextmenu p-component', this.props.className);\r\n\r\n        return (\r\n            <CSSTransition nodeRef={this.menuRef} classNames=\"p-contextmenu\" in={this.state.visible} timeout={{ enter: 250, exit: 0 }}\r\n                unmountOnExit onEnter={this.onEnter} onEntered={this.onEntered} onExit={this.onExit}>\r\n                <div ref={this.menuRef} id={this.props.id} className={className} style={this.props.style} onClick={this.onMenuClick} onMouseEnter={this.onMenuMouseEnter}>\r\n                    <ContextMenuSub model={this.props.model} root resetMenu={this.state.resetMenu} onLeafClick={this.onLeafClick} />\r\n                </div>\r\n            </CSSTransition>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const element = this.renderContextMenu();\r\n\r\n        if (this.props.appendTo)\r\n            return ReactDOM.createPortal(element, this.props.appendTo);\r\n        else\r\n            return element;\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}