{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{classNames}from'../utils/ClassNames';import OverlayEventBus from'../overlayeventbus/OverlayEventBus';import ObjectUtils from'../utils/ObjectUtils';import DomHandler from'../utils/DomHandler';import{RowRadioButton}from'./RowRadioButton';import{RowCheckbox}from'./RowCheckbox';import{Ripple}from'../ripple/Ripple';export var BodyCell=/*#__PURE__*/function(_Component){_inherits(BodyCell,_Component);var _super=_createSuper(BodyCell);function BodyCell(props){var _this;_classCallCheck(this,BodyCell);_this=_super.call(this,props);_this.state={editing:_this.props.editing};_this.onExpanderClick=_this.onExpanderClick.bind(_assertThisInitialized(_this));_this.onClick=_this.onClick.bind(_assertThisInitialized(_this));_this.onBlur=_this.onBlur.bind(_assertThisInitialized(_this));_this.onKeyDown=_this.onKeyDown.bind(_assertThisInitialized(_this));_this.onEditorFocus=_this.onEditorFocus.bind(_assertThisInitialized(_this));_this.eventBusKey=\"\".concat(_this.props.field,\"_\").concat(_this.props.rowIndex);return _this;}_createClass(BodyCell,[{key:\"onExpanderClick\",value:function onExpanderClick(event){if(this.props.onRowToggle){this.props.onRowToggle({originalEvent:event,data:this.props.rowData});}event.preventDefault();}},{key:\"onKeyDown\",value:function onKeyDown(event){if(this.props.editMode!=='row'){if(event.which===13||event.which===9){// tab || enter\nthis.switchCellToViewMode(event,true);}if(event.which===27){// escape\nthis.switchCellToViewMode(event,false);}}}},{key:\"onClick\",value:function onClick(event){var _this2=this;if(this.props.editMode!=='row'&&this.props.editor&&!this.state.editing){this.selfClick=true;if(this.props.onBeforeEditorShow){this.props.onBeforeEditorShow({originalEvent:event,columnProps:this.props});}this.setState({editing:true},function(){if(_this2.props.onEditorInit){_this2.props.onEditorInit({originalEvent:event,columnProps:_this2.props});}if(_this2.props.editorValidatorEvent==='click'){_this2.bindDocumentEditListener();OverlayEventBus.on('overlay-click',function(e){if(!_this2.isOutsideClicked(e.target)){_this2.selfClick=true;}},_this2.eventBusKey);}});}}},{key:\"onBlur\",value:function onBlur(event){this.selfClick=false;if(this.props.editMode!=='row'&&this.state.editing&&this.props.editorValidatorEvent==='blur'){this.switchCellToViewMode(event,true);}}},{key:\"onEditorFocus\",value:function onEditorFocus(event){this.onClick(event);}},{key:\"bindDocumentEditListener\",value:function bindDocumentEditListener(){var _this3=this;if(!this.documentEditListener){this.documentEditListener=function(e){if(!_this3.selfClick&&_this3.isOutsideClicked(e.target)){_this3.switchCellToViewMode(e,true);}_this3.selfClick=false;};document.addEventListener('click',this.documentEditListener);}}},{key:\"isOutsideClicked\",value:function isOutsideClicked(target){return this.container&&!(this.container.isSameNode(target)||this.container.contains(target));}},{key:\"closeCell\",value:function closeCell(event){var _this4=this;if(this.props.onBeforeEditorHide){this.props.onBeforeEditorHide({originalEvent:event,columnProps:this.props});}/* When using the 'tab' key, the focus event of the next cell is not called in IE. */setTimeout(function(){_this4.setState({editing:false},function(){_this4.unbindDocumentEditListener();OverlayEventBus.off('overlay-click',_this4.eventBusKey);});},1);}},{key:\"switchCellToViewMode\",value:function switchCellToViewMode(event,submit){var params={originalEvent:event,columnProps:this.props};if(!submit&&this.props.onEditorCancel){this.props.onEditorCancel(params);}var valid=true;if(this.props.editorValidator){valid=this.props.editorValidator(params);}if(valid){if(submit&&this.props.onEditorSubmit){this.props.onEditorSubmit(params);}this.closeCell(event);}}},{key:\"unbindDocumentEditListener\",value:function unbindDocumentEditListener(){if(this.documentEditListener){document.removeEventListener('click',this.documentEditListener);this.documentEditListener=null;this.selfClick=false;}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){var _this5=this;if(this.props.editMode!=='row'&&this.container&&this.props.editor){clearTimeout(this.tabindexTimeout);if(this.state.editing){var focusable=DomHandler.findSingle(this.container,'input');if(focusable&&document.activeElement!==focusable&&!focusable.hasAttribute('data-isCellEditing')){focusable.setAttribute('data-isCellEditing',true);focusable.focus();}this.keyHelper.tabIndex=-1;}else{this.tabindexTimeout=setTimeout(function(){if(_this5.keyHelper){_this5.keyHelper.setAttribute('tabindex',0);}},50);}}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unbindDocumentEditListener();}},{key:\"render\",value:function render(){var _this6=this;var content,header,editorKeyHelper;var cellClassName=classNames(this.props.bodyClassName||this.props.className,{'p-selection-column':this.props.selectionMode,'p-editable-column':this.props.editor,'p-cell-editing':this.state.editing&&this.props.editor});if(this.props.expander){var iconClassName=classNames('p-row-toggler-icon pi pi-fw p-clickable',{'pi-chevron-down':this.props.expanded,'pi-chevron-right':!this.props.expanded});var ariaControls=\"\".concat(this.props.tableId?this.props.tableId+'_':'',\"content_\").concat(this.props.rowIndex,\"_expanded\");var expanderProps={onClick:this.onExpanderClick,className:'p-row-toggler p-link',iconClassName:iconClassName};content=/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:expanderProps.onClick,className:expanderProps.className,\"aria-expanded\":this.props.expanded,\"aria-controls\":ariaControls},/*#__PURE__*/React.createElement(\"span\",{className:expanderProps.iconClassName}),/*#__PURE__*/React.createElement(Ripple,null));if(this.props.body){expanderProps['element']=content;content=this.props.body(this.props.rowData,_objectSpread(_objectSpread({},this.props),{expander:expanderProps}));}}else if(this.props.selectionMode){var showSelection=true;if(this.props.showSelectionElement){showSelection=this.props.showSelectionElement(this.props.rowData);}if(showSelection){if(this.props.selectionMode==='single')content=/*#__PURE__*/React.createElement(RowRadioButton,{onClick:this.props.onRadioClick,rowData:this.props.rowData,selected:this.props.selected,tableId:this.props.tableId});else content=/*#__PURE__*/React.createElement(RowCheckbox,{onClick:this.props.onCheckboxClick,rowData:this.props.rowData,selected:this.props.selected});}}else if(this.props.rowReorder){var showReorder=true;if(this.props.showRowReorderElement){showReorder=this.props.showRowReorderElement(this.props.rowData);}if(showReorder){var reorderIcon=classNames('p-table-reorderablerow-handle',this.props.rowReorderIcon);content=/*#__PURE__*/React.createElement(\"i\",{className:reorderIcon});}}else if(this.props.rowEditor){var rowEditorProps={};if(this.state.editing){rowEditorProps={editing:true,onSaveClick:this.props.onRowEditSave,saveClassName:'p-row-editor-save p-link',saveIconClassName:'p-row-editor-save-icon pi pi-fw pi-check p-clickable',onCancelClick:this.props.onRowEditCancel,cancelClassName:'p-row-editor-cancel p-link',cancelIconClassName:'p-row-editor-cancel-icon pi pi-fw pi-times p-clickable'};content=/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:rowEditorProps.onSaveClick,className:rowEditorProps.saveClassName},/*#__PURE__*/React.createElement(\"span\",{className:rowEditorProps.saveIconClassName}),/*#__PURE__*/React.createElement(Ripple,null)),/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:rowEditorProps.onCancelClick,className:rowEditorProps.cancelClassName},/*#__PURE__*/React.createElement(\"span\",{className:rowEditorProps.cancelIconClassName}),/*#__PURE__*/React.createElement(Ripple,null)));}else{rowEditorProps={editing:false,onInitClick:this.props.onRowEditInit,initClassName:'p-row-editor-init p-link',initIconClassName:'p-row-editor-init-icon pi pi-fw pi-pencil p-clickable'};content=/*#__PURE__*/React.createElement(\"button\",{type:\"button\",onClick:rowEditorProps.onInitClick,className:rowEditorProps.initClassName},/*#__PURE__*/React.createElement(\"span\",{className:rowEditorProps.initIconClassName}),/*#__PURE__*/React.createElement(Ripple,null));}if(this.props.body){rowEditorProps['element']=content;content=this.props.body(this.props.rowData,_objectSpread(_objectSpread({},this.props),{rowEditor:rowEditorProps}));}}else{if(this.state.editing&&this.props.editor){content=this.props.editor(this.props);}else{if(this.props.body)content=this.props.body(this.props.rowData,this.props);else content=ObjectUtils.resolveFieldData(this.props.rowData,this.props.field);}}if(this.props.editMode!=='row'){/* eslint-disable */editorKeyHelper=this.props.editor&&/*#__PURE__*/React.createElement(\"a\",{tabIndex:\"0\",ref:function ref(el){_this6.keyHelper=el;},className:\"p-cell-editor-key-helper p-hidden-accessible\",onFocus:this.onEditorFocus},/*#__PURE__*/React.createElement(\"span\",null));/* eslint-enable */}return/*#__PURE__*/React.createElement(\"td\",{ref:function ref(el){_this6.container=el;},role:\"cell\",className:cellClassName,style:this.props.bodyStyle||this.props.style,onClick:this.onClick,onKeyDown:this.onKeyDown,rowSpan:this.props.rowSpan,onBlur:this.onBlur},header,editorKeyHelper,content);}}],[{key:\"getDerivedStateFromProps\",value:function getDerivedStateFromProps(nextProps,prevState){if(nextProps.editMode==='row'&&nextProps.editing!==prevState.editing){return{editing:nextProps.editing};}return null;}}]);return BodyCell;}(Component);","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/components/datatable/BodyCell.js"],"names":["React","Component","classNames","OverlayEventBus","ObjectUtils","DomHandler","RowRadioButton","RowCheckbox","Ripple","BodyCell","props","state","editing","onExpanderClick","bind","onClick","onBlur","onKeyDown","onEditorFocus","eventBusKey","field","rowIndex","event","onRowToggle","originalEvent","data","rowData","preventDefault","editMode","which","switchCellToViewMode","editor","selfClick","onBeforeEditorShow","columnProps","setState","onEditorInit","editorValidatorEvent","bindDocumentEditListener","on","e","isOutsideClicked","target","documentEditListener","document","addEventListener","container","isSameNode","contains","onBeforeEditorHide","setTimeout","unbindDocumentEditListener","off","submit","params","onEditorCancel","valid","editorValidator","onEditorSubmit","closeCell","removeEventListener","clearTimeout","tabindexTimeout","focusable","findSingle","activeElement","hasAttribute","setAttribute","focus","keyHelper","tabIndex","content","header","editorKeyHelper","cellClassName","bodyClassName","className","selectionMode","expander","iconClassName","expanded","ariaControls","tableId","expanderProps","body","showSelection","showSelectionElement","onRadioClick","selected","onCheckboxClick","rowReorder","showReorder","showRowReorderElement","reorderIcon","rowReorderIcon","rowEditor","rowEditorProps","onSaveClick","onRowEditSave","saveClassName","saveIconClassName","onCancelClick","onRowEditCancel","cancelClassName","cancelIconClassName","onInitClick","onRowEditInit","initClassName","initIconClassName","resolveFieldData","el","bodyStyle","style","rowSpan","nextProps","prevState"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport OverlayEventBus from '../overlayeventbus/OverlayEventBus';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport { RowRadioButton } from './RowRadioButton';\r\nimport { RowCheckbox } from './RowCheckbox';\r\nimport { Ripple } from '../ripple/Ripple';\r\n\r\nexport class BodyCell extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            editing: this.props.editing\r\n        };\r\n\r\n        this.onExpanderClick = this.onExpanderClick.bind(this);\r\n        this.onClick = this.onClick.bind(this);\r\n        this.onBlur = this.onBlur.bind(this);\r\n        this.onKeyDown = this.onKeyDown.bind(this);\r\n        this.onEditorFocus = this.onEditorFocus.bind(this);\r\n\r\n        this.eventBusKey = `${this.props.field}_${this.props.rowIndex}`;\r\n    }\r\n\r\n    onExpanderClick(event) {\r\n        if (this.props.onRowToggle) {\r\n            this.props.onRowToggle({\r\n                originalEvent: event,\r\n                data: this.props.rowData\r\n            });\r\n        }\r\n\r\n        event.preventDefault();\r\n    }\r\n\r\n    onKeyDown(event) {\r\n        if (this.props.editMode !== 'row') {\r\n            if (event.which === 13 || event.which === 9) { // tab || enter\r\n                this.switchCellToViewMode(event, true);\r\n            }\r\n\r\n            if (event.which === 27) { // escape\r\n                this.switchCellToViewMode(event, false);\r\n            }\r\n        }\r\n    }\r\n\r\n    onClick(event) {\r\n        if (this.props.editMode !== 'row' && this.props.editor && !this.state.editing) {\r\n            this.selfClick = true;\r\n\r\n            if (this.props.onBeforeEditorShow) {\r\n                this.props.onBeforeEditorShow({\r\n                    originalEvent: event,\r\n                    columnProps: this.props\r\n                });\r\n            }\r\n\r\n            this.setState({\r\n                editing: true\r\n            }, () => {\r\n                if (this.props.onEditorInit) {\r\n                    this.props.onEditorInit({\r\n                        originalEvent: event,\r\n                        columnProps: this.props\r\n                    });\r\n                }\r\n\r\n                if (this.props.editorValidatorEvent === 'click') {\r\n                    this.bindDocumentEditListener();\r\n\r\n                    OverlayEventBus.on('overlay-click', (e) => {\r\n                        if (!this.isOutsideClicked(e.target)) {\r\n                            this.selfClick = true;\r\n                        }\r\n                    }, this.eventBusKey);\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    onBlur(event) {\r\n        this.selfClick = false;\r\n\r\n        if (this.props.editMode !== 'row' && this.state.editing && this.props.editorValidatorEvent === 'blur') {\r\n            this.switchCellToViewMode(event, true);\r\n        }\r\n    }\r\n\r\n    onEditorFocus(event) {\r\n        this.onClick(event);\r\n    }\r\n\r\n    bindDocumentEditListener() {\r\n        if (!this.documentEditListener) {\r\n            this.documentEditListener = (e) => {\r\n                if (!this.selfClick && this.isOutsideClicked(e.target)) {\r\n                    this.switchCellToViewMode(e, true);\r\n                }\r\n\r\n                this.selfClick = false;\r\n            };\r\n\r\n            document.addEventListener('click', this.documentEditListener);\r\n        }\r\n    }\r\n\r\n    isOutsideClicked(target) {\r\n        return this.container && !(this.container.isSameNode(target) || this.container.contains(target));\r\n    }\r\n\r\n    closeCell(event) {\r\n        if (this.props.onBeforeEditorHide) {\r\n            this.props.onBeforeEditorHide({\r\n                originalEvent: event,\r\n                columnProps: this.props\r\n            });\r\n        }\r\n\r\n        /* When using the 'tab' key, the focus event of the next cell is not called in IE. */\r\n        setTimeout(() => {\r\n            this.setState({\r\n                editing: false\r\n            }, () => {\r\n                this.unbindDocumentEditListener();\r\n                OverlayEventBus.off('overlay-click', this.eventBusKey);\r\n            });\r\n        }, 1);\r\n    }\r\n\r\n    switchCellToViewMode(event, submit) {\r\n        const params = {\r\n            originalEvent: event,\r\n            columnProps: this.props\r\n        };\r\n\r\n        if (!submit && this.props.onEditorCancel) {\r\n            this.props.onEditorCancel(params);\r\n        }\r\n\r\n        let valid = true;\r\n        if (this.props.editorValidator) {\r\n            valid = this.props.editorValidator(params);\r\n        }\r\n\r\n        if (valid) {\r\n            if (submit && this.props.onEditorSubmit) {\r\n                this.props.onEditorSubmit(params);\r\n            }\r\n\r\n            this.closeCell(event);\r\n        }\r\n    }\r\n\r\n    unbindDocumentEditListener() {\r\n        if (this.documentEditListener) {\r\n            document.removeEventListener('click', this.documentEditListener);\r\n            this.documentEditListener = null;\r\n            this.selfClick = false;\r\n        }\r\n    }\r\n\r\n    static getDerivedStateFromProps(nextProps, prevState) {\r\n        if (nextProps.editMode === 'row' && nextProps.editing !== prevState.editing) {\r\n            return {\r\n                editing: nextProps.editing\r\n            }\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if (this.props.editMode !== 'row' && this.container && this.props.editor) {\r\n            clearTimeout(this.tabindexTimeout);\r\n            if (this.state.editing) {\r\n                let focusable = DomHandler.findSingle(this.container, 'input');\r\n                if (focusable && document.activeElement !== focusable && !focusable.hasAttribute('data-isCellEditing')) {\r\n                    focusable.setAttribute('data-isCellEditing', true);\r\n                    focusable.focus();\r\n                }\r\n\r\n                this.keyHelper.tabIndex = -1;\r\n            }\r\n            else {\r\n                this.tabindexTimeout = setTimeout(() => {\r\n                    if (this.keyHelper) {\r\n                        this.keyHelper.setAttribute('tabindex', 0);\r\n                    }\r\n                }, 50);\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.unbindDocumentEditListener();\r\n    }\r\n\r\n    render() {\r\n        let content, header, editorKeyHelper;\r\n        let cellClassName = classNames(this.props.bodyClassName || this.props.className, {\r\n            'p-selection-column': this.props.selectionMode,\r\n            'p-editable-column': this.props.editor,\r\n            'p-cell-editing': this.state.editing && this.props.editor\r\n        });\r\n\r\n        if (this.props.expander) {\r\n            const iconClassName = classNames('p-row-toggler-icon pi pi-fw p-clickable', { 'pi-chevron-down': this.props.expanded, 'pi-chevron-right': !this.props.expanded });\r\n            const ariaControls = `${this.props.tableId ? this.props.tableId + '_' : ''}content_${this.props.rowIndex}_expanded`;\r\n            let expanderProps = {\r\n                onClick: this.onExpanderClick,\r\n                className: 'p-row-toggler p-link',\r\n                iconClassName\r\n            };\r\n\r\n            content = (\r\n                <button type=\"button\" onClick={expanderProps.onClick} className={expanderProps.className} aria-expanded={this.props.expanded} aria-controls={ariaControls}>\r\n                    <span className={expanderProps.iconClassName}></span>\r\n                    <Ripple />\r\n                </button>\r\n            );\r\n\r\n            if (this.props.body) {\r\n                expanderProps['element'] = content;\r\n                content = this.props.body(this.props.rowData, { ...this.props, ...{ expander: expanderProps } });\r\n            }\r\n        }\r\n        else if (this.props.selectionMode) {\r\n            let showSelection = true;\r\n            if (this.props.showSelectionElement) {\r\n                showSelection = this.props.showSelectionElement(this.props.rowData);\r\n            }\r\n\r\n            if (showSelection) {\r\n                if (this.props.selectionMode === 'single')\r\n                    content = <RowRadioButton onClick={this.props.onRadioClick} rowData={this.props.rowData} selected={this.props.selected} tableId={this.props.tableId} />;\r\n                else\r\n                    content = <RowCheckbox onClick={this.props.onCheckboxClick} rowData={this.props.rowData} selected={this.props.selected} />;\r\n            }\r\n        }\r\n        else if (this.props.rowReorder) {\r\n            let showReorder = true;\r\n            if (this.props.showRowReorderElement) {\r\n                showReorder = this.props.showRowReorderElement(this.props.rowData);\r\n            }\r\n\r\n            if (showReorder) {\r\n                let reorderIcon = classNames('p-table-reorderablerow-handle', this.props.rowReorderIcon);\r\n                content = (\r\n                    <i className={reorderIcon}></i>\r\n                );\r\n            }\r\n        }\r\n        else if (this.props.rowEditor) {\r\n            let rowEditorProps = {};\r\n\r\n            if (this.state.editing) {\r\n                rowEditorProps = {\r\n                    editing: true,\r\n                    onSaveClick: this.props.onRowEditSave,\r\n                    saveClassName: 'p-row-editor-save p-link',\r\n                    saveIconClassName: 'p-row-editor-save-icon pi pi-fw pi-check p-clickable',\r\n                    onCancelClick: this.props.onRowEditCancel,\r\n                    cancelClassName: 'p-row-editor-cancel p-link',\r\n                    cancelIconClassName: 'p-row-editor-cancel-icon pi pi-fw pi-times p-clickable'\r\n                };\r\n\r\n                content = (\r\n                    <>\r\n                        <button type=\"button\" onClick={rowEditorProps.onSaveClick} className={rowEditorProps.saveClassName}>\r\n                            <span className={rowEditorProps.saveIconClassName}></span>\r\n                            <Ripple />\r\n                        </button>\r\n                        <button type=\"button\" onClick={rowEditorProps.onCancelClick} className={rowEditorProps.cancelClassName}>\r\n                            <span className={rowEditorProps.cancelIconClassName}></span>\r\n                            <Ripple />\r\n                        </button>\r\n                    </>\r\n                );\r\n            }\r\n            else {\r\n                rowEditorProps = {\r\n                    editing: false,\r\n                    onInitClick: this.props.onRowEditInit,\r\n                    initClassName: 'p-row-editor-init p-link',\r\n                    initIconClassName: 'p-row-editor-init-icon pi pi-fw pi-pencil p-clickable'\r\n                };\r\n\r\n                content = (\r\n                    <button type=\"button\" onClick={rowEditorProps.onInitClick} className={rowEditorProps.initClassName}>\r\n                        <span className={rowEditorProps.initIconClassName}></span>\r\n                        <Ripple />\r\n                    </button>\r\n                );\r\n            }\r\n\r\n            if (this.props.body) {\r\n                rowEditorProps['element'] = content;\r\n                content = this.props.body(this.props.rowData, { ...this.props, ...{ rowEditor: rowEditorProps } });\r\n            }\r\n        }\r\n        else {\r\n            if (this.state.editing && this.props.editor) {\r\n                content = this.props.editor(this.props);\r\n            }\r\n            else {\r\n                if (this.props.body)\r\n                    content = this.props.body(this.props.rowData, this.props);\r\n                else\r\n                    content = ObjectUtils.resolveFieldData(this.props.rowData, this.props.field);\r\n            }\r\n        }\r\n\r\n        if (this.props.editMode !== 'row') {\r\n            /* eslint-disable */\r\n            editorKeyHelper = this.props.editor && <a tabIndex=\"0\" ref={(el) => { this.keyHelper = el; }} className=\"p-cell-editor-key-helper p-hidden-accessible\" onFocus={this.onEditorFocus}><span></span></a>;\r\n            /* eslint-enable */\r\n        }\r\n\r\n        return (\r\n            <td ref={(el) => { this.container = el; }} role=\"cell\" className={cellClassName} style={this.props.bodyStyle || this.props.style} onClick={this.onClick} onKeyDown={this.onKeyDown}\r\n                rowSpan={this.props.rowSpan} onBlur={this.onBlur}>\r\n                {header}\r\n                {editorKeyHelper}\r\n                {content}\r\n            </td>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}