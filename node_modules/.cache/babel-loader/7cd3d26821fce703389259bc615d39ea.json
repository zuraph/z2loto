{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import DomHandler from'../utils/DomHandler';import{classNames}from'../utils/ClassNames';import{ColorPickerPanel}from'./ColorPickerPanel';import{tip}from'../tooltip/Tooltip';import ObjectUtils from'../utils/ObjectUtils';import UniqueComponentId from'../utils/UniqueComponentId';import ConnectedOverlayScrollHandler from'../utils/ConnectedOverlayScrollHandler';import OverlayEventBus from'../overlayeventbus/OverlayEventBus';export var ColorPicker=/*#__PURE__*/function(_Component){_inherits(ColorPicker,_Component);var _super=_createSuper(ColorPicker);function ColorPicker(props){var _this;_classCallCheck(this,ColorPicker);_this=_super.call(this,props);_this.state={overlayVisible:false};_this.onInputClick=_this.onInputClick.bind(_assertThisInitialized(_this));_this.onInputKeydown=_this.onInputKeydown.bind(_assertThisInitialized(_this));_this.onOverlayEnter=_this.onOverlayEnter.bind(_assertThisInitialized(_this));_this.onOverlayEntered=_this.onOverlayEntered.bind(_assertThisInitialized(_this));_this.onOverlayExit=_this.onOverlayExit.bind(_assertThisInitialized(_this));_this.onPanelClick=_this.onPanelClick.bind(_assertThisInitialized(_this));_this.id=_this.props.id||UniqueComponentId();_this.overlayRef=React.createRef();return _this;}_createClass(ColorPicker,[{key:\"onPanelClick\",value:function onPanelClick(event){if(!this.props.inline){OverlayEventBus.emit('overlay-click',{originalEvent:event,target:this.container});}}},{key:\"onHueMousedown\",value:function onHueMousedown(event){if(this.props.disabled){return;}this.hueDragging=true;this.bindDocumentMouseMoveListener();this.bindDocumentMouseUpListener();this.pickHue(event);DomHandler.addClass(this.container,'p-colorpicker-dragging');}},{key:\"pickHue\",value:function pickHue(event){var top=this.hueView.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);this.hsbValue=this.validateHSB({h:Math.floor(360*(150-Math.max(0,Math.min(150,event.pageY-top)))/150),s:100,b:100});this.updateColorSelector();this.updateHue();this.updateModel();}},{key:\"onColorMousedown\",value:function onColorMousedown(event){if(this.props.disabled){return;}this.colorDragging=true;this.bindDocumentMouseMoveListener();this.bindDocumentMouseUpListener();this.pickColor(event);DomHandler.addClass(this.container,'p-colorpicker-dragging');}},{key:\"pickColor\",value:function pickColor(event){var rect=this.colorSelector.getBoundingClientRect();var top=rect.top+(window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0);var left=rect.left+document.body.scrollLeft;var saturation=Math.floor(100*Math.max(0,Math.min(150,event.pageX-left))/150);var brightness=Math.floor(100*(150-Math.max(0,Math.min(150,event.pageY-top)))/150);this.hsbValue=this.validateHSB({h:this.hsbValue.h,s:saturation,b:brightness});this.updateColorHandle();this.updateInput();this.updateModel();}},{key:\"updateModel\",value:function updateModel(){switch(this.props.format){case'hex':this.onChange(this.HSBtoHEX(this.hsbValue));break;case'rgb':this.onChange(this.HSBtoRGB(this.hsbValue));break;case'hsb':this.onChange(this.hsbValue);break;default:break;}}},{key:\"toHSB\",value:function toHSB(value){var hsb;if(value){switch(this.props.format){case'hex':hsb=this.HEXtoHSB(value);break;case'rgb':hsb=this.RGBtoHSB(value);break;case'hsb':hsb=value;break;default:break;}}else{hsb=this.HEXtoHSB(this.props.defaultColor);}return hsb;}},{key:\"updateHSBValue\",value:function updateHSBValue(value){this.hsbValue=this.toHSB(value);}},{key:\"areHSBEqual\",value:function areHSBEqual(val1,val2){return val1.h===val2.h&&val1.s===val2.s&&val1.b===val2.b;}},{key:\"onChange\",value:function onChange(value){if(this.props.onChange){this.props.onChange({value:value,stopPropagation:function stopPropagation(){},preventDefault:function preventDefault(){},target:{name:this.props.name,id:this.id,value:value}});}}},{key:\"updateColorSelector\",value:function updateColorSelector(){if(this.colorSelector){var hsbValue=this.validateHSB({h:this.hsbValue.h,s:100,b:100});this.colorSelector.style.backgroundColor='#'+this.HSBtoHEX(hsbValue);}}},{key:\"updateColorHandle\",value:function updateColorHandle(){if(this.colorHandle){this.colorHandle.style.left=Math.floor(150*this.hsbValue.s/100)+'px';this.colorHandle.style.top=Math.floor(150*(100-this.hsbValue.b)/100)+'px';}}},{key:\"updateHue\",value:function updateHue(){if(this.hueHandle){this.hueHandle.style.top=Math.floor(150-150*this.hsbValue.h/360)+'px';}}},{key:\"updateInput\",value:function updateInput(){if(this.input){this.input.style.backgroundColor='#'+this.HSBtoHEX(this.hsbValue);}}},{key:\"show\",value:function show(){this.setState({overlayVisible:true});}},{key:\"hide\",value:function hide(){this.setState({overlayVisible:false});}},{key:\"onOverlayEnter\",value:function onOverlayEnter(){this.overlayRef.current.style.zIndex=String(DomHandler.generateZIndex());this.alignPanel();}},{key:\"onOverlayEntered\",value:function onOverlayEntered(){this.bindDocumentClickListener();this.bindScrollListener();this.bindResizeListener();}},{key:\"onOverlayExit\",value:function onOverlayExit(){this.unbindDocumentClickListener();this.unbindScrollListener();this.unbindResizeListener();}},{key:\"onInputClick\",value:function onInputClick(){this.togglePanel();}},{key:\"togglePanel\",value:function togglePanel(){if(this.state.overlayVisible)this.hide();else this.show();}},{key:\"onInputKeydown\",value:function onInputKeydown(event){switch(event.which){//space\ncase 32:this.togglePanel();event.preventDefault();break;//escape and tab\ncase 27:case 9:this.hide();break;default:break;}}},{key:\"bindDocumentClickListener\",value:function bindDocumentClickListener(){var _this2=this;if(!this.documentClickListener){this.documentClickListener=function(event){if(_this2.state.overlayVisible&&_this2.isOutsideClicked(event)){_this2.hide();}};document.addEventListener('click',this.documentClickListener);}}},{key:\"unbindDocumentClickListener\",value:function unbindDocumentClickListener(){if(this.documentClickListener){document.removeEventListener('click',this.documentClickListener);this.documentClickListener=null;}}},{key:\"bindScrollListener\",value:function bindScrollListener(){var _this3=this;if(!this.scrollHandler){this.scrollHandler=new ConnectedOverlayScrollHandler(this.container,function(){if(_this3.state.overlayVisible){_this3.hide();}});}this.scrollHandler.bindScrollListener();}},{key:\"unbindScrollListener\",value:function unbindScrollListener(){if(this.scrollHandler){this.scrollHandler.unbindScrollListener();}}},{key:\"bindResizeListener\",value:function bindResizeListener(){var _this4=this;if(!this.resizeListener){this.resizeListener=function(){if(_this4.state.overlayVisible){_this4.hide();}};window.addEventListener('resize',this.resizeListener);}}},{key:\"unbindResizeListener\",value:function unbindResizeListener(){if(this.resizeListener){window.removeEventListener('resize',this.resizeListener);this.resizeListener=null;}}},{key:\"isOutsideClicked\",value:function isOutsideClicked(event){return this.container&&!(this.container.isSameNode(event.target)||this.container.contains(event.target)||this.overlayRef&&this.overlayRef.current.contains(event.target));}},{key:\"bindDocumentMouseMoveListener\",value:function bindDocumentMouseMoveListener(){if(!this.documentMouseMoveListener){this.documentMouseMoveListener=this.onDocumentMouseMove.bind(this);document.addEventListener('mousemove',this.documentMouseMoveListener);}}},{key:\"onDocumentMouseMove\",value:function onDocumentMouseMove(event){if(this.colorDragging){this.pickColor(event);}if(this.hueDragging){this.pickHue(event);}}},{key:\"unbindDocumentMouseMoveListener\",value:function unbindDocumentMouseMoveListener(){if(this.documentMouseMoveListener){document.removeEventListener('mousemove',this.documentMouseMoveListener);this.documentMouseMoveListener=null;}}},{key:\"bindDocumentMouseUpListener\",value:function bindDocumentMouseUpListener(){if(!this.documentMouseUpListener){this.documentMouseUpListener=this.onDocumentMouseUp.bind(this);document.addEventListener('mouseup',this.documentMouseUpListener);}}},{key:\"onDocumentMouseUp\",value:function onDocumentMouseUp(){this.colorDragging=false;this.hueDragging=false;DomHandler.removeClass(this.container,'p-colorpicker-dragging');this.unbindDocumentMouseMoveListener();this.unbindDocumentMouseUpListener();}},{key:\"unbindDocumentMouseUpListener\",value:function unbindDocumentMouseUpListener(){if(this.documentMouseUpListener){document.removeEventListener('mouseup',this.documentMouseUpListener);this.documentMouseUpListener=null;}}},{key:\"validateHSB\",value:function validateHSB(hsb){return{h:Math.min(360,Math.max(0,hsb.h)),s:Math.min(100,Math.max(0,hsb.s)),b:Math.min(100,Math.max(0,hsb.b))};}},{key:\"validateRGB\",value:function validateRGB(rgb){return{r:Math.min(255,Math.max(0,rgb.r)),g:Math.min(255,Math.max(0,rgb.g)),b:Math.min(255,Math.max(0,rgb.b))};}},{key:\"validateHEX\",value:function validateHEX(hex){var len=6-hex.length;if(len>0){var o=[];for(var i=0;i<len;i++){o.push('0');}o.push(hex);hex=o.join('');}return hex;}},{key:\"HEXtoRGB\",value:function HEXtoRGB(hex){var hexValue=parseInt(hex.indexOf('#')>-1?hex.substring(1):hex,16);return{r:hexValue>>16,g:(hexValue&0x00FF00)>>8,b:hexValue&0x0000FF};}},{key:\"HEXtoHSB\",value:function HEXtoHSB(hex){return this.RGBtoHSB(this.HEXtoRGB(hex));}},{key:\"RGBtoHSB\",value:function RGBtoHSB(rgb){var hsb={h:0,s:0,b:0};var min=Math.min(rgb.r,rgb.g,rgb.b);var max=Math.max(rgb.r,rgb.g,rgb.b);var delta=max-min;hsb.b=max;hsb.s=max!==0?255*delta/max:0;if(hsb.s!==0){if(rgb.r===max){hsb.h=(rgb.g-rgb.b)/delta;}else if(rgb.g===max){hsb.h=2+(rgb.b-rgb.r)/delta;}else{hsb.h=4+(rgb.r-rgb.g)/delta;}}else{hsb.h=-1;}hsb.h*=60;if(hsb.h<0){hsb.h+=360;}hsb.s*=100/255;hsb.b*=100/255;return hsb;}},{key:\"HSBtoRGB\",value:function HSBtoRGB(hsb){var rgb={r:null,g:null,b:null};var h=Math.round(hsb.h);var s=Math.round(hsb.s*255/100);var v=Math.round(hsb.b*255/100);if(s===0){rgb={r:v,g:v,b:v};}else{var t1=v;var t2=(255-s)*v/255;var t3=(t1-t2)*(h%60)/60;if(h===360)h=0;if(h<60){rgb.r=t1;rgb.b=t2;rgb.g=t2+t3;}else if(h<120){rgb.g=t1;rgb.b=t2;rgb.r=t1-t3;}else if(h<180){rgb.g=t1;rgb.r=t2;rgb.b=t2+t3;}else if(h<240){rgb.b=t1;rgb.r=t2;rgb.g=t1-t3;}else if(h<300){rgb.b=t1;rgb.g=t2;rgb.r=t2+t3;}else if(h<360){rgb.r=t1;rgb.g=t2;rgb.b=t1-t3;}else{rgb.r=0;rgb.g=0;rgb.b=0;}}return{r:Math.round(rgb.r),g:Math.round(rgb.g),b:Math.round(rgb.b)};}},{key:\"RGBtoHEX\",value:function RGBtoHEX(rgb){var hex=[rgb.r.toString(16),rgb.g.toString(16),rgb.b.toString(16)];for(var key in hex){if(hex[key].length===1){hex[key]='0'+hex[key];}}return hex.join('');}},{key:\"HSBtoHEX\",value:function HSBtoHEX(hsb){return this.RGBtoHEX(this.HSBtoRGB(hsb));}},{key:\"componentDidMount\",value:function componentDidMount(){this.updateHSBValue(this.props.value);this.updateUI();if(this.props.tooltip){this.renderTooltip();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){this.updateUI();if(prevProps.tooltip!==this.props.tooltip||prevProps.tooltipOptions!==this.props.tooltipOptions){if(this.tooltip)this.tooltip.update(_objectSpread({content:this.props.tooltip},this.props.tooltipOptions||{}));else this.renderTooltip();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){this.unbindDocumentClickListener();this.unbindDocumentMouseMoveListener();this.unbindDocumentMouseUpListener();this.unbindResizeListener();if(this.scrollHandler){this.scrollHandler.destroy();this.scrollHandler=null;}if(this.tooltip){this.tooltip.destroy();this.tooltip=null;}}},{key:\"updateUI\",value:function updateUI(){this.updateHue();this.updateColorHandle();this.updateInput();this.updateColorSelector();}},{key:\"alignPanel\",value:function alignPanel(){var container=this.input.parentElement;if(this.props.appendTo){this.overlayRef.current.style.minWidth=DomHandler.getWidth(container)+'px';DomHandler.absolutePosition(this.overlayRef.current,container);}else{DomHandler.relativePosition(this.overlayRef.current,container);}}},{key:\"renderTooltip\",value:function renderTooltip(){this.tooltip=tip({target:this.container,content:this.props.tooltip,options:this.props.tooltipOptions});}},{key:\"renderColorSelector\",value:function renderColorSelector(){var _this5=this;return/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this5.colorSelector=el;},className:\"p-colorpicker-color-selector\",onMouseDown:this.onColorMousedown.bind(this)},/*#__PURE__*/React.createElement(\"div\",{className:\"p-colorpicker-color\"},/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this5.colorHandle=el;},className:\"p-colorpicker-color-handle\"})));}},{key:\"renderHue\",value:function renderHue(){var _this6=this;return/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this6.hueView=el;},className:\"p-colorpicker-hue\",onMouseDown:this.onHueMousedown.bind(this)},/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this6.hueHandle=el;},className:\"p-colorpicker-hue-handle\"}));}},{key:\"renderContent\",value:function renderContent(){var colorSelector=this.renderColorSelector();var hue=this.renderHue();return/*#__PURE__*/React.createElement(\"div\",{className:\"p-colorpicker-content\"},colorSelector,hue);}},{key:\"renderInput\",value:function renderInput(){var _this7=this;if(!this.props.inline){var inputClassName=classNames('p-colorpicker-preview p-inputtext',{'p-disabled':this.props.disabled});var inputProps=ObjectUtils.findDiffKeys(this.props,ColorPicker.defaultProps);return/*#__PURE__*/React.createElement(\"input\",Object.assign({ref:function ref(el){return _this7.input=el;},type:\"text\",className:inputClassName,readOnly:true,id:this.props.inputId,tabIndex:this.props.tabIndex,disabled:this.props.disabled,onClick:this.onInputClick,onKeyDown:this.onInputKeydown},inputProps));}return null;}},{key:\"render\",value:function render(){var _this8=this;var containerClassName=classNames('p-colorpicker p-component',{'p-colorpicker-overlay':!this.props.inline},this.props.className);var content=this.renderContent();var input=this.renderInput();return/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this8.container=el;},id:this.id,style:this.props.style,className:containerClassName},input,/*#__PURE__*/React.createElement(ColorPickerPanel,{ref:this.overlayRef,appendTo:this.props.appendTo,inline:this.props.inline,disabled:this.props.disabled,onClick:this.onPanelClick,in:this.props.inline||this.state.overlayVisible,onEnter:this.onOverlayEnter,onEntered:this.onOverlayEntered,onExit:this.onOverlayExit},content));}}]);return ColorPicker;}(Component);ColorPicker.defaultProps={id:null,value:null,style:null,className:null,defaultColor:'ff0000',inline:false,format:\"hex\",appendTo:null,disabled:false,tabIndex:null,inputId:null,tooltip:null,tooltipOptions:null,onChange:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/slotmaster-dashboard/src/components/colorpicker/ColorPicker.js"],"names":["React","Component","DomHandler","classNames","ColorPickerPanel","tip","ObjectUtils","UniqueComponentId","ConnectedOverlayScrollHandler","OverlayEventBus","ColorPicker","props","state","overlayVisible","onInputClick","bind","onInputKeydown","onOverlayEnter","onOverlayEntered","onOverlayExit","onPanelClick","id","overlayRef","createRef","event","inline","emit","originalEvent","target","container","disabled","hueDragging","bindDocumentMouseMoveListener","bindDocumentMouseUpListener","pickHue","addClass","top","hueView","getBoundingClientRect","window","pageYOffset","document","documentElement","scrollTop","body","hsbValue","validateHSB","h","Math","floor","max","min","pageY","s","b","updateColorSelector","updateHue","updateModel","colorDragging","pickColor","rect","colorSelector","left","scrollLeft","saturation","pageX","brightness","updateColorHandle","updateInput","format","onChange","HSBtoHEX","HSBtoRGB","value","hsb","HEXtoHSB","RGBtoHSB","defaultColor","toHSB","val1","val2","stopPropagation","preventDefault","name","style","backgroundColor","colorHandle","hueHandle","input","setState","current","zIndex","String","generateZIndex","alignPanel","bindDocumentClickListener","bindScrollListener","bindResizeListener","unbindDocumentClickListener","unbindScrollListener","unbindResizeListener","togglePanel","hide","show","which","documentClickListener","isOutsideClicked","addEventListener","removeEventListener","scrollHandler","resizeListener","isSameNode","contains","documentMouseMoveListener","onDocumentMouseMove","documentMouseUpListener","onDocumentMouseUp","removeClass","unbindDocumentMouseMoveListener","unbindDocumentMouseUpListener","rgb","r","g","hex","len","length","o","i","push","join","hexValue","parseInt","indexOf","substring","HEXtoRGB","delta","round","v","t1","t2","t3","toString","key","RGBtoHEX","updateHSBValue","updateUI","tooltip","renderTooltip","prevProps","tooltipOptions","update","content","destroy","parentElement","appendTo","minWidth","getWidth","absolutePosition","relativePosition","options","el","onColorMousedown","onHueMousedown","renderColorSelector","hue","renderHue","inputClassName","inputProps","findDiffKeys","defaultProps","inputId","tabIndex","containerClassName","className","renderContent","renderInput"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport { ColorPickerPanel } from './ColorPickerPanel';\r\nimport { tip } from '../tooltip/Tooltip';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\nimport UniqueComponentId from '../utils/UniqueComponentId';\r\nimport ConnectedOverlayScrollHandler from '../utils/ConnectedOverlayScrollHandler';\r\nimport OverlayEventBus from '../overlayeventbus/OverlayEventBus';\r\n\r\nexport class ColorPicker extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        value: null,\r\n        style: null,\r\n        className: null,\r\n        defaultColor: 'ff0000',\r\n        inline: false,\r\n        format: \"hex\",\r\n        appendTo: null,\r\n        disabled: false,\r\n        tabIndex: null,\r\n        inputId: null,\r\n        tooltip: null,\r\n        tooltipOptions: null,\r\n        onChange: null\r\n    }\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        value: PropTypes.any,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        defaultColor: PropTypes.string,\r\n        inline: PropTypes.bool,\r\n        format: PropTypes.string,\r\n        appendTo: PropTypes.any,\r\n        disabled: PropTypes.bool,\r\n        tabIndex: PropTypes.number,\r\n        inputId: PropTypes.string,\r\n        tooltip: PropTypes.string,\r\n        tooltipOptions: PropTypes.object,\r\n        onChange: PropTypes.func\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            overlayVisible: false\r\n        };\r\n\r\n        this.onInputClick = this.onInputClick.bind(this);\r\n        this.onInputKeydown = this.onInputKeydown.bind(this);\r\n        this.onOverlayEnter = this.onOverlayEnter.bind(this);\r\n        this.onOverlayEntered = this.onOverlayEntered.bind(this);\r\n        this.onOverlayExit = this.onOverlayExit.bind(this);\r\n        this.onPanelClick = this.onPanelClick.bind(this);\r\n\r\n        this.id = this.props.id || UniqueComponentId();\r\n        this.overlayRef = React.createRef();\r\n    }\r\n\r\n    onPanelClick(event) {\r\n        if (!this.props.inline) {\r\n            OverlayEventBus.emit('overlay-click', {\r\n                originalEvent: event,\r\n                target: this.container\r\n            });\r\n        }\r\n    }\r\n\r\n    onHueMousedown(event) {\r\n        if (this.props.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.hueDragging = true;\r\n        this.bindDocumentMouseMoveListener();\r\n        this.bindDocumentMouseUpListener();\r\n        this.pickHue(event);\r\n        DomHandler.addClass(this.container, 'p-colorpicker-dragging');\r\n    }\r\n\r\n    pickHue(event) {\r\n        let top = this.hueView.getBoundingClientRect().top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n        this.hsbValue = this.validateHSB({\r\n            h: Math.floor(360 * (150 - Math.max(0, Math.min(150, (event.pageY - top)))) / 150),\r\n            s: 100,\r\n            b: 100\r\n        });\r\n\r\n        this.updateColorSelector();\r\n        this.updateHue();\r\n        this.updateModel();\r\n    }\r\n\r\n    onColorMousedown(event) {\r\n        if (this.props.disabled) {\r\n            return;\r\n        }\r\n\r\n        this.colorDragging = true;\r\n        this.bindDocumentMouseMoveListener();\r\n        this.bindDocumentMouseUpListener();\r\n        this.pickColor(event);\r\n        DomHandler.addClass(this.container, 'p-colorpicker-dragging');\r\n    }\r\n\r\n    pickColor(event) {\r\n        let rect = this.colorSelector.getBoundingClientRect();\r\n        let top = rect.top + (window.pageYOffset || document.documentElement.scrollTop || document.body.scrollTop || 0);\r\n        let left = rect.left + document.body.scrollLeft;\r\n        let saturation = Math.floor(100 * (Math.max(0, Math.min(150, (event.pageX - left)))) / 150);\r\n        let brightness = Math.floor(100 * (150 - Math.max(0, Math.min(150, (event.pageY - top)))) / 150);\r\n        this.hsbValue = this.validateHSB({\r\n            h: this.hsbValue.h,\r\n            s: saturation,\r\n            b: brightness\r\n        });\r\n\r\n        this.updateColorHandle();\r\n        this.updateInput();\r\n        this.updateModel();\r\n    }\r\n\r\n    updateModel() {\r\n        switch (this.props.format) {\r\n            case 'hex':\r\n                this.onChange(this.HSBtoHEX(this.hsbValue));\r\n                break;\r\n\r\n            case 'rgb':\r\n                this.onChange(this.HSBtoRGB(this.hsbValue));\r\n                break;\r\n\r\n            case 'hsb':\r\n                this.onChange(this.hsbValue);\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    toHSB(value) {\r\n        let hsb;\r\n\r\n        if (value) {\r\n            switch (this.props.format) {\r\n                case 'hex':\r\n                    hsb = this.HEXtoHSB(value);\r\n                    break;\r\n\r\n                case 'rgb':\r\n                    hsb = this.RGBtoHSB(value);\r\n                    break;\r\n\r\n                case 'hsb':\r\n                    hsb = value;\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n        else {\r\n            hsb = this.HEXtoHSB(this.props.defaultColor);\r\n        }\r\n\r\n        return hsb;\r\n    }\r\n\r\n    updateHSBValue(value) {\r\n        this.hsbValue = this.toHSB(value);\r\n    }\r\n\r\n    areHSBEqual(val1, val2) {\r\n        return val1.h === val2.h && val1.s === val2.s && val1.b === val2.b;\r\n    }\r\n\r\n    onChange(value) {\r\n        if (this.props.onChange) {\r\n            this.props.onChange({\r\n                value: value,\r\n                stopPropagation: () => { },\r\n                preventDefault: () => { },\r\n                target: {\r\n                    name: this.props.name,\r\n                    id: this.id,\r\n                    value: value\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    updateColorSelector() {\r\n        if (this.colorSelector) {\r\n            let hsbValue = this.validateHSB({\r\n                h: this.hsbValue.h,\r\n                s: 100,\r\n                b: 100\r\n            });\r\n            this.colorSelector.style.backgroundColor = '#' + this.HSBtoHEX(hsbValue);\r\n        }\r\n    }\r\n\r\n    updateColorHandle() {\r\n        if (this.colorHandle) {\r\n            this.colorHandle.style.left = Math.floor(150 * this.hsbValue.s / 100) + 'px';\r\n            this.colorHandle.style.top = Math.floor(150 * (100 - this.hsbValue.b) / 100) + 'px';\r\n        }\r\n    }\r\n\r\n    updateHue() {\r\n        if (this.hueHandle) {\r\n            this.hueHandle.style.top = Math.floor(150 - (150 * this.hsbValue.h / 360)) + 'px';\r\n        }\r\n    }\r\n\r\n    updateInput() {\r\n        if (this.input) {\r\n            this.input.style.backgroundColor = '#' + this.HSBtoHEX(this.hsbValue);\r\n        }\r\n    }\r\n\r\n    show() {\r\n        this.setState({ overlayVisible: true });\r\n    }\r\n\r\n    hide() {\r\n        this.setState({ overlayVisible: false });\r\n    }\r\n\r\n    onOverlayEnter() {\r\n        this.overlayRef.current.style.zIndex = String(DomHandler.generateZIndex());\r\n        this.alignPanel();\r\n    }\r\n\r\n    onOverlayEntered() {\r\n        this.bindDocumentClickListener();\r\n        this.bindScrollListener();\r\n        this.bindResizeListener();\r\n    }\r\n\r\n    onOverlayExit() {\r\n        this.unbindDocumentClickListener();\r\n        this.unbindScrollListener();\r\n        this.unbindResizeListener();\r\n    }\r\n\r\n    onInputClick() {\r\n        this.togglePanel();\r\n    }\r\n\r\n    togglePanel() {\r\n        if (this.state.overlayVisible)\r\n            this.hide();\r\n        else\r\n            this.show();\r\n    }\r\n\r\n    onInputKeydown(event) {\r\n        switch (event.which) {\r\n            //space\r\n            case 32:\r\n                this.togglePanel();\r\n                event.preventDefault();\r\n                break;\r\n\r\n            //escape and tab\r\n            case 27:\r\n            case 9:\r\n                this.hide();\r\n                break;\r\n\r\n            default:\r\n                break;\r\n        }\r\n    }\r\n\r\n    bindDocumentClickListener() {\r\n        if (!this.documentClickListener) {\r\n            this.documentClickListener = (event) => {\r\n                if (this.state.overlayVisible && this.isOutsideClicked(event)) {\r\n                    this.hide();\r\n                }\r\n            };\r\n            document.addEventListener('click', this.documentClickListener);\r\n        }\r\n    }\r\n\r\n    unbindDocumentClickListener() {\r\n        if (this.documentClickListener) {\r\n            document.removeEventListener('click', this.documentClickListener);\r\n            this.documentClickListener = null;\r\n        }\r\n    }\r\n\r\n    bindScrollListener() {\r\n        if (!this.scrollHandler) {\r\n            this.scrollHandler = new ConnectedOverlayScrollHandler(this.container, () => {\r\n                if (this.state.overlayVisible) {\r\n                    this.hide();\r\n                }\r\n            });\r\n        }\r\n\r\n        this.scrollHandler.bindScrollListener();\r\n    }\r\n\r\n    unbindScrollListener() {\r\n        if (this.scrollHandler) {\r\n            this.scrollHandler.unbindScrollListener();\r\n        }\r\n    }\r\n\r\n    bindResizeListener() {\r\n        if (!this.resizeListener) {\r\n            this.resizeListener = () => {\r\n                if (this.state.overlayVisible) {\r\n                    this.hide();\r\n                }\r\n            };\r\n            window.addEventListener('resize', this.resizeListener);\r\n        }\r\n    }\r\n\r\n    unbindResizeListener() {\r\n        if (this.resizeListener) {\r\n            window.removeEventListener('resize', this.resizeListener);\r\n            this.resizeListener = null;\r\n        }\r\n    }\r\n\r\n    isOutsideClicked(event) {\r\n        return this.container && !(this.container.isSameNode(event.target) || this.container.contains(event.target)\r\n            || (this.overlayRef && this.overlayRef.current.contains(event.target)));\r\n    }\r\n\r\n    bindDocumentMouseMoveListener() {\r\n        if (!this.documentMouseMoveListener) {\r\n            this.documentMouseMoveListener = this.onDocumentMouseMove.bind(this);\r\n            document.addEventListener('mousemove', this.documentMouseMoveListener);\r\n        }\r\n    }\r\n\r\n    onDocumentMouseMove(event) {\r\n        if (this.colorDragging) {\r\n            this.pickColor(event);\r\n        }\r\n\r\n        if (this.hueDragging) {\r\n            this.pickHue(event);\r\n        }\r\n    }\r\n\r\n    unbindDocumentMouseMoveListener() {\r\n        if (this.documentMouseMoveListener) {\r\n            document.removeEventListener('mousemove', this.documentMouseMoveListener);\r\n            this.documentMouseMoveListener = null;\r\n        }\r\n    }\r\n\r\n    bindDocumentMouseUpListener() {\r\n        if (!this.documentMouseUpListener) {\r\n            this.documentMouseUpListener = this.onDocumentMouseUp.bind(this);\r\n            document.addEventListener('mouseup', this.documentMouseUpListener);\r\n        }\r\n    }\r\n\r\n    onDocumentMouseUp() {\r\n        this.colorDragging = false;\r\n        this.hueDragging = false;\r\n        DomHandler.removeClass(this.container, 'p-colorpicker-dragging');\r\n        this.unbindDocumentMouseMoveListener();\r\n        this.unbindDocumentMouseUpListener();\r\n    }\r\n\r\n    unbindDocumentMouseUpListener() {\r\n        if (this.documentMouseUpListener) {\r\n            document.removeEventListener('mouseup', this.documentMouseUpListener);\r\n            this.documentMouseUpListener = null;\r\n        }\r\n    }\r\n\r\n    validateHSB(hsb) {\r\n        return {\r\n            h: Math.min(360, Math.max(0, hsb.h)),\r\n            s: Math.min(100, Math.max(0, hsb.s)),\r\n            b: Math.min(100, Math.max(0, hsb.b))\r\n        };\r\n    }\r\n\r\n    validateRGB(rgb) {\r\n        return {\r\n            r: Math.min(255, Math.max(0, rgb.r)),\r\n            g: Math.min(255, Math.max(0, rgb.g)),\r\n            b: Math.min(255, Math.max(0, rgb.b))\r\n        };\r\n    }\r\n\r\n    validateHEX(hex) {\r\n        let len = 6 - hex.length;\r\n        if (len > 0) {\r\n            let o = [];\r\n            for (let i = 0; i < len; i++) {\r\n                o.push('0');\r\n            }\r\n            o.push(hex);\r\n            hex = o.join('');\r\n        }\r\n        return hex;\r\n    }\r\n\r\n    HEXtoRGB(hex) {\r\n        let hexValue = parseInt(((hex.indexOf('#') > -1) ? hex.substring(1) : hex), 16);\r\n        return { r: hexValue >> 16, g: (hexValue & 0x00FF00) >> 8, b: (hexValue & 0x0000FF) };\r\n    }\r\n\r\n    HEXtoHSB(hex) {\r\n        return this.RGBtoHSB(this.HEXtoRGB(hex));\r\n    }\r\n\r\n    RGBtoHSB(rgb) {\r\n        let hsb = {\r\n            h: 0,\r\n            s: 0,\r\n            b: 0\r\n        };\r\n        let min = Math.min(rgb.r, rgb.g, rgb.b);\r\n        let max = Math.max(rgb.r, rgb.g, rgb.b);\r\n        let delta = max - min;\r\n        hsb.b = max;\r\n        hsb.s = max !== 0 ? 255 * delta / max : 0;\r\n        if (hsb.s !== 0) {\r\n            if (rgb.r === max) {\r\n                hsb.h = (rgb.g - rgb.b) / delta;\r\n            } else if (rgb.g === max) {\r\n                hsb.h = 2 + (rgb.b - rgb.r) / delta;\r\n            } else {\r\n                hsb.h = 4 + (rgb.r - rgb.g) / delta;\r\n            }\r\n        } else {\r\n            hsb.h = -1;\r\n        }\r\n        hsb.h *= 60;\r\n        if (hsb.h < 0) {\r\n            hsb.h += 360;\r\n        }\r\n        hsb.s *= 100 / 255;\r\n        hsb.b *= 100 / 255;\r\n        return hsb;\r\n    }\r\n\r\n    HSBtoRGB(hsb) {\r\n        let rgb = {\r\n            r: null, g: null, b: null\r\n        };\r\n        let h = Math.round(hsb.h);\r\n        let s = Math.round(hsb.s * 255 / 100);\r\n        let v = Math.round(hsb.b * 255 / 100);\r\n        if (s === 0) {\r\n            rgb = {\r\n                r: v,\r\n                g: v,\r\n                b: v\r\n            }\r\n        }\r\n        else {\r\n            let t1 = v;\r\n            let t2 = (255 - s) * v / 255;\r\n            let t3 = (t1 - t2) * (h % 60) / 60;\r\n            if (h === 360) h = 0;\r\n            if (h < 60) { rgb.r = t1; rgb.b = t2; rgb.g = t2 + t3 }\r\n            else if (h < 120) { rgb.g = t1; rgb.b = t2; rgb.r = t1 - t3 }\r\n            else if (h < 180) { rgb.g = t1; rgb.r = t2; rgb.b = t2 + t3 }\r\n            else if (h < 240) { rgb.b = t1; rgb.r = t2; rgb.g = t1 - t3 }\r\n            else if (h < 300) { rgb.b = t1; rgb.g = t2; rgb.r = t2 + t3 }\r\n            else if (h < 360) { rgb.r = t1; rgb.g = t2; rgb.b = t1 - t3 }\r\n            else { rgb.r = 0; rgb.g = 0; rgb.b = 0 }\r\n        }\r\n        return { r: Math.round(rgb.r), g: Math.round(rgb.g), b: Math.round(rgb.b) };\r\n    }\r\n\r\n    RGBtoHEX(rgb) {\r\n        let hex = [\r\n            rgb.r.toString(16),\r\n            rgb.g.toString(16),\r\n            rgb.b.toString(16)\r\n        ];\r\n\r\n        for (let key in hex) {\r\n            if (hex[key].length === 1) {\r\n                hex[key] = '0' + hex[key];\r\n            }\r\n        }\r\n\r\n        return hex.join('');\r\n    }\r\n\r\n    HSBtoHEX(hsb) {\r\n        return this.RGBtoHEX(this.HSBtoRGB(hsb));\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.updateHSBValue(this.props.value);\r\n        this.updateUI();\r\n\r\n        if (this.props.tooltip) {\r\n            this.renderTooltip();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        this.updateUI();\r\n        if (prevProps.tooltip !== this.props.tooltip || prevProps.tooltipOptions !== this.props.tooltipOptions) {\r\n            if (this.tooltip)\r\n                this.tooltip.update({ content: this.props.tooltip, ...(this.props.tooltipOptions || {}) });\r\n            else\r\n                this.renderTooltip();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        this.unbindDocumentClickListener();\r\n        this.unbindDocumentMouseMoveListener();\r\n        this.unbindDocumentMouseUpListener();\r\n        this.unbindResizeListener();\r\n        if (this.scrollHandler) {\r\n            this.scrollHandler.destroy();\r\n            this.scrollHandler = null;\r\n        }\r\n\r\n        if (this.tooltip) {\r\n            this.tooltip.destroy();\r\n            this.tooltip = null;\r\n        }\r\n    }\r\n\r\n    updateUI() {\r\n        this.updateHue();\r\n        this.updateColorHandle();\r\n        this.updateInput();\r\n        this.updateColorSelector();\r\n    }\r\n\r\n    alignPanel() {\r\n        const container = this.input.parentElement;\r\n        if (this.props.appendTo) {\r\n            this.overlayRef.current.style.minWidth = DomHandler.getWidth(container) + 'px';\r\n            DomHandler.absolutePosition(this.overlayRef.current, container);\r\n        }\r\n        else {\r\n            DomHandler.relativePosition(this.overlayRef.current, container);\r\n        }\r\n    }\r\n\r\n    renderTooltip() {\r\n        this.tooltip = tip({\r\n            target: this.container,\r\n            content: this.props.tooltip,\r\n            options: this.props.tooltipOptions\r\n        });\r\n    }\r\n\r\n    renderColorSelector() {\r\n        return (\r\n            <div ref={(el) => this.colorSelector = el} className=\"p-colorpicker-color-selector\" onMouseDown={this.onColorMousedown.bind(this)}>\r\n                <div className=\"p-colorpicker-color\">\r\n                    <div ref={(el) => this.colorHandle = el} className=\"p-colorpicker-color-handle\"></div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderHue() {\r\n        return (\r\n            <div ref={(el) => this.hueView = el} className=\"p-colorpicker-hue\" onMouseDown={this.onHueMousedown.bind(this)}>\r\n                <div ref={(el) => this.hueHandle = el} className=\"p-colorpicker-hue-handle\"></div>\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderContent() {\r\n        let colorSelector = this.renderColorSelector();\r\n        let hue = this.renderHue();\r\n\r\n        return (\r\n            <div className=\"p-colorpicker-content\">\r\n                {colorSelector}\r\n                {hue}\r\n            </div>\r\n        );\r\n    }\r\n\r\n    renderInput() {\r\n        if (!this.props.inline) {\r\n            let inputClassName = classNames('p-colorpicker-preview p-inputtext', {\r\n                'p-disabled': this.props.disabled\r\n            });\r\n\r\n            let inputProps = ObjectUtils.findDiffKeys(this.props, ColorPicker.defaultProps);\r\n\r\n            return (\r\n                <input ref={(el) => this.input = el} type=\"text\" className={inputClassName} readOnly id={this.props.inputId} tabIndex={this.props.tabIndex} disabled={this.props.disabled}\r\n                    onClick={this.onInputClick} onKeyDown={this.onInputKeydown} {...inputProps} />\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        const containerClassName = classNames('p-colorpicker p-component', {\r\n            'p-colorpicker-overlay': !this.props.inline\r\n        }, this.props.className);\r\n\r\n        let content = this.renderContent();\r\n        let input = this.renderInput();\r\n\r\n        return (\r\n            <div ref={(el) => this.container = el} id={this.id} style={this.props.style} className={containerClassName}>\r\n                {input}\r\n                <ColorPickerPanel ref={this.overlayRef} appendTo={this.props.appendTo} inline={this.props.inline} disabled={this.props.disabled} onClick={this.onPanelClick}\r\n                    in={this.props.inline || this.state.overlayVisible} onEnter={this.onOverlayEnter} onEntered={this.onOverlayEntered} onExit={this.onOverlayExit}>\r\n                    {content}\r\n                </ColorPickerPanel>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}