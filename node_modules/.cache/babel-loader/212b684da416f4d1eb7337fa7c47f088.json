{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{classNames}from'../utils/ClassNames';import DomHandler from'../utils/DomHandler';import{Ripple}from'../ripple/Ripple';var GalleriaThumbnailItem=/*#__PURE__*/function(_Component){_inherits(GalleriaThumbnailItem,_Component);var _super=_createSuper(GalleriaThumbnailItem);function GalleriaThumbnailItem(props){var _this;_classCallCheck(this,GalleriaThumbnailItem);_this=_super.call(this,props);_this.onItemClick=_this.onItemClick.bind(_assertThisInitialized(_this));_this.onItemKeyDown=_this.onItemKeyDown.bind(_assertThisInitialized(_this));return _this;}_createClass(GalleriaThumbnailItem,[{key:\"onItemClick\",value:function onItemClick(event){this.props.onItemClick({originalEvent:event,index:this.props.index});}},{key:\"onItemKeyDown\",value:function onItemKeyDown(event){if(event.which===13){this.props.onItemClick({originalEvent:event,index:this.props.index});}}},{key:\"render\",value:function render(){var content=this.props.template&&this.props.template(this.props.item);var itemClassName=classNames(this.props.className,'p-galleria-thumbnail-item',{'p-galleria-thumbnail-item-current':this.props.current,'p-galleria-thumbnail-item-active':this.props.active,'p-galleria-thumbnail-item-start':this.props.start,'p-galleria-thumbnail-item-end':this.props.end});return/*#__PURE__*/React.createElement(\"div\",{className:itemClassName},/*#__PURE__*/React.createElement(\"div\",{className:\"p-galleria-thumbnail-item-content\",tabIndex:this.props.active?0:null,onClick:this.onItemClick,onKeyDown:this.onItemKeyDown},content));}}]);return GalleriaThumbnailItem;}(Component);GalleriaThumbnailItem.defaultProps={index:null,template:null,item:null,current:false,active:false,start:false,end:false,className:null,onItemClick:null};export var GalleriaThumbnails=/*#__PURE__*/function(_Component2){_inherits(GalleriaThumbnails,_Component2);var _super2=_createSuper(GalleriaThumbnails);function GalleriaThumbnails(props){var _this2;_classCallCheck(this,GalleriaThumbnails);_this2=_super2.call(this,props);_this2.state={numVisible:props.numVisible,totalShiftedItems:0,page:0};_this2.navForward=_this2.navForward.bind(_assertThisInitialized(_this2));_this2.navBackward=_this2.navBackward.bind(_assertThisInitialized(_this2));_this2.onTransitionEnd=_this2.onTransitionEnd.bind(_assertThisInitialized(_this2));_this2.onTouchStart=_this2.onTouchStart.bind(_assertThisInitialized(_this2));_this2.onTouchMove=_this2.onTouchMove.bind(_assertThisInitialized(_this2));_this2.onTouchEnd=_this2.onTouchEnd.bind(_assertThisInitialized(_this2));_this2.onItemClick=_this2.onItemClick.bind(_assertThisInitialized(_this2));return _this2;}_createClass(GalleriaThumbnails,[{key:\"step\",value:function step(dir){var totalShiftedItems=this.state.totalShiftedItems+dir;if(dir<0&&-1*totalShiftedItems+this.state.numVisible>this.props.value.length-1){totalShiftedItems=this.state.numVisible-this.props.value.length;}else if(dir>0&&totalShiftedItems>0){totalShiftedItems=0;}if(this.props.circular){if(dir<0&&this.props.value.length-1===this.props.activeItemIndex){totalShiftedItems=0;}else if(dir>0&&this.props.activeItemIndex===0){totalShiftedItems=this.state.numVisible-this.props.value.length;}}if(this.itemsContainer){DomHandler.removeClass(this.itemsContainer,'p-items-hidden');this.itemsContainer.style.transform=this.props.isVertical?\"translate3d(0, \".concat(totalShiftedItems*(100/this.state.numVisible),\"%, 0)\"):\"translate3d(\".concat(totalShiftedItems*(100/this.state.numVisible),\"%, 0, 0)\");this.itemsContainer.style.transition='transform 500ms ease 0s';}this.setState({totalShiftedItems:totalShiftedItems});}},{key:\"stopSlideShow\",value:function stopSlideShow(){if(this.props.slideShowActive&&this.props.stopSlideShow){this.props.stopSlideShow();}}},{key:\"getMedianItemIndex\",value:function getMedianItemIndex(){var index=Math.floor(this.state.numVisible/2);return this.state.numVisible%2?index:index-1;}},{key:\"navBackward\",value:function navBackward(e){this.stopSlideShow();var prevItemIndex=this.props.activeItemIndex!==0?this.props.activeItemIndex-1:0;var diff=prevItemIndex+this.state.totalShiftedItems;if(this.state.numVisible-diff-1>this.getMedianItemIndex()&&(-1*this.state.totalShiftedItems!==0||this.props.circular)){this.step(1);}this.props.onActiveItemChange({index:this.props.circular&&this.props.activeItemIndex===0?this.props.value.length-1:prevItemIndex});if(e.cancelable){e.preventDefault();}}},{key:\"navForward\",value:function navForward(e){this.stopSlideShow();var nextItemIndex=this.props.activeItemIndex+1;if(nextItemIndex+this.state.totalShiftedItems>this.getMedianItemIndex()&&(-1*this.state.totalShiftedItems<this.getTotalPageNumber()-1||this.props.circular)){this.step(-1);}this.props.onActiveItemChange({index:this.props.circular&&this.props.value.length-1===this.props.activeItemIndex?0:nextItemIndex});if(e.cancelable){e.preventDefault();}}},{key:\"onItemClick\",value:function onItemClick(event){this.stopSlideShow();var selectedItemIndex=event.index;if(selectedItemIndex!==this.props.activeItemIndex){var diff=selectedItemIndex+this.state.totalShiftedItems;var dir=0;if(selectedItemIndex<this.props.activeItemIndex){dir=this.state.numVisible-diff-1-this.getMedianItemIndex();if(dir>0&&-1*this.state.totalShiftedItems!==0){this.step(dir);}}else{dir=this.getMedianItemIndex()-diff;if(dir<0&&-1*this.state.totalShiftedItems<this.getTotalPageNumber()-1){this.step(dir);}}this.props.onActiveItemChange({index:selectedItemIndex});}}},{key:\"onTransitionEnd\",value:function onTransitionEnd(){if(this.itemsContainer){DomHandler.addClass(this.itemsContainer,'p-items-hidden');this.itemsContainer.style.transition='';}}},{key:\"onTouchStart\",value:function onTouchStart(e){var touchobj=e.changedTouches[0];this.startPos={x:touchobj.pageX,y:touchobj.pageY};}},{key:\"onTouchMove\",value:function onTouchMove(e){if(e.cancelable){e.preventDefault();}}},{key:\"onTouchEnd\",value:function onTouchEnd(e){var touchobj=e.changedTouches[0];if(this.props.isVertical){this.changePageOnTouch(e,touchobj.pageY-this.startPos.y);}else{this.changePageOnTouch(e,touchobj.pageX-this.startPos.x);}}},{key:\"changePageOnTouch\",value:function changePageOnTouch(e,diff){if(diff<0){// left\nthis.navForward(e);}else{// right\nthis.navBackward(e);}}},{key:\"getTotalPageNumber\",value:function getTotalPageNumber(){return this.props.value.length>this.state.numVisible?this.props.value.length-this.state.numVisible+1:0;}},{key:\"createStyle\",value:function createStyle(){if(!this.thumbnailsStyle){this.thumbnailsStyle=document.createElement('style');this.thumbnailsStyle.type='text/css';document.body.appendChild(this.thumbnailsStyle);}var innerHTML=\"\\n            #\".concat(this.props.containerId,\" .p-galleria-thumbnail-item {\\n                flex: 1 0 \").concat(100/this.state.numVisible,\"%\\n            }\\n        \");if(this.props.responsiveOptions){this.responsiveOptions=_toConsumableArray(this.props.responsiveOptions);this.responsiveOptions.sort(function(data1,data2){var value1=data1.breakpoint;var value2=data2.breakpoint;var result=null;if(value1==null&&value2!=null)result=-1;else if(value1!=null&&value2==null)result=1;else if(value1==null&&value2==null)result=0;else if(typeof value1==='string'&&typeof value2==='string')result=value1.localeCompare(value2,undefined,{numeric:true});else result=value1<value2?-1:value1>value2?1:0;return-1*result;});for(var i=0;i<this.responsiveOptions.length;i++){var res=this.responsiveOptions[i];innerHTML+=\"\\n                    @media screen and (max-width: \".concat(res.breakpoint,\") {\\n                        #\").concat(this.props.containerId,\" .p-galleria-thumbnail-item {\\n                            flex: 1 0 \").concat(100/res.numVisible,\"%\\n                        }\\n                    }\\n                \");}}this.thumbnailsStyle.innerHTML=innerHTML;}},{key:\"calculatePosition\",value:function calculatePosition(){if(this.itemsContainer&&this.responsiveOptions){var windowWidth=window.innerWidth;var matchedResponsiveData={numVisible:this.props.numVisible};for(var i=0;i<this.responsiveOptions.length;i++){var res=this.responsiveOptions[i];if(parseInt(res.breakpoint,10)>=windowWidth){matchedResponsiveData=res;}}if(this.state.numVisible!==matchedResponsiveData.numVisible){this.setState({numVisible:matchedResponsiveData.numVisible});}}}},{key:\"bindDocumentListeners\",value:function bindDocumentListeners(){var _this3=this;if(!this.documentResizeListener){this.documentResizeListener=function(){_this3.calculatePosition();};window.addEventListener('resize',this.documentResizeListener);}}},{key:\"unbindDocumentListeners\",value:function unbindDocumentListeners(){if(this.documentResizeListener){window.removeEventListener('resize',this.documentResizeListener);this.documentResizeListener=null;}}},{key:\"componentDidMount\",value:function componentDidMount(){this.createStyle();this.calculatePosition();if(this.props.responsiveOptions){this.bindDocumentListeners();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var totalShiftedItems=this.state.totalShiftedItems;if(prevState.numVisible!==this.state.numVisible||prevProps.activeItemIndex!==this.props.activeItemIndex){if(this.props.activeItemIndex<=this.getMedianItemIndex()){totalShiftedItems=0;}else if(this.props.value.length-this.state.numVisible+this.getMedianItemIndex()<this.props.activeItemIndex){totalShiftedItems=this.state.numVisible-this.props.value.length;}else if(this.props.value.length-this.state.numVisible<this.props.activeItemIndex&&this.state.numVisible%2===0){totalShiftedItems=this.props.activeItemIndex*-1+this.getMedianItemIndex()+1;}else{totalShiftedItems=this.props.activeItemIndex*-1+this.getMedianItemIndex();}if(totalShiftedItems!==this.state.totalShiftedItems){this.setState({totalShiftedItems:totalShiftedItems});}this.itemsContainer.style.transform=this.props.isVertical?\"translate3d(0, \".concat(totalShiftedItems*(100/this.state.numVisible),\"%, 0)\"):\"translate3d(\".concat(totalShiftedItems*(100/this.state.numVisible),\"%, 0, 0)\");if(prevProps.activeItemIndex!==this.props.activeItemIndex){DomHandler.removeClass(this.itemsContainer,'p-items-hidden');this.itemsContainer.style.transition='transform 500ms ease 0s';}}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.props.responsiveOptions){this.unbindDocumentListeners();}}},{key:\"renderItems\",value:function renderItems(){var _this4=this;return this.props.value.map(function(item,index){var firstIndex=_this4.state.totalShiftedItems*-1,lastIndex=firstIndex+_this4.state.numVisible-1,isActive=firstIndex<=index&&lastIndex>=index,start=firstIndex===index,end=lastIndex===index,current=_this4.props.activeItemIndex===index;return/*#__PURE__*/React.createElement(GalleriaThumbnailItem,{key:index,index:index,template:_this4.props.itemTemplate,item:item,active:isActive,start:start,end:end,onItemClick:_this4.onItemClick,current:current});});}},{key:\"renderBackwardNavigator\",value:function renderBackwardNavigator(){if(this.props.showThumbnailNavigators){var isDisabled=!this.props.circular&&this.props.activeItemIndex===0||this.props.value.length<=this.state.numVisible;var buttonClassName=classNames('p-galleria-thumbnail-prev p-link',{'p-disabled':isDisabled}),iconClassName=classNames('p-galleria-thumbnail-prev-icon pi',{'pi-chevron-left':!this.props.isVertical,'pi-chevron-up':this.props.isVertical});return/*#__PURE__*/React.createElement(\"button\",{className:buttonClassName,onClick:this.navBackward,disabled:isDisabled},/*#__PURE__*/React.createElement(\"span\",{className:iconClassName}),/*#__PURE__*/React.createElement(Ripple,null));}return null;}},{key:\"renderForwardNavigator\",value:function renderForwardNavigator(){if(this.props.showThumbnailNavigators){var isDisabled=!this.props.circular&&this.props.activeItemIndex===this.props.value.length-1||this.props.value.length<=this.state.numVisible;var buttonClassName=classNames('p-galleria-thumbnail-next p-link',{'p-disabled':isDisabled}),iconClassName=classNames('p-galleria-thumbnail-next-icon pi',{'pi-chevron-right':!this.props.isVertical,'pi-chevron-down':this.props.isVertical});return/*#__PURE__*/React.createElement(\"button\",{className:buttonClassName,onClick:this.navForward,disabled:isDisabled},/*#__PURE__*/React.createElement(\"span\",{className:iconClassName}),/*#__PURE__*/React.createElement(Ripple,null));}return null;}},{key:\"renderContent\",value:function renderContent(){var _this5=this;var items=this.renderItems();var height=this.props.isVertical?this.props.contentHeight:'';var backwardNavigator=this.renderBackwardNavigator();var forwardNavigator=this.renderForwardNavigator();return/*#__PURE__*/React.createElement(\"div\",{className:\"p-galleria-thumbnail-container\"},backwardNavigator,/*#__PURE__*/React.createElement(\"div\",{className:\"p-galleria-thumbnail-items-container\",style:{'height':height}},/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this5.itemsContainer=el;},className:\"p-galleria-thumbnail-items\",onTransitionEnd:this.onTransitionEnd,onTouchStart:this.onTouchStart,onTouchMove:this.onTouchMove,onTouchEnd:this.onTouchEnd},items)),forwardNavigator);}},{key:\"render\",value:function render(){var content=this.renderContent();return/*#__PURE__*/React.createElement(\"div\",{className:\"p-galleria-thumbnail-wrapper\"},content);}}]);return GalleriaThumbnails;}(Component);","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/slotmaster-dashboard/src/components/galleria/GalleriaThumbnails.js"],"names":["React","Component","classNames","DomHandler","Ripple","GalleriaThumbnailItem","props","onItemClick","bind","onItemKeyDown","event","originalEvent","index","which","content","template","item","itemClassName","className","current","active","start","end","defaultProps","GalleriaThumbnails","state","numVisible","totalShiftedItems","page","navForward","navBackward","onTransitionEnd","onTouchStart","onTouchMove","onTouchEnd","dir","value","length","circular","activeItemIndex","itemsContainer","removeClass","style","transform","isVertical","transition","setState","slideShowActive","stopSlideShow","Math","floor","e","prevItemIndex","diff","getMedianItemIndex","step","onActiveItemChange","cancelable","preventDefault","nextItemIndex","getTotalPageNumber","selectedItemIndex","addClass","touchobj","changedTouches","startPos","x","pageX","y","pageY","changePageOnTouch","thumbnailsStyle","document","createElement","type","body","appendChild","innerHTML","containerId","responsiveOptions","sort","data1","data2","value1","breakpoint","value2","result","localeCompare","undefined","numeric","i","res","windowWidth","window","innerWidth","matchedResponsiveData","parseInt","documentResizeListener","calculatePosition","addEventListener","removeEventListener","createStyle","bindDocumentListeners","prevProps","prevState","unbindDocumentListeners","map","firstIndex","lastIndex","isActive","itemTemplate","showThumbnailNavigators","isDisabled","buttonClassName","iconClassName","items","renderItems","height","contentHeight","backwardNavigator","renderBackwardNavigator","forwardNavigator","renderForwardNavigator","el","renderContent"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport { Ripple } from '../ripple/Ripple';\r\n\r\nclass GalleriaThumbnailItem extends Component {\r\n\r\n    static defaultProps = {\r\n        index: null,\r\n        template: null,\r\n        item: null,\r\n        current: false,\r\n        active: false,\r\n        start: false,\r\n        end: false,\r\n        className: null,\r\n        onItemClick: null\r\n    }\r\n\r\n    static propTypes = {\r\n        index: PropTypes.number,\r\n        template: PropTypes.func,\r\n        item: PropTypes.any,\r\n        current: PropTypes.bool,\r\n        active: PropTypes.bool,\r\n        start: PropTypes.bool,\r\n        end: PropTypes.bool,\r\n        className: PropTypes.string,\r\n        onItemClick: PropTypes.func\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onItemClick = this.onItemClick.bind(this);\r\n        this.onItemKeyDown = this.onItemKeyDown.bind(this);\r\n    }\r\n\r\n    onItemClick(event) {\r\n        this.props.onItemClick({\r\n            originalEvent: event,\r\n            index: this.props.index\r\n        });\r\n    }\r\n\r\n    onItemKeyDown(event) {\r\n        if (event.which === 13) {\r\n            this.props.onItemClick({\r\n                originalEvent: event,\r\n                index: this.props.index\r\n            });\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const content = this.props.template && this.props.template(this.props.item);\r\n        const itemClassName = classNames(this.props.className, 'p-galleria-thumbnail-item', {\r\n            'p-galleria-thumbnail-item-current': this.props.current,\r\n            'p-galleria-thumbnail-item-active': this.props.active,\r\n            'p-galleria-thumbnail-item-start': this.props.start,\r\n            'p-galleria-thumbnail-item-end': this.props.end\r\n        });\r\n\r\n        return (\r\n            <div className={itemClassName}>\r\n                <div className=\"p-galleria-thumbnail-item-content\" tabIndex={this.props.active ? 0 : null} onClick={this.onItemClick} onKeyDown={this.onItemKeyDown}>\r\n                    { content }\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport class GalleriaThumbnails extends Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            numVisible: props.numVisible,\r\n            totalShiftedItems: 0,\r\n            page: 0\r\n        }\r\n\r\n        this.navForward = this.navForward.bind(this);\r\n        this.navBackward = this.navBackward.bind(this);\r\n        this.onTransitionEnd = this.onTransitionEnd.bind(this);\r\n        this.onTouchStart = this.onTouchStart.bind(this);\r\n        this.onTouchMove = this.onTouchMove.bind(this);\r\n        this.onTouchEnd = this.onTouchEnd.bind(this);\r\n        this.onItemClick = this.onItemClick.bind(this);\r\n    }\r\n\r\n    step(dir) {\r\n        let totalShiftedItems = this.state.totalShiftedItems + dir;\r\n\r\n        if (dir < 0 && (-1 * totalShiftedItems) + this.state.numVisible > (this.props.value.length - 1)) {\r\n            totalShiftedItems = this.state.numVisible - this.props.value.length;\r\n        }\r\n        else if (dir > 0 && totalShiftedItems > 0) {\r\n            totalShiftedItems = 0;\r\n        }\r\n\r\n        if (this.props.circular) {\r\n            if (dir < 0 && this.props.value.length - 1 === this.props.activeItemIndex) {\r\n                totalShiftedItems = 0;\r\n            }\r\n            else if (dir > 0 && this.props.activeItemIndex === 0) {\r\n                totalShiftedItems = this.state.numVisible - this.props.value.length;\r\n            }\r\n        }\r\n\r\n        if (this.itemsContainer) {\r\n            DomHandler.removeClass(this.itemsContainer, 'p-items-hidden');\r\n            this.itemsContainer.style.transform = this.props.isVertical ? `translate3d(0, ${totalShiftedItems * (100/ this.state.numVisible)}%, 0)` : `translate3d(${totalShiftedItems * (100/ this.state.numVisible)}%, 0, 0)`;\r\n            this.itemsContainer.style.transition = 'transform 500ms ease 0s';\r\n        }\r\n\r\n        this.setState({\r\n            totalShiftedItems\r\n        });\r\n    }\r\n\r\n    stopSlideShow() {\r\n        if (this.props.slideShowActive && this.props.stopSlideShow) {\r\n            this.props.stopSlideShow();\r\n        }\r\n    }\r\n\r\n    getMedianItemIndex() {\r\n        let index = Math.floor(this.state.numVisible / 2);\r\n\r\n        return (this.state.numVisible % 2) ? index : index - 1;\r\n    }\r\n\r\n    navBackward(e) {\r\n        this.stopSlideShow();\r\n\r\n        let prevItemIndex = this.props.activeItemIndex !== 0 ? this.props.activeItemIndex - 1 : 0;\r\n        let diff = prevItemIndex + this.state.totalShiftedItems;\r\n        if ((this.state.numVisible - diff - 1) > this.getMedianItemIndex() && ((-1 * this.state.totalShiftedItems) !== 0 || this.props.circular)) {\r\n            this.step(1);\r\n        }\r\n\r\n        this.props.onActiveItemChange({\r\n            index: this.props.circular && this.props.activeItemIndex === 0 ? this.props.value.length - 1 : prevItemIndex\r\n        });\r\n\r\n        if (e.cancelable) {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    navForward(e) {\r\n        this.stopSlideShow();\r\n\r\n        let nextItemIndex = this.props.activeItemIndex + 1;\r\n        if (nextItemIndex + this.state.totalShiftedItems > this.getMedianItemIndex() && ((-1 * this.state.totalShiftedItems) < this.getTotalPageNumber() - 1 || this.props.circular)) {\r\n            this.step(-1);\r\n        }\r\n\r\n        this.props.onActiveItemChange({\r\n            index: this.props.circular && (this.props.value.length - 1) === this.props.activeItemIndex ? 0 : nextItemIndex\r\n        });\r\n\r\n        if (e.cancelable) {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    onItemClick(event) {\r\n        this.stopSlideShow();\r\n\r\n        let selectedItemIndex = event.index;\r\n        if (selectedItemIndex !== this.props.activeItemIndex) {\r\n            const diff = selectedItemIndex + this.state.totalShiftedItems;\r\n            let dir = 0;\r\n            if (selectedItemIndex < this.props.activeItemIndex) {\r\n                dir = (this.state.numVisible - diff - 1) - this.getMedianItemIndex();\r\n                if (dir > 0 && (-1 * this.state.totalShiftedItems) !== 0) {\r\n                    this.step(dir);\r\n                }\r\n            }\r\n            else {\r\n                dir = this.getMedianItemIndex() - diff;\r\n                if (dir < 0 && (-1 * this.state.totalShiftedItems) < this.getTotalPageNumber() - 1) {\r\n                    this.step(dir);\r\n                }\r\n            }\r\n\r\n            this.props.onActiveItemChange({\r\n                index: selectedItemIndex\r\n            });\r\n        }\r\n    }\r\n\r\n    onTransitionEnd() {\r\n        if (this.itemsContainer) {\r\n            DomHandler.addClass(this.itemsContainer, 'p-items-hidden');\r\n            this.itemsContainer.style.transition = '';\r\n        }\r\n    }\r\n\r\n    onTouchStart(e) {\r\n        let touchobj = e.changedTouches[0];\r\n\r\n        this.startPos = {\r\n            x: touchobj.pageX,\r\n            y: touchobj.pageY\r\n        };\r\n    }\r\n\r\n    onTouchMove(e) {\r\n        if (e.cancelable) {\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    onTouchEnd(e) {\r\n        let touchobj = e.changedTouches[0];\r\n\r\n        if (this.props.isVertical) {\r\n            this.changePageOnTouch(e, (touchobj.pageY - this.startPos.y));\r\n        }\r\n        else {\r\n            this.changePageOnTouch(e, (touchobj.pageX - this.startPos.x));\r\n        }\r\n    }\r\n\r\n    changePageOnTouch(e, diff) {\r\n        if (diff < 0) {           // left\r\n            this.navForward(e);\r\n        }\r\n        else {                    // right\r\n            this.navBackward(e);\r\n        }\r\n    }\r\n\r\n    getTotalPageNumber() {\r\n        return this.props.value.length > this.state.numVisible ? (this.props.value.length - this.state.numVisible) + 1 : 0;\r\n    }\r\n\r\n    createStyle() {\r\n        if (!this.thumbnailsStyle) {\r\n            this.thumbnailsStyle = document.createElement('style');\r\n            this.thumbnailsStyle.type = 'text/css';\r\n            document.body.appendChild(this.thumbnailsStyle);\r\n        }\r\n\r\n        let innerHTML = `\r\n            #${this.props.containerId} .p-galleria-thumbnail-item {\r\n                flex: 1 0 ${ (100/ this.state.numVisible) }%\r\n            }\r\n        `;\r\n\r\n        if (this.props.responsiveOptions) {\r\n            this.responsiveOptions = [...this.props.responsiveOptions];\r\n            this.responsiveOptions.sort((data1, data2) => {\r\n                const value1 = data1.breakpoint;\r\n                const value2 = data2.breakpoint;\r\n                let result = null;\r\n\r\n                if (value1 == null && value2 != null)\r\n                    result = -1;\r\n                else if (value1 != null && value2 == null)\r\n                    result = 1;\r\n                else if (value1 == null && value2 == null)\r\n                    result = 0;\r\n                else if (typeof value1 === 'string' && typeof value2 === 'string')\r\n                    result = value1.localeCompare(value2, undefined, { numeric: true });\r\n                else\r\n                    result = (value1 < value2) ? -1 : (value1 > value2) ? 1 : 0;\r\n\r\n                return -1 * result;\r\n            });\r\n\r\n            for (let i = 0; i < this.responsiveOptions.length; i++) {\r\n                let res = this.responsiveOptions[i];\r\n\r\n                innerHTML += `\r\n                    @media screen and (max-width: ${res.breakpoint}) {\r\n                        #${this.props.containerId} .p-galleria-thumbnail-item {\r\n                            flex: 1 0 ${ (100/ res.numVisible) }%\r\n                        }\r\n                    }\r\n                `\r\n            }\r\n        }\r\n\r\n        this.thumbnailsStyle.innerHTML = innerHTML;\r\n    }\r\n\r\n    calculatePosition() {\r\n        if (this.itemsContainer && this.responsiveOptions) {\r\n            let windowWidth = window.innerWidth;\r\n            let matchedResponsiveData = {\r\n                numVisible: this.props.numVisible\r\n            };\r\n\r\n            for (let i = 0; i < this.responsiveOptions.length; i++) {\r\n                let res = this.responsiveOptions[i];\r\n\r\n                if (parseInt(res.breakpoint, 10) >= windowWidth) {\r\n                    matchedResponsiveData = res;\r\n                }\r\n            }\r\n\r\n            if (this.state.numVisible !== matchedResponsiveData.numVisible) {\r\n                this.setState({\r\n                    numVisible: matchedResponsiveData.numVisible\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    bindDocumentListeners() {\r\n        if (!this.documentResizeListener) {\r\n            this.documentResizeListener = () => {\r\n                this.calculatePosition();\r\n            };\r\n\r\n            window.addEventListener('resize', this.documentResizeListener);\r\n        }\r\n    }\r\n\r\n    unbindDocumentListeners() {\r\n        if(this.documentResizeListener) {\r\n            window.removeEventListener('resize', this.documentResizeListener);\r\n            this.documentResizeListener = null;\r\n        }\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.createStyle();\r\n        this.calculatePosition();\r\n\r\n        if (this.props.responsiveOptions) {\r\n            this.bindDocumentListeners();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        let totalShiftedItems = this.state.totalShiftedItems;\r\n\r\n        if (prevState.numVisible !== this.state.numVisible || prevProps.activeItemIndex !== this.props.activeItemIndex) {\r\n            if (this.props.activeItemIndex <= this.getMedianItemIndex()) {\r\n                totalShiftedItems = 0;\r\n            }\r\n            else if (this.props.value.length - this.state.numVisible + this.getMedianItemIndex() < this.props.activeItemIndex) {\r\n                totalShiftedItems = this.state.numVisible - this.props.value.length;\r\n            }\r\n            else if (this.props.value.length - this.state.numVisible < this.props.activeItemIndex && this.state.numVisible % 2 === 0) {\r\n                totalShiftedItems = (this.props.activeItemIndex * -1) + this.getMedianItemIndex() + 1;\r\n            }\r\n            else {\r\n                totalShiftedItems = (this.props.activeItemIndex * -1) + this.getMedianItemIndex();\r\n            }\r\n\r\n            if (totalShiftedItems !== this.state.totalShiftedItems) {\r\n                this.setState({\r\n                    totalShiftedItems\r\n                })\r\n            }\r\n\r\n            this.itemsContainer.style.transform = this.props.isVertical ? `translate3d(0, ${totalShiftedItems * (100/ this.state.numVisible)}%, 0)` : `translate3d(${totalShiftedItems * (100/ this.state.numVisible)}%, 0, 0)`;\r\n\r\n            if (prevProps.activeItemIndex !== this.props.activeItemIndex) {\r\n                DomHandler.removeClass(this.itemsContainer, 'p-items-hidden');\r\n                this.itemsContainer.style.transition = 'transform 500ms ease 0s';\r\n            }\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.props.responsiveOptions) {\r\n            this.unbindDocumentListeners();\r\n        }\r\n    }\r\n\r\n    renderItems() {\r\n        return this.props.value.map((item, index) => {\r\n                        let firstIndex = this.state.totalShiftedItems * -1,\r\n                        lastIndex = firstIndex + this.state.numVisible - 1,\r\n                        isActive = firstIndex <= index && lastIndex >= index,\r\n                        start = firstIndex === index,\r\n                        end = lastIndex === index,\r\n                        current = this.props.activeItemIndex === index;\r\n\r\n                        return <GalleriaThumbnailItem key={index} index={index} template={this.props.itemTemplate} item={item} active={isActive} start={start} end={end}\r\n                            onItemClick={this.onItemClick} current={current}/>\r\n                    });\r\n    }\r\n\r\n    renderBackwardNavigator() {\r\n        if (this.props.showThumbnailNavigators) {\r\n            let isDisabled = (!this.props.circular && this.props.activeItemIndex === 0) || (this.props.value.length <= this.state.numVisible);\r\n            let buttonClassName = classNames('p-galleria-thumbnail-prev p-link', {\r\n                'p-disabled': isDisabled\r\n            }),\r\n            iconClassName = classNames('p-galleria-thumbnail-prev-icon pi', {\r\n                'pi-chevron-left': !this.props.isVertical,\r\n                'pi-chevron-up': this.props.isVertical\r\n            });\r\n\r\n            return (\r\n                <button className={buttonClassName} onClick={this.navBackward} disabled={isDisabled}>\r\n                    <span className={iconClassName}></span>\r\n                    <Ripple />\r\n                </button>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    renderForwardNavigator() {\r\n        if (this.props.showThumbnailNavigators) {\r\n            let isDisabled = (!this.props.circular && this.props.activeItemIndex === (this.props.value.length - 1)) || (this.props.value.length <= this.state.numVisible);\r\n            let buttonClassName = classNames('p-galleria-thumbnail-next p-link', {\r\n                'p-disabled': isDisabled\r\n            }),\r\n            iconClassName = classNames('p-galleria-thumbnail-next-icon pi', {\r\n                'pi-chevron-right': !this.props.isVertical,\r\n                'pi-chevron-down': this.props.isVertical\r\n            });\r\n\r\n            return (\r\n                <button className={buttonClassName} onClick={this.navForward} disabled={isDisabled}>\r\n                    <span className={iconClassName}></span>\r\n                    <Ripple />\r\n                </button>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    renderContent() {\r\n        const items = this.renderItems();\r\n        const height = this.props.isVertical ? this.props.contentHeight : '';\r\n        const backwardNavigator = this.renderBackwardNavigator();\r\n        const forwardNavigator = this.renderForwardNavigator();\r\n\r\n        return (\r\n            <div className=\"p-galleria-thumbnail-container\">\r\n                { backwardNavigator }\r\n                <div className=\"p-galleria-thumbnail-items-container\" style={{'height': height}}>\r\n                    <div ref={(el) => this.itemsContainer = el} className=\"p-galleria-thumbnail-items\" onTransitionEnd={this.onTransitionEnd}\r\n                        onTouchStart={this.onTouchStart} onTouchMove={this.onTouchMove} onTouchEnd={this.onTouchEnd}>\r\n                        { items }\r\n                    </div>\r\n                </div>\r\n                { forwardNavigator }\r\n            </div>\r\n        );\r\n    }\r\n\r\n    render() {\r\n        const content = this.renderContent();\r\n\r\n        return (\r\n            <div className=\"p-galleria-thumbnail-wrapper\">\r\n                { content }\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}