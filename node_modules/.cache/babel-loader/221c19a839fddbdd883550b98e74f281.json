{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Column}from\"../../../components/column/Column\";import{DataTable}from\"../../../components/datatable/DataTable\";import React,{useEffect,useState}from\"react\";import{Actions}from\"../../../core\";import{ProgressBar}from\"../../../components/progressbar/ProgressBar\";import classNames from\"classnames\";import{confirmDialog}from\"../../../components/confirmdialog/ConfirmDialog\";import{Button}from\"../../../components/button/Button\";import{Dialog}from\"../../../components/dialog/Dialog\";import{InputText}from\"../../../components/inputtext/InputText\";import{Dropdown}from\"../../../components/dropdown/Dropdown\";export var ProviderActions=function ProviderActions(_ref){var provider=_ref.provider,onEvent=_ref.onEvent;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loader=_useState4[0],setLoader=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),type=_useState6[0],setType=_useState6[1];var _useState7=useState({id:\"\",name:\"\"}),_useState8=_slicedToArray(_useState7,2),current=_useState8[0],setCurrent=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),selected=_useState10[0],setSelected=_useState10[1];useEffect(function(){if(provider){loadData(provider.id);}else{setData([]);}},[provider]);useEffect(function(){if(selected){setCurrent(_objectSpread({},selected));}},[selected]);useEffect(function(){if(type===\"insert\"){setCurrent({id:\"\",name:\"\"});}},[type]);var loadData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoader(true);_context.next=3;return Actions.Providers.Actions(id);case 3:response=_context.sent;setLoader(false);setData(response.status?response.data.data:[]);case 6:case\"end\":return _context.stop();}}},_callee);}));return function loadData(_x){return _ref2.apply(this,arguments);};}();var onDelete=function onDelete(){if(selected){confirmDialog({message:'Do you want to delete this record?',header:'Delete Confirmation',icon:'pi pi-info-circle',acceptClassName:'p-button-danger',accept:function(){var _accept=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Actions.Providers.DeleteAction({actionId:selected.id,providerId:provider.id});case 2:response=_context2.sent;parseResponse(response);case 4:case\"end\":return _context2.stop();}}},_callee2);}));function accept(){return _accept.apply(this,arguments);}return accept;}(),reject:function reject(){return console.log(\"reject\");}});}};var parseResponse=function parseResponse(response){if(response.status){if(response.data.data===1){loadData(provider.id);onEvent({severity:'success',summary:'Success Message',detail:'Message Content',life:3000});}else{onEvent({severity:'info',summary:'Rejected',detail:'Maybe this already deleted',life:3000});}}else{onEvent({severity:'error',summary:'Rejected',detail:'You have rejected',life:3000});}};var onAction=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(type===\"insert\")){_context3.next=7;break;}_context3.next=3;return Actions.Providers.InsertAction({actionId:current.id,providerId:provider.id,name:current.name});case 3:response=_context3.sent;parseResponse({status:response.status,data:response.status?{data:1}:{data:0}});_context3.next=11;break;case 7:_context3.next=9;return Actions.Providers.UpdateAction({actionId:current.id,providerId:provider.id,name:current.name});case 9:response=_context3.sent;parseResponse({status:response.status,data:response.status?{data:1}:{data:0}});case 11:if(response.status){setType(null);}case 12:case\"end\":return _context3.stop();}}},_callee3);}));return function onAction(){return _ref3.apply(this,arguments);};}();var renderFooter=function renderFooter(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{label:\"No\",icon:\"pi pi-times\",onClick:function onClick(){setType(null);},className:\"p-button-text\"}),/*#__PURE__*/React.createElement(Button,{label:\"Yes\",icon:\"pi pi-check\",onClick:function onClick(){return onAction();},autoFocus:true}));};var renderHeader=function renderHeader(){return type===\"insert\"?\"New Action(\".concat(provider.name,\")\"):\"Update Action (\".concat(provider.name,\")\");};var visible=function visible(){if(!provider){return;}if(type===\"insert\"){return true;}else if(type===\"update\"&&selected){return true;}return false;};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Dialog,{header:renderHeader,visible:visible(),style:{width:'50vw'},footer:renderFooter,onHide:function onHide(){return setType(null);}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-fluid\",style:{height:\"\".concat(type===\"insert\"?\"140px\":\"70px\")}},type===\"insert\"&&/*#__PURE__*/React.createElement(\"div\",{className:\"p-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"id\"},\"Action Id\"),/*#__PURE__*/React.createElement(InputText,{id:\"id\",type:\"number\",value:current.id,onChange:function onChange(event){return setCurrent(_objectSpread(_objectSpread({},current),{},{id:event.target.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"p-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"gName\"},\"Action Name\"),/*#__PURE__*/React.createElement(InputText,{id:\"gName\",type:\"text\",value:current.name,onChange:function onChange(event){return setCurrent(_objectSpread(_objectSpread({},current),{},{name:event.target.value}));}})))),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-box call\",style:{flex:'1',marginLeft:'10px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},/*#__PURE__*/React.createElement(\"div\",null,\"Provider Actions\"),/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-plus\",onClick:function onClick(){setSelected(null);setType(\"insert\");}}),/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-pencil\",onClick:function onClick(){return setType(\"update\");}}),/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-trash\",onClick:onDelete})),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-cont grid\"},loader&&/*#__PURE__*/React.createElement(ProgressBar,{style:{height:'6px'},mode:\"indeterminate\"}),/*#__PURE__*/React.createElement(DataTable,{selection:selected,onSelectionChange:function onSelectionChange(e){return setSelected(e.value);},selectionMode:\"single\",dataKey:\"id\",scrollable:true,value:data,className:\"p-datatable-gridlines\",rowClassName:function rowClassName(data){return{'bg-red':data.disabled===1};}},/*#__PURE__*/React.createElement(Column,{field:\"id\",header:\"ID\"}),/*#__PURE__*/React.createElement(Column,{field:\"name\",header:\"Name\",filter:true,filterPlaceholder:\"Search by name\"})))));};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/views/transferProviders/components/providerActions.js"],"names":["Column","DataTable","React","useEffect","useState","Actions","ProgressBar","classNames","confirmDialog","Button","Dialog","InputText","Dropdown","ProviderActions","provider","onEvent","data","setData","loader","setLoader","type","setType","id","name","current","setCurrent","selected","setSelected","loadData","Providers","response","status","onDelete","message","header","icon","acceptClassName","accept","DeleteAction","actionId","providerId","parseResponse","reject","console","log","severity","summary","detail","life","onAction","InsertAction","UpdateAction","renderFooter","renderHeader","visible","width","height","event","target","value","flex","marginLeft","e","disabled"],"mappings":"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","sourcesContent":["import {Column} from \"../../../components/column/Column\";\r\nimport {DataTable} from \"../../../components/datatable/DataTable\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {Actions} from \"../../../core\";\r\nimport {ProgressBar} from \"../../../components/progressbar/ProgressBar\";\r\nimport classNames from \"classnames\";\r\nimport {confirmDialog} from \"../../../components/confirmdialog/ConfirmDialog\";\r\nimport {Button} from \"../../../components/button/Button\";\r\nimport {Dialog} from \"../../../components/dialog/Dialog\";\r\nimport {InputText} from \"../../../components/inputtext/InputText\";\r\nimport {Dropdown} from \"../../../components/dropdown/Dropdown\";\r\n\r\nexport const ProviderActions = ({provider,onEvent}) =>{\r\n    const [data,setData]=useState(null)\r\n    const [loader,setLoader]=useState(false)\r\n    const [type,setType]=useState(null)\r\n    const [current,setCurrent]=useState({\r\n        id:\"\",\r\n        name:\"\"\r\n    })\r\n    const [selected,setSelected]=useState(null)\r\n    useEffect(()=>{\r\n        if(provider){\r\n            loadData(provider.id)\r\n        }else {\r\n            setData([])\r\n        }\r\n    },[provider])\r\n    useEffect(()=>{\r\n        if(selected){\r\n            setCurrent({...selected})\r\n        }\r\n    },[selected])\r\n    useEffect(()=>{\r\n        if(type===\"insert\"){\r\n            setCurrent({\r\n                id:\"\",\r\n                name:\"\"\r\n            })\r\n        }\r\n\r\n    },[type])\r\n    const loadData = async (id) => {\r\n        setLoader(true)\r\n        const response = await Actions.Providers.Actions(id);\r\n        setLoader(false)\r\n        setData(response.status?response.data.data:[])\r\n    }\r\n    const onDelete=()=>{\r\n        if(selected){\r\n            confirmDialog({\r\n                message: 'Do you want to delete this record?',\r\n                header: 'Delete Confirmation',\r\n                icon: 'pi pi-info-circle',\r\n                acceptClassName: 'p-button-danger',\r\n                accept: async () => {\r\n                    const response = await Actions.Providers.DeleteAction({actionId:selected.id,providerId:provider.id})\r\n                    parseResponse(response)\r\n                },\r\n                reject: ()=>console.log(\"reject\")\r\n            });\r\n        }\r\n    }\r\n    const parseResponse = (response) =>{\r\n        if(response.status){\r\n            if(response.data.data===1){\r\n                loadData(provider.id);\r\n                onEvent({severity:'success', summary: 'Success Message', detail:'Message Content', life: 3000})\r\n            }else{\r\n                onEvent({ severity: 'info', summary: 'Rejected', detail: 'Maybe this already deleted', life: 3000 })\r\n            }\r\n        }else{\r\n            onEvent({ severity: 'error', summary: 'Rejected', detail: 'You have rejected', life: 3000 })\r\n        }\r\n    }\r\n    const onAction=async () => {\r\n        let response;\r\n        if (type === \"insert\") {\r\n            response = await Actions.Providers.InsertAction({actionId:current.id,providerId:provider.id,name:current.name})\r\n            parseResponse({\r\n                status:response.status,\r\n                data:response.status? {data:1}:{data:0}\r\n            })\r\n        } else {\r\n            response = await Actions.Providers.UpdateAction({actionId:current.id,providerId:provider.id,name:current.name})\r\n            parseResponse({\r\n                status:response.status,\r\n                data:response.status? {data:1}:{data:0}\r\n            })\r\n        }\r\n        if(response.status){\r\n            setType(null)\r\n        }\r\n    }\r\n    const renderFooter=()=>{\r\n        return (\r\n            <div>\r\n                <Button label=\"No\" icon=\"pi pi-times\" onClick={() => {\r\n                    setType(null);\r\n                }} className=\"p-button-text\" />\r\n                <Button label=\"Yes\" icon=\"pi pi-check\" onClick={() =>onAction()} autoFocus />\r\n            </div>\r\n        );\r\n    }\r\n    const renderHeader=()=>{\r\n        return  type===\"insert\"? `New Action(${provider.name})`:`Update Action (${provider.name})`\r\n    };\r\n    const visible=()=>{\r\n        if(!provider){\r\n            return;\r\n        }\r\n        if(type===\"insert\"){\r\n            return true;\r\n        }else if(type===\"update\" && selected){\r\n            return true;\r\n        }\r\n        return false\r\n    }\r\n    return (\r\n        <>\r\n            <Dialog header={renderHeader} visible={visible()} style={{ width: '50vw' }} footer={renderFooter} onHide={() => setType(null)}>\r\n                <div className=\"p-fluid\" style={{height:`${type===\"insert\"?\"140px\":\"70px\"}`}}>\r\n                    {\r\n                        type===\"insert\" &&<div className=\"p-field\">\r\n                            <label htmlFor=\"id\">Action Id</label>\r\n                            <InputText id=\"id\" type=\"number\"  value={current.id} onChange={event => setCurrent({...current,id:event.target.value})}/>\r\n                        </div>\r\n                    }\r\n\r\n                    <div className=\"p-field\">\r\n                        <label htmlFor=\"gName\">Action Name</label>\r\n                        <InputText id=\"gName\" type=\"text\"  value={current.name} onChange={event => setCurrent({...current,name:event.target.value})}/>\r\n                    </div>\r\n                </div>\r\n            </Dialog>\r\n\r\n            <div className=\"flex-box call\" style={{flex:'1',marginLeft:'10px'}}>\r\n                <div className=\"title\">\r\n                    <div>Provider Actions</div>\r\n                    <i className=\"pi pi-plus\" onClick={()=>{\r\n                        setSelected(null)\r\n                        setType(\"insert\")}}/>\r\n                    <i className=\"pi pi-pencil\" onClick={()=>setType(\"update\")}/>\r\n                    <i className=\"pi pi-trash\" onClick={onDelete}/>\r\n                </div>\r\n                <div className=\"flex-cont grid\">\r\n                    {loader && <ProgressBar style={{ height: '6px' }} mode=\"indeterminate\" />}\r\n                    <DataTable\r\n                        selection={selected} onSelectionChange={e => setSelected(e.value)} selectionMode=\"single\" dataKey=\"id\"\r\n                        scrollable value={data}  className=\"p-datatable-gridlines\" rowClassName={data => {\r\n                        return {\r\n                            'bg-red': data.disabled === 1\r\n                        }\r\n                    }}>\r\n                        <Column field=\"id\" header=\"ID\"/>\r\n                        <Column field=\"name\" header=\"Name\" filter  filterPlaceholder=\"Search by name\"/>\r\n                    </DataTable>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </>\r\n\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}