{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{classNames}from'../utils/ClassNames';import UniqueComponentId from'../utils/UniqueComponentId';export var Knob=/*#__PURE__*/function(_Component){_inherits(Knob,_Component);var _super=_createSuper(Knob);function Knob(props){var _this;_classCallCheck(this,Knob);_this=_super.call(this,props);_this.state={};_this.radius=40;_this.midX=50;_this.midY=50;_this.minRadians=4*Math.PI/3;_this.maxRadians=-Math.PI/3;_this.id=_this.props.id||UniqueComponentId();_this.onClick=_this.onClick.bind(_assertThisInitialized(_this));_this.onMouseDown=_this.onMouseDown.bind(_assertThisInitialized(_this));_this.onMouseUp=_this.onMouseUp.bind(_assertThisInitialized(_this));_this.onTouchStart=_this.onTouchStart.bind(_assertThisInitialized(_this));_this.onTouchEnd=_this.onTouchEnd.bind(_assertThisInitialized(_this));_this.onMouseMove=_this.onMouseMove.bind(_assertThisInitialized(_this));_this.onTouchMove=_this.onTouchMove.bind(_assertThisInitialized(_this));return _this;}_createClass(Knob,[{key:\"updateValue\",value:function updateValue(offsetX,offsetY){var dx=offsetX-this.props.size/2;var dy=this.props.size/2-offsetY;var angle=Math.atan2(dy,dx);var start=-Math.PI/2-Math.PI/6;this.updateModel(angle,start);}},{key:\"updateModel\",value:function updateModel(angle,start){var mappedValue;if(angle>this.maxRadians)mappedValue=this.mapRange(angle,this.minRadians,this.maxRadians,this.props.min,this.props.max);else if(angle<start)mappedValue=this.mapRange(angle+2*Math.PI,this.minRadians,this.maxRadians,this.props.min,this.props.max);else return;if(this.props.onChange){var newValue=Math.round((mappedValue-this.props.min)/this.props.step)*this.props.step+this.props.min;this.props.onChange({value:newValue});}}},{key:\"mapRange\",value:function mapRange(x,inMin,inMax,outMin,outMax){return(x-inMin)*(outMax-outMin)/(inMax-inMin)+outMin;}},{key:\"onClick\",value:function onClick(event){if(!this.props.disabled&&!this.props.readOnly){this.updateValue(event.nativeEvent.offsetX,event.nativeEvent.offsetY);}}},{key:\"onMouseDown\",value:function onMouseDown(event){if(!this.props.disabled&&!this.props.readOnly){this.windowMouseMoveListener=this.onMouseMove;this.windowMouseUpListener=this.onMouseUp;window.addEventListener('mousemove',this.windowMouseMoveListener);window.addEventListener('mouseup',this.windowMouseUpListener);event.preventDefault();}}},{key:\"onMouseUp\",value:function onMouseUp(event){if(!this.props.disabled&&!this.props.readOnly){window.removeEventListener('mousemove',this.windowMouseMoveListener);window.removeEventListener('mouseup',this.windowMouseUpListener);this.windowMouseMoveListener=null;this.windowMouseUpListener=null;event.preventDefault();}}},{key:\"onTouchStart\",value:function onTouchStart(event){if(!this.props.disabled&&!this.props.readOnly){this.windowTouchMoveListener=this.onTouchMove;this.windowTouchEndListener=this.onTouchEnd;window.addEventListener('touchmove',this.windowTouchMoveListener,{passive:false,cancelable:false});window.addEventListener('touchend',this.windowTouchEndListener);}}},{key:\"onTouchEnd\",value:function onTouchEnd(event){if(!this.props.disabled&&!this.props.readOnly){window.removeEventListener('touchmove',this.windowTouchMoveListener);window.removeEventListener('touchend',this.windowTouchEndListener);this.windowTouchMoveListener=null;this.windowTouchEndListener=null;}}},{key:\"onMouseMove\",value:function onMouseMove(event){if(!this.props.disabled&&!this.props.readOnly){this.updateValue(event.offsetX,event.offsetY);event.preventDefault();}}},{key:\"onTouchMove\",value:function onTouchMove(event){if(!this.props.disabled&&!this.props.readOnly&&event.touches.length===1){var rect=this.element.getBoundingClientRect();var touch=event.targetTouches.item(0);var offsetX=touch.clientX-rect.left;var offsetY=touch.clientY-rect.top;this.updateValue(offsetX,offsetY);event.preventDefault();}}},{key:\"rangePath\",value:function rangePath(){return\"M \".concat(this.minX(),\" \").concat(this.minY(),\" A \").concat(this.radius,\" \").concat(this.radius,\" 0 1 1 \").concat(this.maxX(),\" \").concat(this.maxY());}},{key:\"valuePath\",value:function valuePath(){return\"M \".concat(this.zeroX(),\" \").concat(this.zeroY(),\" A \").concat(this.radius,\" \").concat(this.radius,\" 0 \").concat(this.largeArc(),\" \").concat(this.sweep(),\" \").concat(this.valueX(),\" \").concat(this.valueY());}},{key:\"zeroRadians\",value:function zeroRadians(){if(this.props.min>0&&this.props.max>0)return this.mapRange(this.props.min,this.props.min,this.props.max,this.minRadians,this.maxRadians);else return this.mapRange(0,this.props.min,this.props.max,this.minRadians,this.maxRadians);}},{key:\"valueRadians\",value:function valueRadians(){return this.mapRange(this.props.value,this.props.min,this.props.max,this.minRadians,this.maxRadians);}},{key:\"minX\",value:function minX(){return this.midX+Math.cos(this.minRadians)*this.radius;}},{key:\"minY\",value:function minY(){return this.midY-Math.sin(this.minRadians)*this.radius;}},{key:\"maxX\",value:function maxX(){return this.midX+Math.cos(this.maxRadians)*this.radius;}},{key:\"maxY\",value:function maxY(){return this.midY-Math.sin(this.maxRadians)*this.radius;}},{key:\"zeroX\",value:function zeroX(){return this.midX+Math.cos(this.zeroRadians())*this.radius;}},{key:\"zeroY\",value:function zeroY(){return this.midY-Math.sin(this.zeroRadians())*this.radius;}},{key:\"valueX\",value:function valueX(){return this.midX+Math.cos(this.valueRadians())*this.radius;}},{key:\"valueY\",value:function valueY(){return this.midY-Math.sin(this.valueRadians())*this.radius;}},{key:\"largeArc\",value:function largeArc(){return Math.abs(this.zeroRadians()-this.valueRadians())<Math.PI?0:1;}},{key:\"sweep\",value:function sweep(){return this.valueRadians()>this.zeroRadians()?0:1;}},{key:\"valueToDisplay\",value:function valueToDisplay(){return this.props.valueTemplate.replace(\"{value}\",this.props.value.toString());}},{key:\"render\",value:function render(){var _this2=this;var containerClassName=classNames('p-knob p-component',{'p-disabled':this.props.disabled},this.props.className);var text=this.props.showValue&&/*#__PURE__*/React.createElement(\"text\",{x:50,y:57,textAnchor:'middle',fill:this.props.textColor,className:'p-knob-text',name:this.props.name},this.valueToDisplay());return/*#__PURE__*/React.createElement(\"div\",{className:containerClassName,style:this.props.style,ref:function ref(el){return _this2.element=el;}},/*#__PURE__*/React.createElement(\"svg\",{viewBox:\"0 0 100 100\",width:this.props.size,height:this.props.size,onClick:this.onClick,onMouseDown:this.onMouseDown,onMouseUp:this.onMouseUp,onTouchStart:this.onTouchStart,onTouchEnd:this.onTouchEnd},/*#__PURE__*/React.createElement(\"path\",{d:this.rangePath(),strokeWidth:this.props.strokeWidth,stroke:this.props.rangeColor,className:'p-knob-range'}),/*#__PURE__*/React.createElement(\"path\",{d:this.valuePath(),strokeWidth:this.props.strokeWidth,stroke:this.props.valueColor,className:'p-knob-value'}),text));}}]);return Knob;}(Component);Knob.defaultProps={id:null,style:null,className:null,value:null,size:100,disabled:false,readOnly:false,showValue:true,step:1,min:0,max:100,strokeWidth:14,name:'',valueColor:'var(--primary-color, Black)',rangeColor:'var(--surface-d, LightGray)',textColor:'var(--text-color-secondary, Black)',valueTemplate:'{value}',onChange:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/components/knob/Knob.js"],"names":["React","Component","classNames","UniqueComponentId","Knob","props","state","radius","midX","midY","minRadians","Math","PI","maxRadians","id","onClick","bind","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","onMouseMove","onTouchMove","offsetX","offsetY","dx","size","dy","angle","atan2","start","updateModel","mappedValue","mapRange","min","max","onChange","newValue","round","step","value","x","inMin","inMax","outMin","outMax","event","disabled","readOnly","updateValue","nativeEvent","windowMouseMoveListener","windowMouseUpListener","window","addEventListener","preventDefault","removeEventListener","windowTouchMoveListener","windowTouchEndListener","passive","cancelable","touches","length","rect","element","getBoundingClientRect","touch","targetTouches","item","clientX","left","clientY","top","minX","minY","maxX","maxY","zeroX","zeroY","largeArc","sweep","valueX","valueY","cos","sin","zeroRadians","valueRadians","abs","valueTemplate","replace","toString","containerClassName","className","text","showValue","textColor","name","valueToDisplay","style","el","rangePath","strokeWidth","rangeColor","valuePath","valueColor","defaultProps"],"mappings":"k1BAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CAEA,OAASC,UAAT,KAA2B,qBAA3B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,4BAA9B,CAEA,UAAaC,CAAAA,IAAb,4FA4CI,cAAYC,KAAZ,CAAmB,sCACf,uBAAMA,KAAN,EAEA,MAAKC,KAAL,CAAa,EAAb,CAEA,MAAKC,MAAL,CAAc,EAAd,CACA,MAAKC,IAAL,CAAa,EAAb,CACA,MAAKC,IAAL,CAAY,EAAZ,CACA,MAAKC,UAAL,CAAkB,EAAIC,IAAI,CAACC,EAAT,CAAc,CAAhC,CACA,MAAKC,UAAL,CAAmB,CAACF,IAAI,CAACC,EAAN,CAAW,CAA9B,CACA,MAAKE,EAAL,CAAU,MAAKT,KAAL,CAAWS,EAAX,EAAiBX,iBAAiB,EAA5C,CAEA,MAAKY,OAAL,CAAe,MAAKA,OAAL,CAAaC,IAAb,+BAAf,CACA,MAAKC,WAAL,CAAmB,MAAKA,WAAL,CAAiBD,IAAjB,+BAAnB,CACA,MAAKE,SAAL,CAAiB,MAAKA,SAAL,CAAeF,IAAf,+BAAjB,CACA,MAAKG,YAAL,CAAoB,MAAKA,YAAL,CAAkBH,IAAlB,+BAApB,CACA,MAAKI,UAAL,CAAkB,MAAKA,UAAL,CAAgBJ,IAAhB,+BAAlB,CACA,MAAKK,WAAL,CAAmB,MAAKA,WAAL,CAAiBL,IAAjB,+BAAnB,CACA,MAAKM,WAAL,CAAmB,MAAKA,WAAL,CAAiBN,IAAjB,+BAAnB,CAlBe,aAmBlB,CA/DL,4CAiEI,qBAAYO,OAAZ,CAAqBC,OAArB,CAA8B,CAC1B,GAAIC,CAAAA,EAAE,CAAGF,OAAO,CAAG,KAAKlB,KAAL,CAAWqB,IAAX,CAAkB,CAArC,CACA,GAAIC,CAAAA,EAAE,CAAI,KAAKtB,KAAL,CAAWqB,IAAX,CAAkB,CAAlB,CAAsBF,OAAhC,CACA,GAAII,CAAAA,KAAK,CAAGjB,IAAI,CAACkB,KAAL,CAAWF,EAAX,CAAeF,EAAf,CAAZ,CACA,GAAIK,CAAAA,KAAK,CAAG,CAACnB,IAAI,CAACC,EAAN,CAAW,CAAX,CAAeD,IAAI,CAACC,EAAL,CAAU,CAArC,CACA,KAAKmB,WAAL,CAAiBH,KAAjB,CAAwBE,KAAxB,EACH,CAvEL,2BAyEI,qBAAYF,KAAZ,CAAmBE,KAAnB,CAA0B,CACtB,GAAIE,CAAAA,WAAJ,CACA,GAAIJ,KAAK,CAAG,KAAKf,UAAjB,CACImB,WAAW,CAAG,KAAKC,QAAL,CAAcL,KAAd,CAAqB,KAAKlB,UAA1B,CAAsC,KAAKG,UAA3C,CAAuD,KAAKR,KAAL,CAAW6B,GAAlE,CAAuE,KAAK7B,KAAL,CAAW8B,GAAlF,CAAd,CADJ,IAEK,IAAIP,KAAK,CAAGE,KAAZ,CACDE,WAAW,CAAG,KAAKC,QAAL,CAAcL,KAAK,CAAG,EAAIjB,IAAI,CAACC,EAA/B,CAAmC,KAAKF,UAAxC,CAAoD,KAAKG,UAAzD,CAAqE,KAAKR,KAAL,CAAW6B,GAAhF,CAAqF,KAAK7B,KAAL,CAAW8B,GAAhG,CAAd,CADC,IAGD,QAEJ,GAAI,KAAK9B,KAAL,CAAW+B,QAAf,CAAyB,CACrB,GAAMC,CAAAA,QAAQ,CAAG1B,IAAI,CAAC2B,KAAL,CAAW,CAACN,WAAW,CAAG,KAAK3B,KAAL,CAAW6B,GAA1B,EAAiC,KAAK7B,KAAL,CAAWkC,IAAvD,EAA+D,KAAKlC,KAAL,CAAWkC,IAA1E,CAAiF,KAAKlC,KAAL,CAAW6B,GAA7G,CACA,KAAK7B,KAAL,CAAW+B,QAAX,CAAoB,CAChBI,KAAK,CAAEH,QADS,CAApB,EAGH,CACJ,CAxFL,wBA0FI,kBAASI,CAAT,CAAYC,KAAZ,CAAmBC,KAAnB,CAA0BC,MAA1B,CAAkCC,MAAlC,CAA0C,CACtC,MAAO,CAACJ,CAAC,CAAGC,KAAL,GAAeG,MAAM,CAAGD,MAAxB,GAAmCD,KAAK,CAAGD,KAA3C,EAAoDE,MAA3D,CACH,CA5FL,uBA8FI,iBAAQE,KAAR,CAAe,CACX,GAAI,CAAC,KAAKzC,KAAL,CAAW0C,QAAZ,EAAwB,CAAC,KAAK1C,KAAL,CAAW2C,QAAxC,CAAkD,CAC9C,KAAKC,WAAL,CAAiBH,KAAK,CAACI,WAAN,CAAkB3B,OAAnC,CAA4CuB,KAAK,CAACI,WAAN,CAAkB1B,OAA9D,EACH,CACJ,CAlGL,2BAoGI,qBAAYsB,KAAZ,CAAmB,CACf,GAAI,CAAC,KAAKzC,KAAL,CAAW0C,QAAZ,EAAwB,CAAC,KAAK1C,KAAL,CAAW2C,QAAxC,CAAkD,CAC9C,KAAKG,uBAAL,CAA+B,KAAK9B,WAApC,CACA,KAAK+B,qBAAL,CAA6B,KAAKlC,SAAlC,CACAmC,MAAM,CAACC,gBAAP,CAAwB,WAAxB,CAAqC,KAAKH,uBAA1C,EACAE,MAAM,CAACC,gBAAP,CAAwB,SAAxB,CAAmC,KAAKF,qBAAxC,EACAN,KAAK,CAACS,cAAN,GACH,CACJ,CA5GL,yBA8GI,mBAAUT,KAAV,CAAiB,CACb,GAAI,CAAC,KAAKzC,KAAL,CAAW0C,QAAZ,EAAwB,CAAC,KAAK1C,KAAL,CAAW2C,QAAxC,CAAkD,CAC9CK,MAAM,CAACG,mBAAP,CAA2B,WAA3B,CAAwC,KAAKL,uBAA7C,EACAE,MAAM,CAACG,mBAAP,CAA2B,SAA3B,CAAsC,KAAKJ,qBAA3C,EACA,KAAKD,uBAAL,CAA+B,IAA/B,CACA,KAAKC,qBAAL,CAA6B,IAA7B,CACAN,KAAK,CAACS,cAAN,GACH,CACJ,CAtHL,4BAwHI,sBAAaT,KAAb,CAAoB,CAChB,GAAI,CAAC,KAAKzC,KAAL,CAAW0C,QAAZ,EAAwB,CAAC,KAAK1C,KAAL,CAAW2C,QAAxC,CAAkD,CAC9C,KAAKS,uBAAL,CAA+B,KAAKnC,WAApC,CACA,KAAKoC,sBAAL,CAA8B,KAAKtC,UAAnC,CACAiC,MAAM,CAACC,gBAAP,CAAwB,WAAxB,CAAqC,KAAKG,uBAA1C,CAAmE,CAACE,OAAO,CAAE,KAAV,CAAiBC,UAAU,CAAE,KAA7B,CAAnE,EACAP,MAAM,CAACC,gBAAP,CAAwB,UAAxB,CAAoC,KAAKI,sBAAzC,EACH,CACJ,CA/HL,0BAiII,oBAAWZ,KAAX,CAAkB,CACd,GAAI,CAAC,KAAKzC,KAAL,CAAW0C,QAAZ,EAAwB,CAAC,KAAK1C,KAAL,CAAW2C,QAAxC,CAAkD,CAC9CK,MAAM,CAACG,mBAAP,CAA2B,WAA3B,CAAwC,KAAKC,uBAA7C,EACAJ,MAAM,CAACG,mBAAP,CAA2B,UAA3B,CAAuC,KAAKE,sBAA5C,EACA,KAAKD,uBAAL,CAA+B,IAA/B,CACA,KAAKC,sBAAL,CAA8B,IAA9B,CACH,CACJ,CAxIL,2BA0II,qBAAYZ,KAAZ,CAAmB,CACf,GAAI,CAAC,KAAKzC,KAAL,CAAW0C,QAAZ,EAAwB,CAAC,KAAK1C,KAAL,CAAW2C,QAAxC,CAAkD,CAC9C,KAAKC,WAAL,CAAiBH,KAAK,CAACvB,OAAvB,CAAgCuB,KAAK,CAACtB,OAAtC,EACAsB,KAAK,CAACS,cAAN,GACH,CACJ,CA/IL,2BAiJI,qBAAYT,KAAZ,CAAmB,CACf,GAAI,CAAC,KAAKzC,KAAL,CAAW0C,QAAZ,EAAwB,CAAC,KAAK1C,KAAL,CAAW2C,QAApC,EAAgDF,KAAK,CAACe,OAAN,CAAcC,MAAd,GAAyB,CAA7E,CAAgF,CAC5E,GAAMC,CAAAA,IAAI,CAAG,KAAKC,OAAL,CAAaC,qBAAb,EAAb,CACA,GAAMC,CAAAA,KAAK,CAAGpB,KAAK,CAACqB,aAAN,CAAoBC,IAApB,CAAyB,CAAzB,CAAd,CACA,GAAM7C,CAAAA,OAAO,CAAG2C,KAAK,CAACG,OAAN,CAAgBN,IAAI,CAACO,IAArC,CACA,GAAM9C,CAAAA,OAAO,CAAG0C,KAAK,CAACK,OAAN,CAAgBR,IAAI,CAACS,GAArC,CACA,KAAKvB,WAAL,CAAiB1B,OAAjB,CAA0BC,OAA1B,EACAsB,KAAK,CAACS,cAAN,GACH,CACJ,CA1JL,yBA4JI,oBAAY,CACR,kBAAY,KAAKkB,IAAL,EAAZ,aAA2B,KAAKC,IAAL,EAA3B,eAA4C,KAAKnE,MAAjD,aAA2D,KAAKA,MAAhE,mBAAgF,KAAKoE,IAAL,EAAhF,aAA+F,KAAKC,IAAL,EAA/F,EACH,CA9JL,yBAgKI,oBAAY,CACR,kBAAY,KAAKC,KAAL,EAAZ,aAA4B,KAAKC,KAAL,EAA5B,eAA8C,KAAKvE,MAAnD,aAA6D,KAAKA,MAAlE,eAA8E,KAAKwE,QAAL,EAA9E,aAAiG,KAAKC,KAAL,EAAjG,aAAiH,KAAKC,MAAL,EAAjH,aAAkI,KAAKC,MAAL,EAAlI,EACH,CAlKL,2BAoKI,sBAAc,CACV,GAAI,KAAK7E,KAAL,CAAW6B,GAAX,CAAiB,CAAjB,EAAsB,KAAK7B,KAAL,CAAW8B,GAAX,CAAiB,CAA3C,CACI,MAAO,MAAKF,QAAL,CAAc,KAAK5B,KAAL,CAAW6B,GAAzB,CAA8B,KAAK7B,KAAL,CAAW6B,GAAzC,CAA8C,KAAK7B,KAAL,CAAW8B,GAAzD,CAA8D,KAAKzB,UAAnE,CAA+E,KAAKG,UAApF,CAAP,CADJ,IAGI,OAAO,MAAKoB,QAAL,CAAc,CAAd,CAAiB,KAAK5B,KAAL,CAAW6B,GAA5B,CAAiC,KAAK7B,KAAL,CAAW8B,GAA5C,CAAiD,KAAKzB,UAAtD,CAAkE,KAAKG,UAAvE,CAAP,CACP,CAzKL,4BA2KI,uBAAe,CACX,MAAO,MAAKoB,QAAL,CAAc,KAAK5B,KAAL,CAAWmC,KAAzB,CAAgC,KAAKnC,KAAL,CAAW6B,GAA3C,CAAgD,KAAK7B,KAAL,CAAW8B,GAA3D,CAAgE,KAAKzB,UAArE,CAAiF,KAAKG,UAAtF,CAAP,CACH,CA7KL,oBA+KI,eAAO,CACH,MAAO,MAAKL,IAAL,CAAYG,IAAI,CAACwE,GAAL,CAAS,KAAKzE,UAAd,EAA4B,KAAKH,MAApD,CACH,CAjLL,oBAmLI,eAAO,CACH,MAAO,MAAKE,IAAL,CAAYE,IAAI,CAACyE,GAAL,CAAS,KAAK1E,UAAd,EAA4B,KAAKH,MAApD,CACH,CArLL,oBAuLI,eAAO,CACH,MAAO,MAAKC,IAAL,CAAYG,IAAI,CAACwE,GAAL,CAAS,KAAKtE,UAAd,EAA4B,KAAKN,MAApD,CACH,CAzLL,oBA2LI,eAAO,CACH,MAAO,MAAKE,IAAL,CAAYE,IAAI,CAACyE,GAAL,CAAS,KAAKvE,UAAd,EAA4B,KAAKN,MAApD,CACH,CA7LL,qBA+LI,gBAAQ,CACJ,MAAO,MAAKC,IAAL,CAAYG,IAAI,CAACwE,GAAL,CAAS,KAAKE,WAAL,EAAT,EAA+B,KAAK9E,MAAvD,CACH,CAjML,qBAmMI,gBAAQ,CACJ,MAAO,MAAKE,IAAL,CAAYE,IAAI,CAACyE,GAAL,CAAS,KAAKC,WAAL,EAAT,EAA+B,KAAK9E,MAAvD,CACH,CArML,sBAuMI,iBAAS,CACL,MAAO,MAAKC,IAAL,CAAYG,IAAI,CAACwE,GAAL,CAAS,KAAKG,YAAL,EAAT,EAAgC,KAAK/E,MAAxD,CACH,CAzML,sBA2MI,iBAAS,CACL,MAAO,MAAKE,IAAL,CAAYE,IAAI,CAACyE,GAAL,CAAS,KAAKE,YAAL,EAAT,EAAgC,KAAK/E,MAAxD,CACH,CA7ML,wBA+MI,mBAAW,CACP,MAAOI,CAAAA,IAAI,CAAC4E,GAAL,CAAS,KAAKF,WAAL,GAAqB,KAAKC,YAAL,EAA9B,EAAqD3E,IAAI,CAACC,EAA1D,CAA+D,CAA/D,CAAmE,CAA1E,CACH,CAjNL,qBAmNI,gBAAQ,CACJ,MAAO,MAAK0E,YAAL,GAAsB,KAAKD,WAAL,EAAtB,CAA2C,CAA3C,CAA+C,CAAtD,CACH,CArNL,8BAuNI,yBAAiB,CACb,MAAO,MAAKhF,KAAL,CAAWmF,aAAX,CAAyBC,OAAzB,CAAiC,SAAjC,CAA4C,KAAKpF,KAAL,CAAWmC,KAAX,CAAiBkD,QAAjB,EAA5C,CAAP,CACH,CAzNL,sBA2NI,iBAAS,iBACL,GAAMC,CAAAA,kBAAkB,CAAGzF,UAAU,CAAC,oBAAD,CAAuB,CACxD,aAAc,KAAKG,KAAL,CAAW0C,QAD+B,CAAvB,CAElC,KAAK1C,KAAL,CAAWuF,SAFuB,CAArC,CAIA,GAAIC,CAAAA,IAAI,CAAG,KAAKxF,KAAL,CAAWyF,SAAX,eAAwB,4BAAM,CAAC,CAAE,EAAT,CAAa,CAAC,CAAE,EAAhB,CAAoB,UAAU,CAAE,QAAhC,CAA0C,IAAI,CAAE,KAAKzF,KAAL,CAAW0F,SAA3D,CAAsE,SAAS,CAAE,aAAjF,CAAgG,IAAI,CAAE,KAAK1F,KAAL,CAAW2F,IAAjH,EAAwH,KAAKC,cAAL,EAAxH,CAAnC,CAEA,mBACI,2BAAK,SAAS,CAAEN,kBAAhB,CAAoC,KAAK,CAAE,KAAKtF,KAAL,CAAW6F,KAAtD,CAA6D,GAAG,CAAE,aAACC,EAAD,QAAQ,CAAA,MAAI,CAACnC,OAAL,CAAemC,EAAvB,EAAlE,eACI,2BAAK,OAAO,CAAC,aAAb,CAA2B,KAAK,CAAE,KAAK9F,KAAL,CAAWqB,IAA7C,CAAmD,MAAM,CAAE,KAAKrB,KAAL,CAAWqB,IAAtE,CAA4E,OAAO,CAAE,KAAKX,OAA1F,CAAmG,WAAW,CAAE,KAAKE,WAArH,CAAkI,SAAS,CAAE,KAAKC,SAAlJ,CACK,YAAY,CAAE,KAAKC,YADxB,CACsC,UAAU,CAAE,KAAKC,UADvD,eAEI,4BAAM,CAAC,CAAE,KAAKgF,SAAL,EAAT,CAA2B,WAAW,CAAE,KAAK/F,KAAL,CAAWgG,WAAnD,CAAgE,MAAM,CAAE,KAAKhG,KAAL,CAAWiG,UAAnF,CAA+F,SAAS,CAAE,cAA1G,EAFJ,cAGI,4BAAM,CAAC,CAAE,KAAKC,SAAL,EAAT,CAA2B,WAAW,CAAE,KAAKlG,KAAL,CAAWgG,WAAnD,CAAgE,MAAM,CAAE,KAAKhG,KAAL,CAAWmG,UAAnF,CAA+F,SAAS,CAAE,cAA1G,EAHJ,CAIKX,IAJL,CADJ,CADJ,CAUH,CA5OL,kBAA0B5F,SAA1B,EAAaG,I,CAEFqG,Y,CAAe,CAClB3F,EAAE,CAAE,IADc,CAElBoF,KAAK,CAAE,IAFW,CAGlBN,SAAS,CAAE,IAHO,CAIlBpD,KAAK,CAAE,IAJW,CAKlBd,IAAI,CAAE,GALY,CAMlBqB,QAAQ,CAAE,KANQ,CAOlBC,QAAQ,CAAE,KAPQ,CAQlB8C,SAAS,CAAE,IARO,CASlBvD,IAAI,CAAE,CATY,CAUlBL,GAAG,CAAE,CAVa,CAWlBC,GAAG,CAAE,GAXa,CAYlBkE,WAAW,CAAE,EAZK,CAalBL,IAAI,CAAE,EAbY,CAclBQ,UAAU,CAAE,6BAdM,CAelBF,UAAU,CAAE,6BAfM,CAgBlBP,SAAS,CAAE,oCAhBO,CAiBlBP,aAAa,CAAE,SAjBG,CAkBlBpD,QAAQ,CAAE,IAlBQ,C","sourcesContent":["import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport UniqueComponentId from '../utils/UniqueComponentId';\r\n\r\nexport class Knob extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        style: null,\r\n        className: null,\r\n        value: null,\r\n        size: 100,\r\n        disabled: false,\r\n        readOnly: false,\r\n        showValue: true,\r\n        step: 1,\r\n        min: 0,\r\n        max: 100,\r\n        strokeWidth: 14,\r\n        name: '',\r\n        valueColor: 'var(--primary-color, Black)',\r\n        rangeColor: 'var(--surface-d, LightGray)',\r\n        textColor: 'var(--text-color-secondary, Black)',\r\n        valueTemplate: '{value}',\r\n        onChange: null\r\n    };\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        value: PropTypes.any,\r\n        size: PropTypes.number,\r\n        disabled: PropTypes.bool,\r\n        readOnly: PropTypes.bool,\r\n        showValue: PropTypes.bool,\r\n        step: PropTypes.number,\r\n        min: PropTypes.number,\r\n        max: PropTypes.number,\r\n        strokeWidth: PropTypes.number,\r\n        name: PropTypes.string,\r\n        valueColor: PropTypes.string,\r\n        rangeColor: PropTypes.string,\r\n        textColor: PropTypes.string,\r\n        valueTemplate: PropTypes.string,\r\n        onChange: PropTypes.func\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {}\r\n\r\n        this.radius = 40;\r\n        this.midX =  50;\r\n        this.midY = 50;\r\n        this.minRadians = 4 * Math.PI / 3;\r\n        this.maxRadians =  -Math.PI / 3;\r\n        this.id = this.props.id || UniqueComponentId();\r\n\r\n        this.onClick = this.onClick.bind(this);\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this);\r\n        this.onTouchStart = this.onTouchStart.bind(this);\r\n        this.onTouchEnd = this.onTouchEnd.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.onTouchMove = this.onTouchMove.bind(this);\r\n    }\r\n\r\n    updateValue(offsetX, offsetY) {\r\n        let dx = offsetX - this.props.size / 2;\r\n        let dy =  this.props.size / 2 - offsetY;\r\n        let angle = Math.atan2(dy, dx);\r\n        let start = -Math.PI / 2 - Math.PI / 6;\r\n        this.updateModel(angle, start);\r\n    }\r\n\r\n    updateModel(angle, start) {\r\n        let mappedValue;\r\n        if (angle > this.maxRadians)\r\n            mappedValue = this.mapRange(angle, this.minRadians, this.maxRadians, this.props.min, this.props.max);\r\n        else if (angle < start)\r\n            mappedValue = this.mapRange(angle + 2 * Math.PI, this.minRadians, this.maxRadians, this.props.min, this.props.max);\r\n        else\r\n            return;\r\n\r\n        if (this.props.onChange) {\r\n            const newValue = Math.round((mappedValue - this.props.min) / this.props.step) * this.props.step + this.props.min;\r\n            this.props.onChange({\r\n                value: newValue\r\n            })\r\n        }\r\n    }\r\n\r\n    mapRange(x, inMin, inMax, outMin, outMax) {\r\n        return (x - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;\r\n    }\r\n\r\n    onClick(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            this.updateValue(event.nativeEvent.offsetX, event.nativeEvent.offsetY);\r\n        }\r\n    }\r\n\r\n    onMouseDown(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            this.windowMouseMoveListener = this.onMouseMove;\r\n            this.windowMouseUpListener = this.onMouseUp;\r\n            window.addEventListener('mousemove', this.windowMouseMoveListener);\r\n            window.addEventListener('mouseup', this.windowMouseUpListener);\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    onMouseUp(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            window.removeEventListener('mousemove', this.windowMouseMoveListener);\r\n            window.removeEventListener('mouseup', this.windowMouseUpListener);\r\n            this.windowMouseMoveListener = null;\r\n            this.windowMouseUpListener = null;\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    onTouchStart(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            this.windowTouchMoveListener = this.onTouchMove;\r\n            this.windowTouchEndListener = this.onTouchEnd;\r\n            window.addEventListener('touchmove', this.windowTouchMoveListener, {passive: false, cancelable: false});\r\n            window.addEventListener('touchend', this.windowTouchEndListener);\r\n        }\r\n    }\r\n\r\n    onTouchEnd(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            window.removeEventListener('touchmove', this.windowTouchMoveListener);\r\n            window.removeEventListener('touchend', this.windowTouchEndListener);\r\n            this.windowTouchMoveListener = null;\r\n            this.windowTouchEndListener = null;\r\n        }\r\n    }\r\n\r\n    onMouseMove(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            this.updateValue(event.offsetX, event.offsetY);\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    onTouchMove(event) {\r\n        if (!this.props.disabled && !this.props.readOnly && event.touches.length === 1) {\r\n            const rect = this.element.getBoundingClientRect();\r\n            const touch = event.targetTouches.item(0);\r\n            const offsetX = touch.clientX - rect.left;\r\n            const offsetY = touch.clientY - rect.top;\r\n            this.updateValue(offsetX, offsetY);\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    rangePath() {\r\n        return `M ${this.minX()} ${this.minY()} A ${this.radius} ${this.radius} 0 1 1 ${this.maxX()} ${this.maxY()}`;\r\n    }\r\n\r\n    valuePath() {\r\n        return `M ${this.zeroX()} ${this.zeroY()} A ${this.radius} ${this.radius} 0 ${this.largeArc()} ${this.sweep()} ${this.valueX()} ${this.valueY()}`;\r\n    }\r\n\r\n    zeroRadians() {\r\n        if (this.props.min > 0 && this.props.max > 0)\r\n            return this.mapRange(this.props.min, this.props.min, this.props.max, this.minRadians, this.maxRadians);\r\n        else\r\n            return this.mapRange(0, this.props.min, this.props.max, this.minRadians, this.maxRadians);\r\n    }\r\n\r\n    valueRadians() {\r\n        return this.mapRange(this.props.value, this.props.min, this.props.max, this.minRadians, this.maxRadians);\r\n    }\r\n\r\n    minX() {\r\n        return this.midX + Math.cos(this.minRadians) * this.radius;\r\n    }\r\n\r\n    minY() {\r\n        return this.midY - Math.sin(this.minRadians) * this.radius;\r\n    }\r\n\r\n    maxX() {\r\n        return this.midX + Math.cos(this.maxRadians) * this.radius;\r\n    }\r\n\r\n    maxY() {\r\n        return this.midY - Math.sin(this.maxRadians) * this.radius;\r\n    }\r\n\r\n    zeroX() {\r\n        return this.midX + Math.cos(this.zeroRadians()) * this.radius;\r\n    }\r\n\r\n    zeroY() {\r\n        return this.midY - Math.sin(this.zeroRadians()) * this.radius;\r\n    }\r\n\r\n    valueX() {\r\n        return this.midX + Math.cos(this.valueRadians()) * this.radius;\r\n    }\r\n\r\n    valueY() {\r\n        return this.midY - Math.sin(this.valueRadians()) * this.radius;\r\n    }\r\n\r\n    largeArc() {\r\n        return Math.abs(this.zeroRadians() - this.valueRadians()) < Math.PI ? 0 : 1;\r\n    }\r\n\r\n    sweep() {\r\n        return this.valueRadians() > this.zeroRadians() ? 0 : 1;\r\n    }\r\n\r\n    valueToDisplay() {\r\n        return this.props.valueTemplate.replace(\"{value}\", this.props.value.toString());\r\n    }\r\n\r\n    render() {\r\n        const containerClassName = classNames('p-knob p-component', {\r\n            'p-disabled': this.props.disabled,\r\n        }, this.props.className);\r\n\r\n        let text = this.props.showValue && <text x={50} y={57} textAnchor={'middle'} fill={this.props.textColor} className={'p-knob-text'} name={this.props.name}>{this.valueToDisplay()}</text>\r\n\r\n        return (\r\n            <div className={containerClassName} style={this.props.style} ref={(el) => this.element = el}>\r\n                <svg viewBox=\"0 0 100 100\" width={this.props.size} height={this.props.size} onClick={this.onClick} onMouseDown={this.onMouseDown} onMouseUp={this.onMouseUp}\r\n                     onTouchStart={this.onTouchStart} onTouchEnd={this.onTouchEnd}>\r\n                    <path d={this.rangePath()} strokeWidth={this.props.strokeWidth} stroke={this.props.rangeColor} className={'p-knob-range'}></path>\r\n                    <path d={this.valuePath()} strokeWidth={this.props.strokeWidth} stroke={this.props.valueColor} className={'p-knob-value'}></path>\r\n                    {text}\r\n                </svg>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}