{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Column}from\"../../../components/column/Column\";import{DataTable}from\"../../../components/datatable/DataTable\";import React,{useEffect,useState}from\"react\";import{Actions}from\"../../../core\";import{ProgressBar}from\"../../../components/progressbar/ProgressBar\";import classNames from\"classnames\";import{confirmDialog}from\"../../../components/confirmdialog/ConfirmDialog\";import{Button}from\"../../../components/button/Button\";import{Dialog}from\"../../../components/dialog/Dialog\";import{InputText}from\"../../../components/inputtext/InputText\";import{Dropdown}from\"../../../components/dropdown/Dropdown\";export var ProvidersTable=function ProvidersTable(_ref){var group=_ref.group,onSelect=_ref.onSelect,onEvent=_ref.onEvent;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selected=_useState4[0],setSelected=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),loader=_useState6[0],setLoader=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),type=_useState8[0],setType=_useState8[1];var _useState9=useState({name:\"\",note:\"\",disabled:0}),_useState10=_slicedToArray(_useState9,2),current=_useState10[0],setCurrent=_useState10[1];useEffect(function(){if(selected){setCurrent(_objectSpread({},selected));onSelect(selected);}else{setCurrent({name:\"\",note:\"\",disabled:0});}},[selected]);useEffect(function(){if(group&&group.id){loadData(group.id);setSelected(null);}},[group]);var loadData=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(id){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoader(true);_context.next=3;return Actions.Providers.GetProviders(id);case 3:response=_context.sent;setLoader(false);setData(response.status?response.data.data:[]);case 6:case\"end\":return _context.stop();}}},_callee);}));return function loadData(_x){return _ref2.apply(this,arguments);};}();var onDelete=function onDelete(){if(selected){confirmDialog({message:'Do you want to delete this record?',header:'Delete Confirmation',icon:'pi pi-info-circle',acceptClassName:'p-button-danger',accept:function(){var _accept=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return Actions.Providers.DeleteProvider(selected.id);case 2:response=_context2.sent;parseResponse(response);case 4:case\"end\":return _context2.stop();}}},_callee2);}));function accept(){return _accept.apply(this,arguments);}return accept;}(),reject:function reject(){return console.log(\"reject\");}});}};var parseResponse=function parseResponse(response){if(response.status){if(response.data.data===1){loadData(group.id);onEvent({severity:'success',summary:'Success Message',detail:'Message Content',life:3000});}else{onEvent({severity:'info',summary:'Rejected',detail:'Maybe this already deleted',life:3000});}}else{onEvent({severity:'error',summary:'Rejected',detail:'You have rejected',life:3000});}};var onAction=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:if(!(type===\"insert\")){_context3.next=7;break;}_context3.next=3;return Actions.Providers.InsertProvider(_objectSpread(_objectSpread({},current),{},{groupId:group.id}));case 3:response=_context3.sent;parseResponse({status:response.status,data:response.status?{data:1}:{data:0}});_context3.next=11;break;case 7:_context3.next=9;return Actions.Providers.UpdateProvider({id:current.id,data:_objectSpread(_objectSpread({},current),{},{groupId:group.id})});case 9:response=_context3.sent;parseResponse({status:response.status,data:response.status?{data:1}:{data:0}});case 11:if(response.status){setType(null);}case 12:case\"end\":return _context3.stop();}}},_callee3);}));return function onAction(){return _ref3.apply(this,arguments);};}();var renderFooter=function renderFooter(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{label:\"No\",icon:\"pi pi-times\",onClick:function onClick(){setType(null);},className:\"p-button-text\"}),/*#__PURE__*/React.createElement(Button,{label:\"Yes\",icon:\"pi pi-check\",onClick:function onClick(){return onAction();},autoFocus:true}));};var renderHeader=function renderHeader(){return type===\"insert\"?\"New Provider(\".concat(group.name,\")\"):\"Update Group (\".concat(group.name,\")\");};var visible=function visible(){if(!group){return;}if(type===\"insert\"){return true;}else if(type===\"update\"&&selected){return true;}return false;};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Dialog,{header:renderHeader,visible:visible(),style:{width:'50vw'},footer:renderFooter,onHide:function onHide(){return setType(null);}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-fluid\",style:{height:\"270px\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"gName\"},\"Group Name\"),/*#__PURE__*/React.createElement(InputText,{id:\"gName\",type:\"text\",value:current.name,onChange:function onChange(event){return setCurrent(_objectSpread(_objectSpread({},current),{},{name:event.target.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"p-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"note\"},\"Note\"),/*#__PURE__*/React.createElement(InputText,{id:\"note\",type:\"text\",value:current.note,onChange:function onChange(event){return setCurrent(_objectSpread(_objectSpread({},current),{},{note:event.target.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"p-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"disabled\"},\"On/Off\"),/*#__PURE__*/React.createElement(Dropdown,{inputId:\"disabled\",optionValue:\"id\",value:current.disabled,options:[{id:1,name:\"On\"},{id:0,name:\"Off\"}],onChange:function onChange(event){return setCurrent(_objectSpread(_objectSpread({},current),{},{disabled:event.value}));},placeholder:\"Select\",optionLabel:\"name\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-box call\",style:{flex:'1',marginLeft:'10px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},/*#__PURE__*/React.createElement(\"div\",null,\"Provider\"),/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-plus\",onClick:function onClick(){setSelected(null);setType(\"insert\");}}),/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-pencil\",onClick:function onClick(){return setType(\"update\");}}),/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-trash\",onClick:onDelete})),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-cont grid\"},loader&&/*#__PURE__*/React.createElement(ProgressBar,{style:{height:'6px'},mode:\"indeterminate\"}),/*#__PURE__*/React.createElement(DataTable,{selection:selected,onSelectionChange:function onSelectionChange(e){return setSelected(e.value);},selectionMode:\"single\",dataKey:\"id\",scrollable:true,value:data,className:\"p-datatable-gridlines\",rowClassName:function rowClassName(data){return{'bg-red':data.disabled===1};}},/*#__PURE__*/React.createElement(Column,{field:\"id\",header:\"ID\"}),/*#__PURE__*/React.createElement(Column,{field:\"name\",header:\"Name\",filter:true,filterPlaceholder:\"Search by name\"}),/*#__PURE__*/React.createElement(Column,{field:\"disabled\",header:\"On/Off\"})))));};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/views/transferProviders/components/providersTable.js"],"names":["Column","DataTable","React","useEffect","useState","Actions","ProgressBar","classNames","confirmDialog","Button","Dialog","InputText","Dropdown","ProvidersTable","group","onSelect","onEvent","data","setData","selected","setSelected","loader","setLoader","type","setType","name","note","disabled","current","setCurrent","id","loadData","Providers","GetProviders","response","status","onDelete","message","header","icon","acceptClassName","accept","DeleteProvider","parseResponse","reject","console","log","severity","summary","detail","life","onAction","InsertProvider","groupId","UpdateProvider","renderFooter","renderHeader","visible","width","height","event","target","value","flex","marginLeft","e"],"mappings":"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","sourcesContent":["import {Column} from \"../../../components/column/Column\";\r\nimport {DataTable} from \"../../../components/datatable/DataTable\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {Actions} from \"../../../core\";\r\nimport {ProgressBar} from \"../../../components/progressbar/ProgressBar\";\r\nimport classNames from \"classnames\";\r\nimport {confirmDialog} from \"../../../components/confirmdialog/ConfirmDialog\";\r\nimport {Button} from \"../../../components/button/Button\";\r\nimport {Dialog} from \"../../../components/dialog/Dialog\";\r\nimport {InputText} from \"../../../components/inputtext/InputText\";\r\nimport {Dropdown} from \"../../../components/dropdown/Dropdown\";\r\n\r\nexport const ProvidersTable = ({group,onSelect,onEvent}) =>{\r\n    const [data,setData]=useState(null)\r\n    const [selected,setSelected]=useState(null)\r\n    const [loader,setLoader]=useState(false)\r\n    const [type,setType]=useState(null)\r\n    const [current,setCurrent]=useState({\r\n        name:\"\",\r\n        note:\"\",\r\n        disabled:0\r\n    })\r\n    useEffect(()=>{\r\n        if(selected){\r\n            setCurrent({...selected})\r\n            onSelect(selected)\r\n        }else{\r\n            setCurrent({\r\n                name:\"\",\r\n                note:\"\",\r\n                disabled:0\r\n            })\r\n        }\r\n    },[selected])\r\n    useEffect(()=>{\r\n        if(group && group.id){\r\n            loadData(group.id)\r\n            setSelected(null)\r\n        }\r\n    },[group])\r\n    const loadData = async (id) => {\r\n        setLoader(true)\r\n        const response = await Actions.Providers.GetProviders(id);\r\n        setLoader(false)\r\n        setData(response.status?response.data.data:[])\r\n    }\r\n    const onDelete=()=>{\r\n        if(selected){\r\n            confirmDialog({\r\n                message: 'Do you want to delete this record?',\r\n                header: 'Delete Confirmation',\r\n                icon: 'pi pi-info-circle',\r\n                acceptClassName: 'p-button-danger',\r\n                accept: async () => {\r\n                    const response = await Actions.Providers.DeleteProvider(selected.id)\r\n                    parseResponse(response)\r\n                },\r\n                reject: ()=>console.log(\"reject\")\r\n            });\r\n        }\r\n    }\r\n    const parseResponse = (response) =>{\r\n        if(response.status){\r\n            if(response.data.data===1){\r\n                loadData(group.id);\r\n                onEvent({severity:'success', summary: 'Success Message', detail:'Message Content', life: 3000})\r\n            }else{\r\n                onEvent({ severity: 'info', summary: 'Rejected', detail: 'Maybe this already deleted', life: 3000 })\r\n            }\r\n        }else{\r\n            onEvent({ severity: 'error', summary: 'Rejected', detail: 'You have rejected', life: 3000 })\r\n        }\r\n    }\r\n    const onAction=async () => {\r\n        let response;\r\n        if (type === \"insert\") {\r\n            response = await Actions.Providers.InsertProvider({...current,groupId:group.id})\r\n            parseResponse({\r\n                status:response.status,\r\n                data:response.status? {data:1}:{data:0}\r\n            })\r\n        } else {\r\n            response = await Actions.Providers.UpdateProvider({id:current.id,data:{ ...current,groupId:group.id}})\r\n            parseResponse({\r\n                status:response.status,\r\n                data:response.status? {data:1}:{data:0}\r\n            })\r\n        }\r\n        if(response.status){\r\n            setType(null)\r\n        }\r\n    }\r\n    const renderFooter=()=>{\r\n        return (\r\n            <div>\r\n                <Button label=\"No\" icon=\"pi pi-times\" onClick={() => {\r\n                    setType(null);\r\n                }} className=\"p-button-text\" />\r\n                <Button label=\"Yes\" icon=\"pi pi-check\" onClick={() =>onAction()} autoFocus />\r\n            </div>\r\n        );\r\n    }\r\n    const renderHeader=()=>{\r\n        return  type===\"insert\"? `New Provider(${group.name})`:`Update Group (${group.name})`\r\n    };\r\n    const visible=()=>{\r\n        if(!group){\r\n            return;\r\n        }\r\n        if(type===\"insert\"){\r\n            return true;\r\n        }else if(type===\"update\" && selected){\r\n            return true;\r\n        }\r\n        return false\r\n    }\r\n    return (\r\n        <>\r\n            <Dialog header={renderHeader} visible={visible()} style={{ width: '50vw' }} footer={renderFooter} onHide={() => setType(null)}>\r\n                <div className=\"p-fluid\" style={{height:\"270px\"}}>\r\n                    <div className=\"p-field\">\r\n                        <label htmlFor=\"gName\">Group Name</label>\r\n                        <InputText id=\"gName\" type=\"text\"  value={current.name} onChange={event => setCurrent({...current,name:event.target.value})}/>\r\n                    </div>\r\n                    <div className=\"p-field\">\r\n                        <label htmlFor=\"note\">Note</label>\r\n                        <InputText id=\"note\" type=\"text\" value={current.note} onChange={event => setCurrent({...current,note:event.target.value})} />\r\n                    </div>\r\n                    <div className=\"p-field\">\r\n                        <label htmlFor=\"disabled\">On/Off</label>\r\n                        <Dropdown inputId=\"disabled\" optionValue={\"id\"} value={current.disabled} options={[{id:1,name:\"On\"},{id:0,name: \"Off\"}]} onChange={event=>setCurrent({...current,disabled:event.value})} placeholder=\"Select\" optionLabel=\"name\"/>\r\n                    </div>\r\n                </div>\r\n            </Dialog>\r\n            <div className=\"flex-box call\" style={{flex:'1',marginLeft:'10px'}}>\r\n                <div className=\"title\">\r\n                    <div>Provider</div>\r\n                    <i className=\"pi pi-plus\" onClick={()=>{\r\n                        setSelected(null)\r\n                        setType(\"insert\")}\r\n                    }/>\r\n                    <i className=\"pi pi-pencil\" onClick={()=>setType(\"update\")}/>\r\n                    <i className=\"pi pi-trash\" onClick={onDelete}/>\r\n                </div>\r\n                <div className=\"flex-cont grid\">\r\n                    {loader && <ProgressBar style={{ height: '6px' }} mode=\"indeterminate\" />}\r\n                    <DataTable\r\n                        selection={selected} onSelectionChange={e => setSelected(e.value)} selectionMode=\"single\" dataKey=\"id\"\r\n                        scrollable value={data}  className=\"p-datatable-gridlines\" rowClassName={data => {\r\n                        return {\r\n                            'bg-red': data.disabled === 1\r\n                        }\r\n                    }}>\r\n                        <Column field=\"id\" header=\"ID\" />\r\n                        <Column field=\"name\" header=\"Name\" filter  filterPlaceholder=\"Search by name\"/>\r\n                        <Column field=\"disabled\" header=\"On/Off\"/>\r\n                    </DataTable>\r\n                </div>\r\n            </div>\r\n        </>\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}