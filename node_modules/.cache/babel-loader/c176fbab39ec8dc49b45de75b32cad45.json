{"ast":null,"code":"import _objectSpread from \"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport axios from 'axios';\nimport { v4 as uuidv4 } from 'uuid';\nimport EventEmitter from \"../utils/eventEmitter\";\nvar http = axios.create({\n  baseURL: '/',\n  headers: {\n    'content-type': 'application/x-www-form-urlencoded'\n  }\n});\nvar eventEmitter = new EventEmitter();\nvar Request = {\n  enableEvents: true,\n  data: {\n    event: false,\n    loader: false,\n    requestEventData: null,\n    loaderData: null\n  },\n  events: {\n    global: {},\n    local: {},\n    loader: {}\n  },\n  disableEvent: function disableEvent() {\n    this.enableEvents = false;\n    return this;\n  },\n  event: function event(_ref) {\n    var name = _ref.name,\n        _ref$type = _ref.type,\n        type = _ref$type === void 0 ? \"error\" : _ref$type,\n        _ref$summary = _ref.summary,\n        summary = _ref$summary === void 0 ? \"Http Error\" : _ref$summary,\n        _ref$details = _ref.details,\n        details = _ref$details === void 0 ? \"error\" : _ref$details,\n        _ref$sticky = _ref.sticky,\n        sticky = _ref$sticky === void 0 ? false : _ref$sticky,\n        _ref$life = _ref.life,\n        life = _ref$life === void 0 ? 2000 : _ref$life;\n    eventEmitter.emit(name, {\n      severity: type,\n      summary: summary,\n      detail: details,\n      sticky: sticky,\n      life: life\n    });\n    return this;\n  },\n  loader: function loader() {\n    var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'app';\n    var uuid = uuidv4();\n    this.data.loader = true;\n    this.data.loaderData = {\n      event: event,\n      uuid: uuid\n    };\n    return this;\n  },\n  dispatchLoader: function dispatchLoader() {\n    var event = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'app';\n    var status = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (!this.events['loader'][event]) return;\n    this.events[\"loader\"][event].forEach(function (callback) {\n      return callback(status);\n    });\n    return this;\n  },\n  subscribeLoader: function subscribeLoader(event, callback) {\n    if (!this.events[\"loader\"][event]) this.events[\"loader\"][event] = [];\n    this.events[\"loader\"][event].push(callback);\n    return this;\n  },\n  unsubscribeLoader: function unsubscribeLoader(event) {\n    if (this.events[\"loader\"][event]) delete this.events[\"loader\"][event];\n    return this;\n  },\n  post: function post(url, data) {\n    var _this = this;\n\n    var header = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n\n    if (this.data.loader) {\n      this.dispatchLoader(this.data.loaderData.event, true);\n    }\n\n    return new Promise(function (resolve) {\n      try {\n        http.post(url, data, header ? {\n          headers: _objectSpread(_objectSpread({}, header), {}, {\n            Authorization: \"Bearer \" + localStorage.getItem(\"access_token\")\n          })\n        } : {\n          headers: {\n            'Content-Type': 'application/x-www-form-urlencoded',\n            Authorization: \"Bearer \" + localStorage.getItem(\"access_token\")\n          }\n        }).then(function (response) {\n          if (response.status === 200) {\n            resolve({\n              status: true,\n              data: response.data\n            });\n          } else {\n            if (_this.enableEvents) {\n              eventEmitter.emit(\"httpError\", {\n                severity: 'error',\n                summary: 'Http Error',\n                detail: \"error  \".concat(response.status),\n                sticky: false,\n                life: 2000\n              });\n            }\n\n            resolve({\n              status: false,\n              data: response.data\n            });\n          }\n        }).catch(function (reason) {\n          if (_this.enableEvents) {\n            eventEmitter.emit(\"httpError\", {\n              severity: 'error',\n              summary: 'Http Error',\n              detail: \"error  \".concat(reason.response.status),\n              sticky: false,\n              life: 2000\n            });\n          }\n\n          resolve({\n            status: false\n          });\n        });\n      } catch (e) {\n        console.log(e.message);\n      }\n    }).finally(function () {\n      if (_this.data.loader) {\n        _this.dispatchLoader(_this.data.loaderData.event, false);\n      }\n    });\n  },\n  get: function get(url) {\n    var _this2 = this;\n\n    if (this.data.loader) {\n      this.dispatchLoader(this.data.loaderData.event, true);\n    }\n\n    return new Promise(function (resolve) {\n      http.get(url, {\n        headers: {\n          Authorization: \"Bearer \" + localStorage.getItem(\"access_token\")\n        }\n      }).then(function (response) {\n        if (response.status === 200) {\n          resolve({\n            status: true,\n            data: response.data\n          });\n        } else {\n          if (_this2.enableEvents) {\n            eventEmitter.emit(\"httpError\", {\n              severity: 'error',\n              summary: 'Http Error',\n              detail: \"error  \".concat(response.status),\n              sticky: false,\n              life: 2000\n            });\n          }\n\n          resolve({\n            status: false,\n            data: response.data\n          });\n        }\n      }).catch(function (reason) {\n        if (_this2.enableEvents) {\n          eventEmitter.emit(\"httpError\", {\n            severity: 'error',\n            summary: 'Http Error',\n            detail: \"error  \".concat(reason.response.status),\n            sticky: false,\n            life: 2000\n          });\n        }\n\n        resolve({\n          status: false\n        });\n      });\n    }).finally(function () {\n      if (_this2.data.loader) {\n        _this2.dispatchLoader(_this2.data.loaderData.event, false);\n      }\n    });\n  }\n};\nexport default Request;","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/slotmaster-dashboard/src/core/http/http.js"],"names":["axios","v4","uuidv4","EventEmitter","http","create","baseURL","headers","eventEmitter","Request","enableEvents","data","event","loader","requestEventData","loaderData","events","global","local","disableEvent","name","type","summary","details","sticky","life","emit","severity","detail","uuid","dispatchLoader","status","forEach","callback","subscribeLoader","push","unsubscribeLoader","post","url","header","Promise","resolve","Authorization","localStorage","getItem","then","response","catch","reason","e","console","log","message","finally","get"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,EAAE,IAAIC,MAAf,QAA6B,MAA7B;AACA,OAAOC,YAAP,MAAyB,uBAAzB;AACA,IAAMC,IAAI,GAAIJ,KAAK,CAACK,MAAN,CAAa;AACvBC,EAAAA,OAAO,EAAE,GADc;AAEvBC,EAAAA,OAAO,EAAE;AACL,oBAAgB;AADX;AAFc,CAAb,CAAd;AAMA,IAAMC,YAAY,GAAC,IAAIL,YAAJ,EAAnB;AACA,IAAMM,OAAO,GAAG;AACdC,EAAAA,YAAY,EAAC,IADC;AAEdC,EAAAA,IAAI,EAAC;AACCC,IAAAA,KAAK,EAAC,KADP;AAECC,IAAAA,MAAM,EAAC,KAFR;AAGCC,IAAAA,gBAAgB,EAAC,IAHlB;AAICC,IAAAA,UAAU,EAAC;AAJZ,GAFS;AAQZC,EAAAA,MAAM,EAAC;AACHC,IAAAA,MAAM,EAAC,EADJ;AAEHC,IAAAA,KAAK,EAAC,EAFH;AAGHL,IAAAA,MAAM,EAAC;AAHJ,GARK;AAaZM,EAAAA,YAAY,EAAC,wBAAW;AACtB,SAAKT,YAAL,GAAkB,KAAlB;AACA,WAAO,IAAP;AACD,GAhBW;AAiBZE,EAAAA,KAAK,EAAC,qBAA2F;AAAA,QAAjFQ,IAAiF,QAAjFA,IAAiF;AAAA,yBAA5EC,IAA4E;AAAA,QAA5EA,IAA4E,0BAAvE,OAAuE;AAAA,4BAA/DC,OAA+D;AAAA,QAA/DA,OAA+D,6BAAvD,YAAuD;AAAA,4BAAzCC,OAAyC;AAAA,QAAzCA,OAAyC,6BAAjC,OAAiC;AAAA,2BAAxBC,MAAwB;AAAA,QAAxBA,MAAwB,4BAAjB,KAAiB;AAAA,yBAAXC,IAAW;AAAA,QAAXA,IAAW,0BAAN,IAAM;AAC7FjB,IAAAA,YAAY,CAACkB,IAAb,CAAkBN,IAAlB,EAAuB;AAACO,MAAAA,QAAQ,EAAEN,IAAX;AAAiBC,MAAAA,OAAO,EAAEA,OAA1B;AAAmCM,MAAAA,MAAM,EAAEL,OAA3C;AAAoDC,MAAAA,MAAM,EAAEA,MAA5D;AAAmEC,MAAAA,IAAI,EAACA;AAAxE,KAAvB;AACA,WAAO,IAAP;AACH,GApBW;AAqBZZ,EAAAA,MAAM,EAAC,kBAAqB;AAAA,QAAZD,KAAY,uEAAN,KAAM;AACxB,QAAMiB,IAAI,GAAG3B,MAAM,EAAnB;AACA,SAAKS,IAAL,CAAUE,MAAV,GAAiB,IAAjB;AACA,SAAKF,IAAL,CAAUI,UAAV,GAAuB;AAACH,MAAAA,KAAK,EAAEA,KAAR;AAAeiB,MAAAA,IAAI,EAAEA;AAArB,KAAvB;AACA,WAAO,IAAP;AACH,GA1BW;AA4BZC,EAAAA,cAAc,EAAE,0BAAkC;AAAA,QAAzBlB,KAAyB,uEAAnB,KAAmB;AAAA,QAAbmB,MAAa,uEAAN,KAAM;AAC9C,QAAG,CAAC,KAAKf,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,CAAJ,EAAkC;AAClC,SAAKI,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,EAA6BoB,OAA7B,CAAqC,UAAAC,QAAQ;AAAA,aAAEA,QAAQ,CAACF,MAAD,CAAV;AAAA,KAA7C;AACA,WAAO,IAAP;AACH,GAhCW;AAkCZG,EAAAA,eAAe,EAAE,yBAAUtB,KAAV,EAAgBqB,QAAhB,EAA0B;AACvC,QAAG,CAAC,KAAKjB,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,CAAJ,EAAkC,KAAKI,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,IAA+B,EAA/B;AAClC,SAAKI,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,EAA6BuB,IAA7B,CAAkCF,QAAlC;AACA,WAAO,IAAP;AACH,GAtCW;AAwCZG,EAAAA,iBAAiB,EAAE,2BAASxB,KAAT,EAAe;AAC9B,QAAG,KAAKI,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,CAAH,EAAiC,OAAO,KAAKI,MAAL,CAAY,QAAZ,EAAsBJ,KAAtB,CAAP;AACjC,WAAO,IAAP;AACH,GA3CW;AA4CZyB,EAAAA,IAAI,EAAC,cAASC,GAAT,EAAa3B,IAAb,EAA+B;AAAA;;AAAA,QAAZ4B,MAAY,uEAAL,IAAK;;AAChC,QAAG,KAAK5B,IAAL,CAAUE,MAAb,EAAoB;AAChB,WAAKiB,cAAL,CAAoB,KAAKnB,IAAL,CAAUI,UAAV,CAAqBH,KAAzC,EAA+C,IAA/C;AACH;;AACD,WAAO,IAAI4B,OAAJ,CAAY,UAACC,OAAD,EAAe;AAChC,UAAI;AACFrC,QAAAA,IAAI,CAACiC,IAAL,CAAUC,GAAV,EAAc3B,IAAd,EAAqB4B,MAAD,GAAW;AAC3BhC,UAAAA,OAAO,kCAAKgC,MAAL;AAAaG,YAAAA,aAAa,EAAE,YAAUC,YAAY,CAACC,OAAb,CAAqB,cAArB;AAAtC;AADoB,SAAX,GAElB;AACErC,UAAAA,OAAO,EAAC;AACJ,4BAAgB,mCADZ;AAEJmC,YAAAA,aAAa,EAAE,YAAUC,YAAY,CAACC,OAAb,CAAqB,cAArB;AAFrB;AADV,SAFF,EAOIC,IAPJ,CAOU,UAAAC,QAAQ,EAAI;AACpB,cAAGA,QAAQ,CAACf,MAAT,KAAkB,GAArB,EAAyB;AACrBU,YAAAA,OAAO,CAAC;AAACV,cAAAA,MAAM,EAAC,IAAR;AAAapB,cAAAA,IAAI,EAACmC,QAAQ,CAACnC;AAA3B,aAAD,CAAP;AACH,WAFD,MAEK;AACD,gBAAG,KAAI,CAACD,YAAR,EAAqB;AACjBF,cAAAA,YAAY,CAACkB,IAAb,CAAkB,WAAlB,EAA8B;AAACC,gBAAAA,QAAQ,EAAE,OAAX;AAAoBL,gBAAAA,OAAO,EAAE,YAA7B;AAA2CM,gBAAAA,MAAM,mBAAYkB,QAAQ,CAACf,MAArB,CAAjD;AAAgFP,gBAAAA,MAAM,EAAE,KAAxF;AAA8FC,gBAAAA,IAAI,EAAC;AAAnG,eAA9B;AACH;;AACDgB,YAAAA,OAAO,CAAC;AAACV,cAAAA,MAAM,EAAC,KAAR;AAAcpB,cAAAA,IAAI,EAACmC,QAAQ,CAACnC;AAA5B,aAAD,CAAP;AACH;AACF,SAhBD,EAgBGoC,KAhBH,CAgBS,UAAAC,MAAM,EAAI;AACf,cAAG,KAAI,CAACtC,YAAR,EAAsB;AAClBF,YAAAA,YAAY,CAACkB,IAAb,CAAkB,WAAlB,EAA8B;AAACC,cAAAA,QAAQ,EAAE,OAAX;AAAoBL,cAAAA,OAAO,EAAE,YAA7B;AAA2CM,cAAAA,MAAM,mBAAYoB,MAAM,CAACF,QAAP,CAAgBf,MAA5B,CAAjD;AAAuFP,cAAAA,MAAM,EAAE,KAA/F;AAAqGC,cAAAA,IAAI,EAAC;AAA1G,aAA9B;AACH;;AACDgB,UAAAA,OAAO,CAAC;AAAEV,YAAAA,MAAM,EAAC;AAAT,WAAD,CAAP;AACH,SArBD;AAsBD,OAvBD,CAuBC,OAAOkB,CAAP,EAAU;AACPC,QAAAA,OAAO,CAACC,GAAR,CAAYF,CAAC,CAACG,OAAd;AACH;AAEF,KA5BM,EA4BJC,OA5BI,CA4BI,YAAI;AACX,UAAG,KAAI,CAAC1C,IAAL,CAAUE,MAAb,EAAoB;AAChB,QAAA,KAAI,CAACiB,cAAL,CAAoB,KAAI,CAACnB,IAAL,CAAUI,UAAV,CAAqBH,KAAzC,EAA+C,KAA/C;AACH;AACJ,KAhCM,CAAP;AAiCH,GAjFW;AAkFZ0C,EAAAA,GAAG,EAAC,aAAShB,GAAT,EAAa;AAAA;;AACb,QAAG,KAAK3B,IAAL,CAAUE,MAAb,EAAoB;AAChB,WAAKiB,cAAL,CAAoB,KAAKnB,IAAL,CAAUI,UAAV,CAAqBH,KAAzC,EAA+C,IAA/C;AACH;;AAED,WAAO,IAAI4B,OAAJ,CAAY,UAACC,OAAD,EAAa;AAC5BrC,MAAAA,IAAI,CAACkD,GAAL,CAAShB,GAAT,EAAa;AACL/B,QAAAA,OAAO,EAAC;AACJmC,UAAAA,aAAa,EAAE,YAAUC,YAAY,CAACC,OAAb,CAAqB,cAArB;AADrB;AADH,OAAb,EAIGC,IAJH,CAKI,UAAAC,QAAQ,EAAE;AACN,YAAGA,QAAQ,CAACf,MAAT,KAAkB,GAArB,EAAyB;AACrBU,UAAAA,OAAO,CAAC;AAACV,YAAAA,MAAM,EAAC,IAAR;AAAapB,YAAAA,IAAI,EAACmC,QAAQ,CAACnC;AAA3B,WAAD,CAAP;AACH,SAFD,MAEK;AACD,cAAG,MAAI,CAACD,YAAR,EAAsB;AAClBF,YAAAA,YAAY,CAACkB,IAAb,CAAkB,WAAlB,EAA8B;AAACC,cAAAA,QAAQ,EAAE,OAAX;AAAoBL,cAAAA,OAAO,EAAE,YAA7B;AAA2CM,cAAAA,MAAM,mBAAYkB,QAAQ,CAACf,MAArB,CAAjD;AAAgFP,cAAAA,MAAM,EAAE,KAAxF;AAA8FC,cAAAA,IAAI,EAAC;AAAnG,aAA9B;AACH;;AACDgB,UAAAA,OAAO,CAAC;AAACV,YAAAA,MAAM,EAAC,KAAR;AAAcpB,YAAAA,IAAI,EAACmC,QAAQ,CAACnC;AAA5B,WAAD,CAAP;AACH;AACJ,OAdL,EAcOoC,KAdP,CAca,UAAAC,MAAM,EAAI;AACnB,YAAG,MAAI,CAACtC,YAAR,EAAsB;AAClBF,UAAAA,YAAY,CAACkB,IAAb,CAAkB,WAAlB,EAA8B;AAACC,YAAAA,QAAQ,EAAE,OAAX;AAAoBL,YAAAA,OAAO,EAAE,YAA7B;AAA2CM,YAAAA,MAAM,mBAAYoB,MAAM,CAACF,QAAP,CAAgBf,MAA5B,CAAjD;AAAuFP,YAAAA,MAAM,EAAE,KAA/F;AAAqGC,YAAAA,IAAI,EAAC;AAA1G,WAA9B;AAEH;;AAEDgB,QAAAA,OAAO,CAAC;AAAEV,UAAAA,MAAM,EAAC;AAAT,SAAD,CAAP;AACH,OArBD;AAsBH,KAvBM,EAuBJsB,OAvBI,CAuBI,YAAI;AACX,UAAG,MAAI,CAAC1C,IAAL,CAAUE,MAAb,EAAoB;AAChB,QAAA,MAAI,CAACiB,cAAL,CAAoB,MAAI,CAACnB,IAAL,CAAUI,UAAV,CAAqBH,KAAzC,EAA+C,KAA/C;AACH;AACJ,KA3BM,CAAP;AA4BH;AAnHW,CAAhB;AAuHA,eAAeH,OAAf","sourcesContent":["import axios from 'axios';\r\nimport { v4 as uuidv4 } from 'uuid';\r\nimport EventEmitter from \"../utils/eventEmitter\"\r\nconst http =  axios.create({\r\n    baseURL: '/',\r\n    headers: {\r\n        'content-type': 'application/x-www-form-urlencoded'\r\n    }\r\n})\r\nconst eventEmitter=new EventEmitter();\r\nconst Request = {\r\n  enableEvents:true,\r\n  data:{\r\n        event:false,\r\n        loader:false,\r\n        requestEventData:null,\r\n        loaderData:null\r\n    },\r\n    events:{\r\n        global:{},\r\n        local:{},\r\n        loader:{}\r\n    },\r\n    disableEvent:function (){\r\n      this.enableEvents=false;\r\n      return this;\r\n    },\r\n    event:function({name,type=\"error\",summary=\"Http Error\", details=\"error\", sticky=false,life=2000}){\r\n        eventEmitter.emit(name,{severity: type, summary: summary, detail: details, sticky: sticky,life:life})\r\n        return this;\r\n    },\r\n    loader:function(event='app'){\r\n        const uuid = uuidv4();\r\n        this.data.loader=true;\r\n        this.data.loaderData = {event: event, uuid: uuid};\r\n        return this;\r\n    },\r\n\r\n    dispatchLoader: function(event='app',status=false){\r\n        if(!this.events['loader'][event]) return;\r\n        this.events[\"loader\"][event].forEach(callback=>callback(status))\r\n        return this;\r\n    },\r\n\r\n    subscribeLoader: function (event,callback) {\r\n        if(!this.events[\"loader\"][event]) this.events[\"loader\"][event] = [];\r\n        this.events[\"loader\"][event].push(callback)\r\n        return this;\r\n    },\r\n\r\n    unsubscribeLoader: function(event){\r\n        if(this.events[\"loader\"][event]) delete this.events[\"loader\"][event];\r\n        return this;\r\n    },\r\n    post:function(url,data, header=null){\r\n        if(this.data.loader){\r\n            this.dispatchLoader(this.data.loaderData.event,true);\r\n        }\r\n        return new Promise((resolve, ) => {\r\n          try {\r\n            http.post(url,data,((header) ? {\r\n                headers:{...header, Authorization: `Bearer `+localStorage.getItem(\"access_token\")},\r\n            }:{\r\n                headers:{\r\n                    'Content-Type': 'application/x-www-form-urlencoded',\r\n                    Authorization: `Bearer `+localStorage.getItem(\"access_token\")\r\n                }\r\n            })).then( response => {\r\n              if(response.status===200){\r\n                  resolve({status:true,data:response.data})\r\n              }else{\r\n                  if(this.enableEvents){\r\n                      eventEmitter.emit(\"httpError\",{severity: 'error', summary: 'Http Error', detail: `error  ${response.status}`, sticky: false,life:2000})\r\n                  }\r\n                  resolve({status:false,data:response.data})\r\n              }\r\n            }).catch(reason => {\r\n                if(this.enableEvents) {\r\n                    eventEmitter.emit(\"httpError\",{severity: 'error', summary: 'Http Error', detail: `error  ${reason.response.status}`, sticky: false,life:2000})\r\n                }\r\n                resolve({ status:false })\r\n            })\r\n          }catch (e) {\r\n              console.log(e.message)\r\n          }\r\n\r\n        }).finally(()=>{\r\n            if(this.data.loader){\r\n                this.dispatchLoader(this.data.loaderData.event,false);\r\n            }\r\n        })\r\n    },\r\n    get:function(url){\r\n        if(this.data.loader){\r\n            this.dispatchLoader(this.data.loaderData.event,true);\r\n        }\r\n\r\n        return new Promise((resolve) => {\r\n            http.get(url,{\r\n                    headers:{\r\n                        Authorization: `Bearer `+localStorage.getItem(\"access_token\")\r\n                    }\r\n            }).then(\r\n                response=>{\r\n                    if(response.status===200){\r\n                        resolve({status:true,data:response.data})\r\n                    }else{\r\n                        if(this.enableEvents) {\r\n                            eventEmitter.emit(\"httpError\",{severity: 'error', summary: 'Http Error', detail: `error  ${response.status}`, sticky: false,life:2000})\r\n                        }\r\n                        resolve({status:false,data:response.data})\r\n                    }\r\n                }).catch(reason => {\r\n                if(this.enableEvents) {\r\n                    eventEmitter.emit(\"httpError\",{severity: 'error', summary: 'Http Error', detail: `error  ${reason.response.status}`, sticky: false,life:2000})\r\n\r\n                }\r\n\r\n                resolve({ status:false })\r\n            })\r\n        }).finally(()=>{\r\n            if(this.data.loader){\r\n                this.dispatchLoader(this.data.loaderData.event,false);\r\n            }\r\n        })\r\n    }\r\n\r\n};\r\n\r\nexport default Request;\r\n"]},"metadata":{},"sourceType":"module"}