{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\slotmaster-dashboard\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{OrderListControls}from'./OrderListControls';import{OrderListSubList}from'./OrderListSubList';import DomHandler from'../utils/DomHandler';import ObjectUtils from'../utils/ObjectUtils';import classNames from'classnames';export var OrderList=/*#__PURE__*/function(_Component){_inherits(OrderList,_Component);var _super=_createSuper(OrderList);function OrderList(props){var _this;_classCallCheck(this,OrderList);_this=_super.call(this,props);_this.state={selection:[]};_this.onItemClick=_this.onItemClick.bind(_assertThisInitialized(_this));_this.onItemKeyDown=_this.onItemKeyDown.bind(_assertThisInitialized(_this));_this.onReorder=_this.onReorder.bind(_assertThisInitialized(_this));return _this;}_createClass(OrderList,[{key:\"onItemClick\",value:function onItemClick(event){var metaKey=event.originalEvent.metaKey||event.originalEvent.ctrlKey;var index=ObjectUtils.findIndexInList(event.value,this.state.selection);var selected=index!==-1;var selection;if(selected){if(metaKey)selection=this.state.selection.filter(function(val,i){return i!==index;});else selection=[event.value];}else{if(metaKey)selection=[].concat(_toConsumableArray(this.state.selection),[event.value]);else selection=[event.value];}this.setState({selection:selection});}},{key:\"onItemKeyDown\",value:function onItemKeyDown(event){var listItem=event.originalEvent.currentTarget;switch(event.originalEvent.which){//down\ncase 40:var nextItem=this.findNextItem(listItem);if(nextItem){nextItem.focus();}event.originalEvent.preventDefault();break;//up\ncase 38:var prevItem=this.findPrevItem(listItem);if(prevItem){prevItem.focus();}event.originalEvent.preventDefault();break;//enter\ncase 13:this.onItemClick(event);event.originalEvent.preventDefault();break;default:break;}}},{key:\"findNextItem\",value:function findNextItem(item){var nextItem=item.nextElementSibling;if(nextItem)return!DomHandler.hasClass(nextItem,'p-orderlist-item')?this.findNextItem(nextItem):nextItem;else return null;}},{key:\"findPrevItem\",value:function findPrevItem(item){var prevItem=item.previousElementSibling;if(prevItem)return!DomHandler.hasClass(prevItem,'p-orderlist-item')?this.findPrevItem(prevItem):prevItem;else return null;}},{key:\"onReorder\",value:function onReorder(event){if(this.props.onChange){this.props.onChange({event:event.originalEvent,value:event.value});}this.reorderDirection=event.direction;}},{key:\"componentDidUpdate\",value:function componentDidUpdate(){if(this.reorderDirection){this.updateListScroll();this.reorderDirection=null;}}},{key:\"updateListScroll\",value:function updateListScroll(){var listItems=DomHandler.find(this.subList.listElement,'.p-orderlist-item.p-highlight');if(listItems&&listItems.length){switch(this.reorderDirection){case'up':DomHandler.scrollInView(this.subList.listElement,listItems[0]);break;case'top':this.subList.listElement.scrollTop=0;break;case'down':DomHandler.scrollInView(this.subList.listElement,listItems[listItems.length-1]);break;case'bottom':this.subList.listElement.scrollTop=this.subList.listElement.scrollHeight;break;default:break;}}}},{key:\"render\",value:function render(){var _this2=this;var className=classNames('p-orderlist p-component',this.props.className);return/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this2.element=el;},id:this.props.id,className:className,style:this.props.style},/*#__PURE__*/React.createElement(OrderListControls,{value:this.props.value,selection:this.state.selection,onReorder:this.onReorder}),/*#__PURE__*/React.createElement(OrderListSubList,{ref:function ref(el){return _this2.subList=el;},value:this.props.value,selection:this.state.selection,onItemClick:this.onItemClick,onItemKeyDown:this.onItemKeyDown,itemTemplate:this.props.itemTemplate,header:this.props.header,listStyle:this.props.listStyle,dragdrop:this.props.dragdrop,onDragStart:this.onDragStart,onDragEnter:this.onDragEnter,onDragEnd:this.onDragEnd,onDragLeave:this.onDragEnter,onDrop:this.onDrop,onChange:this.props.onChange,tabIndex:this.props.tabIndex}));}}]);return OrderList;}(Component);OrderList.defaultProps={id:null,value:null,header:null,style:null,className:null,listStyle:null,dragdrop:false,tabIndex:0,onChange:null,itemTemplate:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/slotmaster-dashboard/src/components/orderlist/OrderList.js"],"names":["React","Component","OrderListControls","OrderListSubList","DomHandler","ObjectUtils","classNames","OrderList","props","state","selection","onItemClick","bind","onItemKeyDown","onReorder","event","metaKey","originalEvent","ctrlKey","index","findIndexInList","value","selected","filter","val","i","setState","listItem","currentTarget","which","nextItem","findNextItem","focus","preventDefault","prevItem","findPrevItem","item","nextElementSibling","hasClass","previousElementSibling","onChange","reorderDirection","direction","updateListScroll","listItems","find","subList","listElement","length","scrollInView","scrollTop","scrollHeight","className","el","element","id","style","itemTemplate","header","listStyle","dragdrop","onDragStart","onDragEnter","onDragEnd","onDrop","tabIndex","defaultProps"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport {OrderListControls} from './OrderListControls';\r\nimport {OrderListSubList} from './OrderListSubList';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\nimport classNames from 'classnames'\r\n\r\nexport class OrderList extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        value: null,\r\n        header: null,\r\n        style: null,\r\n        className: null,\r\n        listStyle: null,\r\n        dragdrop: false,\r\n        tabIndex: 0,\r\n        onChange: null,\r\n        itemTemplate: null\r\n    }\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        value: PropTypes.array,\r\n        header: PropTypes.string,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        listStyle: PropTypes.object,\r\n        dragdrop: PropTypes.bool,\r\n        tabIndex: PropTypes.number,\r\n        onChange: PropTypes.func,\r\n        itemTemplate: PropTypes.func\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            selection: []\r\n        };\r\n\r\n        this.onItemClick = this.onItemClick.bind(this);\r\n        this.onItemKeyDown = this.onItemKeyDown.bind(this);\r\n        this.onReorder = this.onReorder.bind(this);\r\n    }\r\n\r\n    onItemClick(event) {\r\n        let metaKey = (event.originalEvent.metaKey || event.originalEvent.ctrlKey);\r\n        let index = ObjectUtils.findIndexInList(event.value, this.state.selection);\r\n        let selected = (index !== -1);\r\n        let selection;\r\n\r\n        if (selected) {\r\n            if (metaKey)\r\n                selection = this.state.selection.filter((val, i) => i !== index);\r\n            else\r\n                selection = [event.value];\r\n        }\r\n        else {\r\n            if (metaKey)\r\n                selection = [...this.state.selection, event.value];\r\n            else\r\n                selection = [event.value];\r\n        }\r\n\r\n        this.setState({selection: selection});\r\n    }\r\n\r\n    onItemKeyDown(event) {\r\n        let listItem = event.originalEvent.currentTarget;\r\n\r\n        switch(event.originalEvent.which) {\r\n            //down\r\n            case 40:\r\n                let nextItem = this.findNextItem(listItem);\r\n                if (nextItem) {\r\n                    nextItem.focus();\r\n                }\r\n\r\n                event.originalEvent.preventDefault();\r\n            break;\r\n\r\n            //up\r\n            case 38:\r\n                let prevItem = this.findPrevItem(listItem);\r\n                if (prevItem) {\r\n                    prevItem.focus();\r\n                }\r\n\r\n                event.originalEvent.preventDefault();\r\n            break;\r\n\r\n            //enter\r\n            case 13:\r\n                this.onItemClick(event);\r\n                event.originalEvent.preventDefault();\r\n            break;\r\n\r\n            default:\r\n            break;\r\n        }\r\n    }\r\n\r\n    findNextItem(item) {\r\n        let nextItem = item.nextElementSibling;\r\n\r\n        if (nextItem)\r\n            return !DomHandler.hasClass(nextItem, 'p-orderlist-item') ? this.findNextItem(nextItem) : nextItem;\r\n        else\r\n            return null;\r\n    }\r\n\r\n    findPrevItem(item) {\r\n        let prevItem = item.previousElementSibling;\r\n\r\n        if (prevItem)\r\n            return !DomHandler.hasClass(prevItem, 'p-orderlist-item') ? this.findPrevItem(prevItem) : prevItem;\r\n        else\r\n            return null;\r\n    }\r\n\r\n    onReorder(event) {\r\n        if (this.props.onChange) {\r\n            this.props.onChange({\r\n                event: event.originalEvent,\r\n                value: event.value\r\n            });\r\n        }\r\n\r\n        this.reorderDirection = event.direction;\r\n    }\r\n\r\n    componentDidUpdate() {\r\n        if(this.reorderDirection) {\r\n            this.updateListScroll();\r\n            this.reorderDirection = null;\r\n        }\r\n    }\r\n\r\n    updateListScroll() {\r\n        let listItems = DomHandler.find(this.subList.listElement, '.p-orderlist-item.p-highlight');\r\n\r\n        if(listItems && listItems.length) {\r\n            switch(this.reorderDirection) {\r\n                case 'up':\r\n                    DomHandler.scrollInView(this.subList.listElement, listItems[0]);\r\n                break;\r\n\r\n                case 'top':\r\n                    this.subList.listElement.scrollTop = 0;\r\n                break;\r\n\r\n                case 'down':\r\n                    DomHandler.scrollInView(this.subList.listElement, listItems[listItems.length - 1]);\r\n                break;\r\n\r\n                case 'bottom':\r\n                    this.subList.listElement.scrollTop = this.subList.listElement.scrollHeight;\r\n                break;\r\n\r\n                default:\r\n                break;\r\n            }\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let className = classNames('p-orderlist p-component', this.props.className);\r\n\r\n        return (\r\n            <div ref={(el) => this.element = el} id={this.props.id} className={className} style={this.props.style}>\r\n                <OrderListControls value={this.props.value} selection={this.state.selection} onReorder={this.onReorder} />\r\n                <OrderListSubList ref={(el) => this.subList = el} value={this.props.value} selection={this.state.selection} onItemClick={this.onItemClick} onItemKeyDown={this.onItemKeyDown}\r\n                            itemTemplate={this.props.itemTemplate} header={this.props.header} listStyle={this.props.listStyle}\r\n                            dragdrop={this.props.dragdrop} onDragStart={this.onDragStart} onDragEnter={this.onDragEnter} onDragEnd={this.onDragEnd} onDragLeave={this.onDragEnter} onDrop={this.onDrop}\r\n                            onChange={this.props.onChange} tabIndex={this.props.tabIndex} />\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}