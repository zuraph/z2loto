{"ast":null,"code":"import _classCallCheck from \"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zloto\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zloto\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zloto\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zloto\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";\nimport _createSuper from \"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zloto\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zloto\\\\src\\\\components\\\\knob\\\\Knob.js\";\nimport React, { Component } from 'react';\nimport PropTypes from 'prop-types';\nimport { classNames } from '../utils/ClassNames';\nimport UniqueComponentId from '../utils/UniqueComponentId';\nexport var Knob = /*#__PURE__*/function (_Component) {\n  _inherits(Knob, _Component);\n\n  var _super = _createSuper(Knob);\n\n  function Knob(props) {\n    var _this;\n\n    _classCallCheck(this, Knob);\n\n    _this = _super.call(this, props);\n    _this.state = {};\n    _this.radius = 40;\n    _this.midX = 50;\n    _this.midY = 50;\n    _this.minRadians = 4 * Math.PI / 3;\n    _this.maxRadians = -Math.PI / 3;\n    _this.id = _this.props.id || UniqueComponentId();\n    _this.onClick = _this.onClick.bind(_assertThisInitialized(_this));\n    _this.onMouseDown = _this.onMouseDown.bind(_assertThisInitialized(_this));\n    _this.onMouseUp = _this.onMouseUp.bind(_assertThisInitialized(_this));\n    _this.onTouchStart = _this.onTouchStart.bind(_assertThisInitialized(_this));\n    _this.onTouchEnd = _this.onTouchEnd.bind(_assertThisInitialized(_this));\n    _this.onMouseMove = _this.onMouseMove.bind(_assertThisInitialized(_this));\n    _this.onTouchMove = _this.onTouchMove.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(Knob, [{\n    key: \"updateValue\",\n    value: function updateValue(offsetX, offsetY) {\n      var dx = offsetX - this.props.size / 2;\n      var dy = this.props.size / 2 - offsetY;\n      var angle = Math.atan2(dy, dx);\n      var start = -Math.PI / 2 - Math.PI / 6;\n      this.updateModel(angle, start);\n    }\n  }, {\n    key: \"updateModel\",\n    value: function updateModel(angle, start) {\n      var mappedValue;\n      if (angle > this.maxRadians) mappedValue = this.mapRange(angle, this.minRadians, this.maxRadians, this.props.min, this.props.max);else if (angle < start) mappedValue = this.mapRange(angle + 2 * Math.PI, this.minRadians, this.maxRadians, this.props.min, this.props.max);else return;\n\n      if (this.props.onChange) {\n        var newValue = Math.round((mappedValue - this.props.min) / this.props.step) * this.props.step + this.props.min;\n        this.props.onChange({\n          value: newValue\n        });\n      }\n    }\n  }, {\n    key: \"mapRange\",\n    value: function mapRange(x, inMin, inMax, outMin, outMax) {\n      return (x - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;\n    }\n  }, {\n    key: \"onClick\",\n    value: function onClick(event) {\n      if (!this.props.disabled && !this.props.readOnly) {\n        this.updateValue(event.nativeEvent.offsetX, event.nativeEvent.offsetY);\n      }\n    }\n  }, {\n    key: \"onMouseDown\",\n    value: function onMouseDown(event) {\n      if (!this.props.disabled && !this.props.readOnly) {\n        this.windowMouseMoveListener = this.onMouseMove;\n        this.windowMouseUpListener = this.onMouseUp;\n        window.addEventListener('mousemove', this.windowMouseMoveListener);\n        window.addEventListener('mouseup', this.windowMouseUpListener);\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"onMouseUp\",\n    value: function onMouseUp(event) {\n      if (!this.props.disabled && !this.props.readOnly) {\n        window.removeEventListener('mousemove', this.windowMouseMoveListener);\n        window.removeEventListener('mouseup', this.windowMouseUpListener);\n        this.windowMouseMoveListener = null;\n        this.windowMouseUpListener = null;\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"onTouchStart\",\n    value: function onTouchStart(event) {\n      if (!this.props.disabled && !this.props.readOnly) {\n        this.windowTouchMoveListener = this.onTouchMove;\n        this.windowTouchEndListener = this.onTouchEnd;\n        window.addEventListener('touchmove', this.windowTouchMoveListener, {\n          passive: false,\n          cancelable: false\n        });\n        window.addEventListener('touchend', this.windowTouchEndListener);\n      }\n    }\n  }, {\n    key: \"onTouchEnd\",\n    value: function onTouchEnd(event) {\n      if (!this.props.disabled && !this.props.readOnly) {\n        window.removeEventListener('touchmove', this.windowTouchMoveListener);\n        window.removeEventListener('touchend', this.windowTouchEndListener);\n        this.windowTouchMoveListener = null;\n        this.windowTouchEndListener = null;\n      }\n    }\n  }, {\n    key: \"onMouseMove\",\n    value: function onMouseMove(event) {\n      if (!this.props.disabled && !this.props.readOnly) {\n        this.updateValue(event.offsetX, event.offsetY);\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"onTouchMove\",\n    value: function onTouchMove(event) {\n      if (!this.props.disabled && !this.props.readOnly && event.touches.length === 1) {\n        var rect = this.element.getBoundingClientRect();\n        var touch = event.targetTouches.item(0);\n        var offsetX = touch.clientX - rect.left;\n        var offsetY = touch.clientY - rect.top;\n        this.updateValue(offsetX, offsetY);\n        event.preventDefault();\n      }\n    }\n  }, {\n    key: \"rangePath\",\n    value: function rangePath() {\n      return \"M \".concat(this.minX(), \" \").concat(this.minY(), \" A \").concat(this.radius, \" \").concat(this.radius, \" 0 1 1 \").concat(this.maxX(), \" \").concat(this.maxY());\n    }\n  }, {\n    key: \"valuePath\",\n    value: function valuePath() {\n      return \"M \".concat(this.zeroX(), \" \").concat(this.zeroY(), \" A \").concat(this.radius, \" \").concat(this.radius, \" 0 \").concat(this.largeArc(), \" \").concat(this.sweep(), \" \").concat(this.valueX(), \" \").concat(this.valueY());\n    }\n  }, {\n    key: \"zeroRadians\",\n    value: function zeroRadians() {\n      if (this.props.min > 0 && this.props.max > 0) return this.mapRange(this.props.min, this.props.min, this.props.max, this.minRadians, this.maxRadians);else return this.mapRange(0, this.props.min, this.props.max, this.minRadians, this.maxRadians);\n    }\n  }, {\n    key: \"valueRadians\",\n    value: function valueRadians() {\n      return this.mapRange(this.props.value, this.props.min, this.props.max, this.minRadians, this.maxRadians);\n    }\n  }, {\n    key: \"minX\",\n    value: function minX() {\n      return this.midX + Math.cos(this.minRadians) * this.radius;\n    }\n  }, {\n    key: \"minY\",\n    value: function minY() {\n      return this.midY - Math.sin(this.minRadians) * this.radius;\n    }\n  }, {\n    key: \"maxX\",\n    value: function maxX() {\n      return this.midX + Math.cos(this.maxRadians) * this.radius;\n    }\n  }, {\n    key: \"maxY\",\n    value: function maxY() {\n      return this.midY - Math.sin(this.maxRadians) * this.radius;\n    }\n  }, {\n    key: \"zeroX\",\n    value: function zeroX() {\n      return this.midX + Math.cos(this.zeroRadians()) * this.radius;\n    }\n  }, {\n    key: \"zeroY\",\n    value: function zeroY() {\n      return this.midY - Math.sin(this.zeroRadians()) * this.radius;\n    }\n  }, {\n    key: \"valueX\",\n    value: function valueX() {\n      return this.midX + Math.cos(this.valueRadians()) * this.radius;\n    }\n  }, {\n    key: \"valueY\",\n    value: function valueY() {\n      return this.midY - Math.sin(this.valueRadians()) * this.radius;\n    }\n  }, {\n    key: \"largeArc\",\n    value: function largeArc() {\n      return Math.abs(this.zeroRadians() - this.valueRadians()) < Math.PI ? 0 : 1;\n    }\n  }, {\n    key: \"sweep\",\n    value: function sweep() {\n      return this.valueRadians() > this.zeroRadians() ? 0 : 1;\n    }\n  }, {\n    key: \"valueToDisplay\",\n    value: function valueToDisplay() {\n      return this.props.valueTemplate.replace(\"{value}\", this.props.value.toString());\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var containerClassName = classNames('p-knob p-component', {\n        'p-disabled': this.props.disabled\n      }, this.props.className);\n      var text = this.props.showValue && /*#__PURE__*/React.createElement(\"text\", {\n        x: 50,\n        y: 57,\n        textAnchor: 'middle',\n        fill: this.props.textColor,\n        className: 'p-knob-text',\n        name: this.props.name,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 44\n        }\n      }, this.valueToDisplay());\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: containerClassName,\n        style: this.props.style,\n        ref: function ref(el) {\n          return _this2.element = el;\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 233,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"svg\", {\n        viewBox: \"0 0 100 100\",\n        width: this.props.size,\n        height: this.props.size,\n        onClick: this.onClick,\n        onMouseDown: this.onMouseDown,\n        onMouseUp: this.onMouseUp,\n        onTouchStart: this.onTouchStart,\n        onTouchEnd: this.onTouchEnd,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 234,\n          columnNumber: 17\n        }\n      }, /*#__PURE__*/React.createElement(\"path\", {\n        d: this.rangePath(),\n        strokeWidth: this.props.strokeWidth,\n        stroke: this.props.rangeColor,\n        className: 'p-knob-range',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 236,\n          columnNumber: 21\n        }\n      }), /*#__PURE__*/React.createElement(\"path\", {\n        d: this.valuePath(),\n        strokeWidth: this.props.strokeWidth,\n        stroke: this.props.valueColor,\n        className: 'p-knob-value',\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 21\n        }\n      }), text));\n    }\n  }]);\n\n  return Knob;\n}(Component);\nKnob.defaultProps = {\n  id: null,\n  style: null,\n  className: null,\n  value: null,\n  size: 100,\n  disabled: false,\n  readOnly: false,\n  showValue: true,\n  step: 1,\n  min: 0,\n  max: 100,\n  strokeWidth: 14,\n  name: '',\n  valueColor: 'var(--primary-color, Black)',\n  rangeColor: 'var(--surface-d, LightGray)',\n  textColor: 'var(--text-color-secondary, Black)',\n  valueTemplate: '{value}',\n  onChange: null\n};\nKnob.propTypes = {\n  id: PropTypes.string,\n  style: PropTypes.object,\n  className: PropTypes.string,\n  value: PropTypes.any,\n  size: PropTypes.number,\n  disabled: PropTypes.bool,\n  readOnly: PropTypes.bool,\n  showValue: PropTypes.bool,\n  step: PropTypes.number,\n  min: PropTypes.number,\n  max: PropTypes.number,\n  strokeWidth: PropTypes.number,\n  name: PropTypes.string,\n  valueColor: PropTypes.string,\n  rangeColor: PropTypes.string,\n  textColor: PropTypes.string,\n  valueTemplate: PropTypes.string,\n  onChange: PropTypes.func\n};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zloto/src/components/knob/Knob.js"],"names":["React","Component","PropTypes","classNames","UniqueComponentId","Knob","props","state","radius","midX","midY","minRadians","Math","PI","maxRadians","id","onClick","bind","onMouseDown","onMouseUp","onTouchStart","onTouchEnd","onMouseMove","onTouchMove","offsetX","offsetY","dx","size","dy","angle","atan2","start","updateModel","mappedValue","mapRange","min","max","onChange","newValue","round","step","value","x","inMin","inMax","outMin","outMax","event","disabled","readOnly","updateValue","nativeEvent","windowMouseMoveListener","windowMouseUpListener","window","addEventListener","preventDefault","removeEventListener","windowTouchMoveListener","windowTouchEndListener","passive","cancelable","touches","length","rect","element","getBoundingClientRect","touch","targetTouches","item","clientX","left","clientY","top","minX","minY","maxX","maxY","zeroX","zeroY","largeArc","sweep","valueX","valueY","cos","sin","zeroRadians","valueRadians","abs","valueTemplate","replace","toString","containerClassName","className","text","showValue","textColor","name","valueToDisplay","style","el","rangePath","strokeWidth","rangeColor","valuePath","valueColor","defaultProps","propTypes","string","object","any","number","bool","func"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport UniqueComponentId from '../utils/UniqueComponentId';\r\n\r\nexport class Knob extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        style: null,\r\n        className: null,\r\n        value: null,\r\n        size: 100,\r\n        disabled: false,\r\n        readOnly: false,\r\n        showValue: true,\r\n        step: 1,\r\n        min: 0,\r\n        max: 100,\r\n        strokeWidth: 14,\r\n        name: '',\r\n        valueColor: 'var(--primary-color, Black)',\r\n        rangeColor: 'var(--surface-d, LightGray)',\r\n        textColor: 'var(--text-color-secondary, Black)',\r\n        valueTemplate: '{value}',\r\n        onChange: null\r\n    };\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        value: PropTypes.any,\r\n        size: PropTypes.number,\r\n        disabled: PropTypes.bool,\r\n        readOnly: PropTypes.bool,\r\n        showValue: PropTypes.bool,\r\n        step: PropTypes.number,\r\n        min: PropTypes.number,\r\n        max: PropTypes.number,\r\n        strokeWidth: PropTypes.number,\r\n        name: PropTypes.string,\r\n        valueColor: PropTypes.string,\r\n        rangeColor: PropTypes.string,\r\n        textColor: PropTypes.string,\r\n        valueTemplate: PropTypes.string,\r\n        onChange: PropTypes.func\r\n    };\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {}\r\n\r\n        this.radius = 40;\r\n        this.midX =  50;\r\n        this.midY = 50;\r\n        this.minRadians = 4 * Math.PI / 3;\r\n        this.maxRadians =  -Math.PI / 3;\r\n        this.id = this.props.id || UniqueComponentId();\r\n\r\n        this.onClick = this.onClick.bind(this);\r\n        this.onMouseDown = this.onMouseDown.bind(this);\r\n        this.onMouseUp = this.onMouseUp.bind(this);\r\n        this.onTouchStart = this.onTouchStart.bind(this);\r\n        this.onTouchEnd = this.onTouchEnd.bind(this);\r\n        this.onMouseMove = this.onMouseMove.bind(this);\r\n        this.onTouchMove = this.onTouchMove.bind(this);\r\n    }\r\n\r\n    updateValue(offsetX, offsetY) {\r\n        let dx = offsetX - this.props.size / 2;\r\n        let dy =  this.props.size / 2 - offsetY;\r\n        let angle = Math.atan2(dy, dx);\r\n        let start = -Math.PI / 2 - Math.PI / 6;\r\n        this.updateModel(angle, start);\r\n    }\r\n\r\n    updateModel(angle, start) {\r\n        let mappedValue;\r\n        if (angle > this.maxRadians)\r\n            mappedValue = this.mapRange(angle, this.minRadians, this.maxRadians, this.props.min, this.props.max);\r\n        else if (angle < start)\r\n            mappedValue = this.mapRange(angle + 2 * Math.PI, this.minRadians, this.maxRadians, this.props.min, this.props.max);\r\n        else\r\n            return;\r\n\r\n        if (this.props.onChange) {\r\n            const newValue = Math.round((mappedValue - this.props.min) / this.props.step) * this.props.step + this.props.min;\r\n            this.props.onChange({\r\n                value: newValue\r\n            })\r\n        }\r\n    }\r\n\r\n    mapRange(x, inMin, inMax, outMin, outMax) {\r\n        return (x - inMin) * (outMax - outMin) / (inMax - inMin) + outMin;\r\n    }\r\n\r\n    onClick(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            this.updateValue(event.nativeEvent.offsetX, event.nativeEvent.offsetY);\r\n        }\r\n    }\r\n\r\n    onMouseDown(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            this.windowMouseMoveListener = this.onMouseMove;\r\n            this.windowMouseUpListener = this.onMouseUp;\r\n            window.addEventListener('mousemove', this.windowMouseMoveListener);\r\n            window.addEventListener('mouseup', this.windowMouseUpListener);\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    onMouseUp(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            window.removeEventListener('mousemove', this.windowMouseMoveListener);\r\n            window.removeEventListener('mouseup', this.windowMouseUpListener);\r\n            this.windowMouseMoveListener = null;\r\n            this.windowMouseUpListener = null;\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    onTouchStart(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            this.windowTouchMoveListener = this.onTouchMove;\r\n            this.windowTouchEndListener = this.onTouchEnd;\r\n            window.addEventListener('touchmove', this.windowTouchMoveListener, {passive: false, cancelable: false});\r\n            window.addEventListener('touchend', this.windowTouchEndListener);\r\n        }\r\n    }\r\n\r\n    onTouchEnd(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            window.removeEventListener('touchmove', this.windowTouchMoveListener);\r\n            window.removeEventListener('touchend', this.windowTouchEndListener);\r\n            this.windowTouchMoveListener = null;\r\n            this.windowTouchEndListener = null;\r\n        }\r\n    }\r\n\r\n    onMouseMove(event) {\r\n        if (!this.props.disabled && !this.props.readOnly) {\r\n            this.updateValue(event.offsetX, event.offsetY);\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    onTouchMove(event) {\r\n        if (!this.props.disabled && !this.props.readOnly && event.touches.length === 1) {\r\n            const rect = this.element.getBoundingClientRect();\r\n            const touch = event.targetTouches.item(0);\r\n            const offsetX = touch.clientX - rect.left;\r\n            const offsetY = touch.clientY - rect.top;\r\n            this.updateValue(offsetX, offsetY);\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    rangePath() {\r\n        return `M ${this.minX()} ${this.minY()} A ${this.radius} ${this.radius} 0 1 1 ${this.maxX()} ${this.maxY()}`;\r\n    }\r\n\r\n    valuePath() {\r\n        return `M ${this.zeroX()} ${this.zeroY()} A ${this.radius} ${this.radius} 0 ${this.largeArc()} ${this.sweep()} ${this.valueX()} ${this.valueY()}`;\r\n    }\r\n\r\n    zeroRadians() {\r\n        if (this.props.min > 0 && this.props.max > 0)\r\n            return this.mapRange(this.props.min, this.props.min, this.props.max, this.minRadians, this.maxRadians);\r\n        else\r\n            return this.mapRange(0, this.props.min, this.props.max, this.minRadians, this.maxRadians);\r\n    }\r\n\r\n    valueRadians() {\r\n        return this.mapRange(this.props.value, this.props.min, this.props.max, this.minRadians, this.maxRadians);\r\n    }\r\n\r\n    minX() {\r\n        return this.midX + Math.cos(this.minRadians) * this.radius;\r\n    }\r\n\r\n    minY() {\r\n        return this.midY - Math.sin(this.minRadians) * this.radius;\r\n    }\r\n\r\n    maxX() {\r\n        return this.midX + Math.cos(this.maxRadians) * this.radius;\r\n    }\r\n\r\n    maxY() {\r\n        return this.midY - Math.sin(this.maxRadians) * this.radius;\r\n    }\r\n\r\n    zeroX() {\r\n        return this.midX + Math.cos(this.zeroRadians()) * this.radius;\r\n    }\r\n\r\n    zeroY() {\r\n        return this.midY - Math.sin(this.zeroRadians()) * this.radius;\r\n    }\r\n\r\n    valueX() {\r\n        return this.midX + Math.cos(this.valueRadians()) * this.radius;\r\n    }\r\n\r\n    valueY() {\r\n        return this.midY - Math.sin(this.valueRadians()) * this.radius;\r\n    }\r\n\r\n    largeArc() {\r\n        return Math.abs(this.zeroRadians() - this.valueRadians()) < Math.PI ? 0 : 1;\r\n    }\r\n\r\n    sweep() {\r\n        return this.valueRadians() > this.zeroRadians() ? 0 : 1;\r\n    }\r\n\r\n    valueToDisplay() {\r\n        return this.props.valueTemplate.replace(\"{value}\", this.props.value.toString());\r\n    }\r\n\r\n    render() {\r\n        const containerClassName = classNames('p-knob p-component', {\r\n            'p-disabled': this.props.disabled,\r\n        }, this.props.className);\r\n\r\n        let text = this.props.showValue && <text x={50} y={57} textAnchor={'middle'} fill={this.props.textColor} className={'p-knob-text'} name={this.props.name}>{this.valueToDisplay()}</text>\r\n\r\n        return (\r\n            <div className={containerClassName} style={this.props.style} ref={(el) => this.element = el}>\r\n                <svg viewBox=\"0 0 100 100\" width={this.props.size} height={this.props.size} onClick={this.onClick} onMouseDown={this.onMouseDown} onMouseUp={this.onMouseUp}\r\n                     onTouchStart={this.onTouchStart} onTouchEnd={this.onTouchEnd}>\r\n                    <path d={this.rangePath()} strokeWidth={this.props.strokeWidth} stroke={this.props.rangeColor} className={'p-knob-range'}></path>\r\n                    <path d={this.valuePath()} strokeWidth={this.props.strokeWidth} stroke={this.props.valueColor} className={'p-knob-value'}></path>\r\n                    {text}\r\n                </svg>\r\n            </div>\r\n        )\r\n    }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}