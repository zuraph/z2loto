{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{classNames}from'../utils/ClassNames';export var DataScroller=/*#__PURE__*/function(_Component){_inherits(DataScroller,_Component);var _super=_createSuper(DataScroller);function DataScroller(props){var _this;_classCallCheck(this,DataScroller);_this=_super.call(this,props);_this.state={};_this.dataToRender=[];_this.value=_this.props.value;_this.first=0;return _this;}_createClass(DataScroller,[{key:\"handleDataChange\",value:function handleDataChange(){if(this.props.lazy){this.dataToRender=this.value;this.setState({dataToRender:this.dataToRender});}else{this.load();}}},{key:\"load\",value:function load(){if(this.props.lazy){if(this.props.onLazyLoad){this.props.onLazyLoad(this.createLazyLoadMetadata());}this.first=this.first+this.props.rows;}else{if(this.value){for(var i=this.first;i<this.first+this.props.rows;i++){if(i>=this.value.length){break;}this.dataToRender.push(this.value[i]);}this.first=this.first+this.props.rows;this.setState({dataToRender:this.dataToRender});}}}},{key:\"reset\",value:function reset(){this.first=0;this.dataToRender=[];this.setState({dataToRender:this.dataToRender});this.load();}},{key:\"isEmpty\",value:function isEmpty(){return!this.dataToRender||this.dataToRender.length===0;}},{key:\"createLazyLoadMetadata\",value:function createLazyLoadMetadata(){return{first:this.first,rows:this.props.rows};}},{key:\"bindScrollListener\",value:function bindScrollListener(){var _this2=this;if(this.props.inline){this.scrollFunction=function(){var scrollTop=_this2.contentElement.scrollTop,scrollHeight=_this2.contentElement.scrollHeight,viewportHeight=_this2.contentElement.clientHeight;if(scrollTop>=scrollHeight*_this2.props.buffer-viewportHeight){_this2.load();}};this.contentElement.addEventListener('scroll',this.scrollFunction);}else{this.scrollFunction=function(){var docBody=document.body,docElement=document.documentElement,scrollTop=window.pageYOffset||document.documentElement.scrollTop,winHeight=docElement.clientHeight,docHeight=Math.max(docBody.scrollHeight,docBody.offsetHeight,winHeight,docElement.scrollHeight,docElement.offsetHeight);if(scrollTop>=docHeight*_this2.props.buffer-winHeight){_this2.load();}};window.addEventListener('scroll',this.scrollFunction);}}},{key:\"unbindScrollListener\",value:function unbindScrollListener(){if(this.scrollFunction){if(this.props.inline){this.contentElement.removeEventListener('scroll',this.scrollFunction);this.contentElement=null;}else if(!this.props.loader){window.removeEventListener('scroll',this.scrollFunction);}}this.scrollFunction=null;}},{key:\"componentDidMount\",value:function componentDidMount(){this.load();if(!this.props.loader){this.bindScrollListener();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState){var newValue=this.props.value;if(newValue&&this.value!==newValue){this.value=newValue;this.handleDataChange();}if(prevProps.loader!==this.props.loader&&this.props.loader){this.unbindScrollListener();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.scrollFunction){this.unbindScrollListener();}}},{key:\"render\",value:function render(){var _this3=this;var className=classNames('p-datascroller p-component',this.props.className,{'p-datascroller-inline':this.props.inline});var header=this.props.header&&/*#__PURE__*/React.createElement(\"div\",{className:\"p-datascroller-header\"},\" \",this.props.header),footer=this.props.footer&&/*#__PURE__*/React.createElement(\"div\",{className:\"p-datascroller-footer\"},\" \",this.props.footer,\" \"),content=/*#__PURE__*/React.createElement(\"div\",{ref:function ref(el){return _this3.contentElement=el;},className:\"p-datascroller-content\",style:{'maxHeight':this.props.scrollHeight}},/*#__PURE__*/React.createElement(\"ul\",{className:\"p-datascroller-list\"},this.state.dataToRender&&this.state.dataToRender.map(function(val,i){var listItemContent=_this3.props.itemTemplate?_this3.props.itemTemplate(val):val;return/*#__PURE__*/React.createElement(\"li\",{key:i+'_datascrollitem'},listItemContent);})));return/*#__PURE__*/React.createElement(\"div\",{id:this.props.id,className:className},header,content,footer);}}]);return DataScroller;}(Component);DataScroller.defaultProps={id:null,value:null,rows:0,inline:false,scrollHeight:null,loader:false,buffer:0.9,style:null,className:null,onLazyLoad:null,itemTemplate:null,header:null,footer:null,lazy:false};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/components/datascroller/DataScroller.js"],"names":["React","Component","classNames","DataScroller","props","state","dataToRender","value","first","lazy","setState","load","onLazyLoad","createLazyLoadMetadata","rows","i","length","push","inline","scrollFunction","scrollTop","contentElement","scrollHeight","viewportHeight","clientHeight","buffer","addEventListener","docBody","document","body","docElement","documentElement","window","pageYOffset","winHeight","docHeight","Math","max","offsetHeight","removeEventListener","loader","bindScrollListener","prevProps","prevState","newValue","handleDataChange","unbindScrollListener","className","header","footer","content","el","map","val","listItemContent","itemTemplate","id","defaultProps","style"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\n\r\nexport class DataScroller extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        value: null,\r\n        rows: 0,\r\n        inline: false,\r\n        scrollHeight: null,\r\n        loader: false,\r\n        buffer: 0.9,\r\n        style: null,\r\n        className: null,\r\n        onLazyLoad: null,\r\n        itemTemplate: null,\r\n        header: null,\r\n        footer: null,\r\n        lazy: false\r\n    }\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        value: PropTypes.array,\r\n        rows: PropTypes.number,\r\n        inline: PropTypes.bool,\r\n        scrollHeight: PropTypes.any,\r\n        loader: PropTypes.bool,\r\n        buffer: PropTypes.number,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        onLazyLoad: PropTypes.func,\r\n        itemTemplate: PropTypes.func,\r\n        header: PropTypes.any,\r\n        footer: PropTypes.any,\r\n        lazy: PropTypes.bool\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {};\r\n        this.dataToRender = [];\r\n        this.value = this.props.value;\r\n        this.first = 0;\r\n    }\r\n\r\n    handleDataChange() {\r\n        if (this.props.lazy) {\r\n            this.dataToRender = this.value;\r\n            this.setState({ dataToRender: this.dataToRender });\r\n        }\r\n        else {\r\n            this.load();\r\n        }\r\n    }\r\n\r\n    load() {\r\n        if (this.props.lazy) {\r\n            if (this.props.onLazyLoad) {\r\n                this.props.onLazyLoad(this.createLazyLoadMetadata());\r\n            }\r\n\r\n            this.first = this.first + this.props.rows;\r\n        }\r\n        else {\r\n            if (this.value) {\r\n                for (let i = this.first; i < (this.first + this.props.rows); i++) {\r\n                    if (i >= this.value.length) {\r\n                        break;\r\n                    }\r\n\r\n                    this.dataToRender.push(this.value[i]);\r\n                }\r\n\r\n                this.first = this.first + this.props.rows;\r\n                this.setState({ dataToRender: this.dataToRender });\r\n            }\r\n        }\r\n    }\r\n\r\n    reset() {\r\n        this.first = 0;\r\n        this.dataToRender = [];\r\n        this.setState({ dataToRender: this.dataToRender });\r\n        this.load();\r\n    }\r\n\r\n    isEmpty() {\r\n        return !this.dataToRender || (this.dataToRender.length === 0);\r\n    }\r\n\r\n    createLazyLoadMetadata() {\r\n        return {\r\n            first: this.first,\r\n            rows: this.props.rows\r\n        };\r\n    }\r\n\r\n    bindScrollListener() {\r\n        if (this.props.inline) {\r\n            this.scrollFunction = () => {\r\n                let scrollTop = this.contentElement.scrollTop,\r\n                    scrollHeight = this.contentElement.scrollHeight,\r\n                    viewportHeight = this.contentElement.clientHeight;\r\n\r\n                if ((scrollTop >= ((scrollHeight * this.props.buffer) - (viewportHeight)))) {\r\n                    this.load();\r\n                }\r\n            }\r\n\r\n            this.contentElement.addEventListener('scroll', this.scrollFunction);\r\n        }\r\n        else {\r\n            this.scrollFunction = () => {\r\n                let docBody = document.body,\r\n                    docElement = document.documentElement,\r\n                    scrollTop = (window.pageYOffset || document.documentElement.scrollTop),\r\n                    winHeight = docElement.clientHeight,\r\n                    docHeight = Math.max(docBody.scrollHeight, docBody.offsetHeight, winHeight, docElement.scrollHeight, docElement.offsetHeight);\r\n\r\n                if (scrollTop >= ((docHeight * this.props.buffer) - winHeight)) {\r\n                    this.load();\r\n                }\r\n            }\r\n\r\n            window.addEventListener('scroll', this.scrollFunction);\r\n        }\r\n    }\r\n\r\n    unbindScrollListener() {\r\n        if (this.scrollFunction) {\r\n            if (this.props.inline) {\r\n                this.contentElement.removeEventListener('scroll', this.scrollFunction);\r\n                this.contentElement = null;\r\n            }\r\n            else if (!this.props.loader) {\r\n                window.removeEventListener('scroll', this.scrollFunction);\r\n            }\r\n        }\r\n\r\n        this.scrollFunction = null;\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.load();\r\n\r\n        if (!this.props.loader) {\r\n            this.bindScrollListener();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState) {\r\n        let newValue = this.props.value;\r\n        if (newValue && this.value !== newValue) {\r\n            this.value = newValue;\r\n\r\n            this.handleDataChange();\r\n        }\r\n\r\n        if (prevProps.loader !== this.props.loader && this.props.loader) {\r\n            this.unbindScrollListener();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.scrollFunction) {\r\n            this.unbindScrollListener();\r\n        }\r\n    }\r\n\r\n    render() {\r\n        const className = classNames('p-datascroller p-component', this.props.className, {\r\n            'p-datascroller-inline': this.props.inline\r\n        });\r\n\r\n        const header = this.props.header && <div className=\"p-datascroller-header\"> {this.props.header}</div>,\r\n            footer = this.props.footer && <div className=\"p-datascroller-footer\"> {this.props.footer} </div>,\r\n            content = (\r\n                <div ref={(el) => this.contentElement = el} className=\"p-datascroller-content\" style={{ 'maxHeight': this.props.scrollHeight }}>\r\n                    <ul className=\"p-datascroller-list\">\r\n                        {\r\n                            this.state.dataToRender && this.state.dataToRender.map((val, i) => {\r\n                                const listItemContent = this.props.itemTemplate ? this.props.itemTemplate(val) : val;\r\n                                return (\r\n                                    <li key={i + '_datascrollitem'}>\r\n                                        {listItemContent}\r\n                                    </li>\r\n                                );\r\n                            })\r\n                        }\r\n                    </ul>\r\n                </div>\r\n            );\r\n\r\n        return (\r\n            <div id={this.props.id} className={className}>\r\n                {header}\r\n                {content}\r\n                {footer}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}