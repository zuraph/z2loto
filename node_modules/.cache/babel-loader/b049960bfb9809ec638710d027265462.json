{"ast":null,"code":"import _toConsumableArray from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _createForOfIteratorHelper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createForOfIteratorHelper\";import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{classNames}from'../utils/ClassNames';import ObjectUtils from'../utils/ObjectUtils';import{UITreeNode}from'./UITreeNode';export var Tree=/*#__PURE__*/function(_Component){_inherits(Tree,_Component);var _super=_createSuper(Tree);function Tree(props){var _this;_classCallCheck(this,Tree);_this=_super.call(this,props);_this.state={filter:''};if(!_this.props.onToggle){_this.state['expandedKeys']=_this.props.expandedKeys;}_this.isNodeLeaf=_this.isNodeLeaf.bind(_assertThisInitialized(_this));_this.onToggle=_this.onToggle.bind(_assertThisInitialized(_this));_this.onDragStart=_this.onDragStart.bind(_assertThisInitialized(_this));_this.onDragEnd=_this.onDragEnd.bind(_assertThisInitialized(_this));_this.onDrop=_this.onDrop.bind(_assertThisInitialized(_this));_this.onDropPoint=_this.onDropPoint.bind(_assertThisInitialized(_this));_this.onFilterInputChange=_this.onFilterInputChange.bind(_assertThisInitialized(_this));_this.onFilterInputKeyDown=_this.onFilterInputKeyDown.bind(_assertThisInitialized(_this));return _this;}_createClass(Tree,[{key:\"getExpandedKeys\",value:function getExpandedKeys(){return this.props.onToggle?this.props.expandedKeys:this.state.expandedKeys;}},{key:\"getRootNode\",value:function getRootNode(){return this.props.filter&&this.filteredNodes?this.filteredNodes:this.props.value;}},{key:\"onToggle\",value:function onToggle(event){if(this.props.onToggle){this.props.onToggle(event);}else{this.setState({expandedKeys:event.value});}}},{key:\"onDragStart\",value:function onDragStart(event){this.dragState={path:event.path,index:event.index};}},{key:\"onDragEnd\",value:function onDragEnd(){this.dragState=null;}},{key:\"onDrop\",value:function onDrop(event){if(this.validateDropNode(this.dragState.path,event.path)){var value=JSON.parse(JSON.stringify(this.props.value));var dragPaths=this.dragState.path.split('-');dragPaths.pop();var dragNodeParent=this.findNode(value,dragPaths);var dragNode=dragNodeParent?dragNodeParent.children[this.dragState.index]:value[this.dragState.index];var dropNode=this.findNode(value,event.path.split('-'));if(dropNode.children)dropNode.children.push(dragNode);else dropNode.children=[dragNode];if(dragNodeParent)dragNodeParent.children.splice(this.dragState.index,1);else value.splice(this.dragState.index,1);if(this.props.onDragDrop){this.props.onDragDrop({originalEvent:event.originalEvent,value:value,dragNode:dragNode,dropNode:dropNode,dropIndex:event.index});}}}},{key:\"onDropPoint\",value:function onDropPoint(event){if(this.validateDropPoint(event)){var value=JSON.parse(JSON.stringify(this.props.value));var dragPaths=this.dragState.path.split('-');dragPaths.pop();var dropPaths=event.path.split('-');dropPaths.pop();var dragNodeParent=this.findNode(value,dragPaths);var dropNodeParent=this.findNode(value,dropPaths);var dragNode=dragNodeParent?dragNodeParent.children[this.dragState.index]:value[this.dragState.index];var siblings=this.areSiblings(this.dragState.path,event.path);if(dragNodeParent)dragNodeParent.children.splice(this.dragState.index,1);else value.splice(this.dragState.index,1);if(event.position<0){var dropIndex=siblings?this.dragState.index>event.index?event.index:event.index-1:event.index;if(dropNodeParent)dropNodeParent.children.splice(dropIndex,0,dragNode);else value.splice(dropIndex,0,dragNode);}else{if(dropNodeParent)dropNodeParent.children.push(dragNode);else value.push(dragNode);}if(this.props.onDragDrop){this.props.onDragDrop({originalEvent:event.originalEvent,value:value,dragNode:dragNode,dropNode:dropNodeParent,dropIndex:event.index});}}}},{key:\"validateDrop\",value:function validateDrop(dragPath,dropPath){if(!dragPath){return false;}else{//same node\nif(dragPath===dropPath){return false;}//parent dropped on an descendant\nif(dropPath.indexOf(dragPath)===0){return false;}return true;}}},{key:\"validateDropNode\",value:function validateDropNode(dragPath,dropPath){var validateDrop=this.validateDrop(dragPath,dropPath);if(validateDrop){//child dropped on parent\nif(dragPath.indexOf('-')>0&&dragPath.substring(0,dragPath.lastIndexOf('-'))===dropPath){return false;}return true;}else{return false;}}},{key:\"validateDropPoint\",value:function validateDropPoint(event){var validateDrop=this.validateDrop(this.dragState.path,event.path);if(validateDrop){//child dropped to next sibling's drop point\nif(event.position===-1&&this.areSiblings(this.dragState.path,event.path)&&this.dragState.index+1===event.index){return false;}return true;}else{return false;}}},{key:\"areSiblings\",value:function areSiblings(path1,path2){if(path1.length===1&&path2.length===1)return true;else return path1.substring(0,path1.lastIndexOf('-'))===path2.substring(0,path2.lastIndexOf('-'));}},{key:\"findNode\",value:function findNode(value,path){if(path.length===0){return null;}else{var index=parseInt(path[0],10);var nextSearchRoot=value.children?value.children[index]:value[index];if(path.length===1){return nextSearchRoot;}else{path.shift();return this.findNode(nextSearchRoot,path);}}}},{key:\"isNodeLeaf\",value:function isNodeLeaf(node){return node.leaf===false?false:!(node.children&&node.children.length);}},{key:\"onFilterInputKeyDown\",value:function onFilterInputKeyDown(event){//enter\nif(event.which===13){event.preventDefault();}}},{key:\"onFilterInputChange\",value:function onFilterInputChange(event){this.filterChanged=true;this.setState({filter:event.target.value});}},{key:\"filter\",value:function filter(){if(!this.filterChanged){return;}if(this.state.filter===''){this.filteredNodes=this.props.value;}else{this.filteredNodes=[];var searchFields=this.props.filterBy.split(',');var filterText=this.state.filter.toLocaleLowerCase(this.props.filterLocale);var isStrictMode=this.props.filterMode==='strict';var _iterator=_createForOfIteratorHelper(this.props.value),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var node=_step.value;var copyNode=_objectSpread({},node);var paramsWithoutNode={searchFields:searchFields,filterText:filterText,isStrictMode:isStrictMode};if(isStrictMode&&(this.findFilteredNodes(copyNode,paramsWithoutNode)||this.isFilterMatched(copyNode,paramsWithoutNode))||!isStrictMode&&(this.isFilterMatched(copyNode,paramsWithoutNode)||this.findFilteredNodes(copyNode,paramsWithoutNode))){this.filteredNodes.push(copyNode);}}}catch(err){_iterator.e(err);}finally{_iterator.f();}}this.filterChanged=false;}},{key:\"findFilteredNodes\",value:function findFilteredNodes(node,paramsWithoutNode){if(node){var matched=false;if(node.children){var childNodes=_toConsumableArray(node.children);node.children=[];var _iterator2=_createForOfIteratorHelper(childNodes),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var childNode=_step2.value;var copyChildNode=_objectSpread({},childNode);if(this.isFilterMatched(copyChildNode,paramsWithoutNode)){matched=true;node.children.push(copyChildNode);}}}catch(err){_iterator2.e(err);}finally{_iterator2.f();}}if(matched){return true;}}}},{key:\"isFilterMatched\",value:function isFilterMatched(node,_ref){var searchFields=_ref.searchFields,filterText=_ref.filterText,isStrictMode=_ref.isStrictMode;var matched=false;var _iterator3=_createForOfIteratorHelper(searchFields),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var field=_step3.value;var fieldValue=String(ObjectUtils.resolveFieldData(node,field)).toLocaleLowerCase(this.props.filterLocale);if(fieldValue.indexOf(filterText)>-1){matched=true;}}}catch(err){_iterator3.e(err);}finally{_iterator3.f();}if(!matched||isStrictMode&&!this.isNodeLeaf(node)){matched=this.findFilteredNodes(node,{searchFields:searchFields,filterText:filterText,isStrictMode:isStrictMode})||matched;}return matched;}},{key:\"renderRootChild\",value:function renderRootChild(node,index,last){return/*#__PURE__*/React.createElement(UITreeNode,{key:node.key||node.label,node:node,index:index,last:last,path:String(index),disabled:this.props.disabled,selectionMode:this.props.selectionMode,selectionKeys:this.props.selectionKeys,onSelectionChange:this.props.onSelectionChange,metaKeySelection:this.props.metaKeySelection,contextMenuSelectionKey:this.props.contextMenuSelectionKey,onContextMenuSelectionChange:this.props.onContextMenuSelectionChange,onContextMenu:this.props.onContextMenu,propagateSelectionDown:this.props.propagateSelectionDown,propagateSelectionUp:this.props.propagateSelectionUp,onExpand:this.props.onExpand,onCollapse:this.props.onCollapse,onSelect:this.props.onSelect,onUnselect:this.props.onUnselect,expandedKeys:this.getExpandedKeys(),onToggle:this.onToggle,nodeTemplate:this.props.nodeTemplate,isNodeLeaf:this.isNodeLeaf,dragdropScope:this.props.dragdropScope,onDragStart:this.onDragStart,onDragEnd:this.onDragEnd,onDrop:this.onDrop,onDropPoint:this.onDropPoint});}},{key:\"renderRootChildren\",value:function renderRootChildren(){var _this2=this;if(this.props.filter){this.filterChanged=true;this.filter();}var value=this.getRootNode();return value.map(function(node,index){return _this2.renderRootChild(node,index,index===value.length-1);});}},{key:\"renderModel\",value:function renderModel(){if(this.props.value){var rootNodes=this.renderRootChildren();var contentClass=classNames('p-tree-container',this.props.contentClassName);return/*#__PURE__*/React.createElement(\"ul\",{className:contentClass,role:\"tree\",\"aria-label\":this.props.ariaLabel,\"aria-labelledby\":this.props.ariaLabelledBy,style:this.props.contentStyle},rootNodes);}return null;}},{key:\"renderLoader\",value:function renderLoader(){if(this.props.loading){var icon=classNames('p-tree-loading-icon pi-spin',this.props.loadingIcon);return/*#__PURE__*/React.createElement(\"div\",{className:\"p-tree-loading-overlay p-component-overlay\"},/*#__PURE__*/React.createElement(\"i\",{className:icon}));}return null;}},{key:\"renderFilter\",value:function renderFilter(){if(this.props.filter){return/*#__PURE__*/React.createElement(\"div\",{className:\"p-tree-filter-container\"},/*#__PURE__*/React.createElement(\"input\",{type:\"text\",autoComplete:\"off\",className:\"p-tree-filter p-inputtext p-component\",placeholder:this.props.filterPlaceholder,onKeyDown:this.onFilterInputKeyDown,onChange:this.onFilterInputChange,disabled:this.props.disabled}),/*#__PURE__*/React.createElement(\"span\",{className:\"p-tree-filter-icon pi pi-search\"}));}return null;}},{key:\"render\",value:function render(){var className=classNames('p-tree p-component',this.props.className,{'p-tree-selectable':this.props.selectionMode,'p-tree-loading':this.props.loading,'p-disabled':this.props.disabled});var loader=this.renderLoader();var content=this.renderModel();var filter=this.renderFilter();return/*#__PURE__*/React.createElement(\"div\",{id:this.props.id,className:className,style:this.props.style},loader,filter,content);}}]);return Tree;}(Component);Tree.defaultProps={id:null,value:null,disabled:false,selectionMode:null,selectionKeys:null,onSelectionChange:null,contextMenuSelectionKey:null,onContextMenuSelectionChange:null,expandedKeys:null,style:null,className:null,contentStyle:null,contentClassName:null,metaKeySelection:true,propagateSelectionUp:true,propagateSelectionDown:true,loading:false,loadingIcon:'pi pi-spinner',dragdropScope:null,filter:false,filterBy:'label',filterMode:'lenient',filterPlaceholder:null,filterLocale:undefined,nodeTemplate:null,onSelect:null,onUnselect:null,onExpand:null,onCollapse:null,onToggle:null,onDragDrop:null,onContextMenu:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/components/tree/Tree.js"],"names":["React","Component","classNames","ObjectUtils","UITreeNode","Tree","props","state","filter","onToggle","expandedKeys","isNodeLeaf","bind","onDragStart","onDragEnd","onDrop","onDropPoint","onFilterInputChange","onFilterInputKeyDown","filteredNodes","value","event","setState","dragState","path","index","validateDropNode","JSON","parse","stringify","dragPaths","split","pop","dragNodeParent","findNode","dragNode","children","dropNode","push","splice","onDragDrop","originalEvent","dropIndex","validateDropPoint","dropPaths","dropNodeParent","siblings","areSiblings","position","dragPath","dropPath","indexOf","validateDrop","substring","lastIndexOf","path1","path2","length","parseInt","nextSearchRoot","shift","node","leaf","which","preventDefault","filterChanged","target","searchFields","filterBy","filterText","toLocaleLowerCase","filterLocale","isStrictMode","filterMode","copyNode","paramsWithoutNode","findFilteredNodes","isFilterMatched","matched","childNodes","childNode","copyChildNode","field","fieldValue","String","resolveFieldData","last","key","label","disabled","selectionMode","selectionKeys","onSelectionChange","metaKeySelection","contextMenuSelectionKey","onContextMenuSelectionChange","onContextMenu","propagateSelectionDown","propagateSelectionUp","onExpand","onCollapse","onSelect","onUnselect","getExpandedKeys","nodeTemplate","dragdropScope","getRootNode","map","renderRootChild","rootNodes","renderRootChildren","contentClass","contentClassName","ariaLabel","ariaLabelledBy","contentStyle","loading","icon","loadingIcon","filterPlaceholder","className","loader","renderLoader","content","renderModel","renderFilter","id","style","defaultProps","undefined"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport ObjectUtils from '../utils/ObjectUtils';\r\nimport {UITreeNode} from './UITreeNode';\r\n\r\nexport class Tree extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        value: null,\r\n        disabled: false,\r\n        selectionMode: null,\r\n        selectionKeys: null,\r\n        onSelectionChange: null,\r\n        contextMenuSelectionKey: null,\r\n        onContextMenuSelectionChange: null,\r\n        expandedKeys: null,\r\n        style: null,\r\n        className: null,\r\n        contentStyle: null,\r\n        contentClassName: null,\r\n        metaKeySelection: true,\r\n        propagateSelectionUp: true,\r\n        propagateSelectionDown: true,\r\n        loading: false,\r\n        loadingIcon: 'pi pi-spinner',\r\n        dragdropScope: null,\r\n        filter: false,\r\n        filterBy: 'label',\r\n        filterMode: 'lenient',\r\n        filterPlaceholder: null,\r\n        filterLocale: undefined,\r\n        nodeTemplate: null,\r\n        onSelect: null,\r\n        onUnselect: null,\r\n        onExpand: null,\r\n        onCollapse: null,\r\n        onToggle: null,\r\n        onDragDrop: null,\r\n        onContextMenu: null\r\n    }\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        value: PropTypes.any,\r\n        disabled: PropTypes.bool,\r\n        selectionMode: PropTypes.string,\r\n        selectionKeys: PropTypes.any,\r\n        onSelectionChange: PropTypes.func,\r\n        contextMenuSelectionKey: PropTypes.any,\r\n        onContextMenuSelectionChange: PropTypes.func,\r\n        expandedKeys: PropTypes.object,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        contentStyle: PropTypes.object,\r\n        contentClassName: PropTypes.string,\r\n        metaKeySelection: PropTypes.bool,\r\n        propagateSelectionUp: PropTypes.bool,\r\n        propagateSelectionDown: PropTypes.bool,\r\n        loading: PropTypes.bool,\r\n        loadingIcon: PropTypes.string,\r\n        dragdropScope: PropTypes.string,\r\n        filter: PropTypes.bool,\r\n        filterBy: PropTypes.any,\r\n        filterMode: PropTypes.string,\r\n        filterPlaceholder: PropTypes.string,\r\n        filterLocale: PropTypes.string,\r\n        nodeTemplate: PropTypes.func,\r\n        onSelect: PropTypes.func,\r\n        onUnselect: PropTypes.func,\r\n        onExpand: PropTypes.func,\r\n        onCollapse: PropTypes.func,\r\n        onToggle: PropTypes.func,\r\n        onDragDrop: PropTypes.func,\r\n        onContextMenu: PropTypes.func\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            filter: ''\r\n        };\r\n\r\n        if (!this.props.onToggle) {\r\n            this.state['expandedKeys'] = this.props.expandedKeys;\r\n        }\r\n\r\n        this.isNodeLeaf = this.isNodeLeaf.bind(this);\r\n        this.onToggle = this.onToggle.bind(this);\r\n        this.onDragStart = this.onDragStart.bind(this);\r\n        this.onDragEnd = this.onDragEnd.bind(this);\r\n        this.onDrop = this.onDrop.bind(this);\r\n        this.onDropPoint = this.onDropPoint.bind(this);\r\n        this.onFilterInputChange = this.onFilterInputChange.bind(this);\r\n        this.onFilterInputKeyDown = this.onFilterInputKeyDown.bind(this);\r\n    }\r\n\r\n    getExpandedKeys() {\r\n        return this.props.onToggle ? this.props.expandedKeys : this.state.expandedKeys;\r\n    }\r\n\r\n    getRootNode() {\r\n        return (this.props.filter && this.filteredNodes) ? this.filteredNodes : this.props.value;\r\n    }\r\n\r\n    onToggle(event) {\r\n        if (this.props.onToggle) {\r\n            this.props.onToggle(event);\r\n        }\r\n        else {\r\n            this.setState({\r\n                expandedKeys: event.value\r\n            });\r\n        }\r\n    }\r\n\r\n    onDragStart(event) {\r\n        this.dragState = {\r\n            path: event.path,\r\n            index: event.index\r\n        }\r\n    }\r\n\r\n    onDragEnd() {\r\n        this.dragState = null;\r\n    }\r\n\r\n    onDrop(event) {\r\n        if (this.validateDropNode(this.dragState.path, event.path)) {\r\n            let value = JSON.parse(JSON.stringify(this.props.value));\r\n            let dragPaths = this.dragState.path.split('-');\r\n            dragPaths.pop();\r\n            let dragNodeParent = this.findNode(value, dragPaths);\r\n            let dragNode = dragNodeParent ? dragNodeParent.children[this.dragState.index] : value[this.dragState.index];\r\n            let dropNode = this.findNode(value, event.path.split('-'));\r\n\r\n            if (dropNode.children)\r\n                dropNode.children.push(dragNode);\r\n            else\r\n                dropNode.children = [dragNode];\r\n\r\n            if (dragNodeParent)\r\n                dragNodeParent.children.splice(this.dragState.index, 1);\r\n            else\r\n                value.splice(this.dragState.index, 1);\r\n\r\n            if (this.props.onDragDrop) {\r\n                this.props.onDragDrop({\r\n                    originalEvent: event.originalEvent,\r\n                    value: value,\r\n                    dragNode,\r\n                    dropNode,\r\n                    dropIndex: event.index\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    onDropPoint(event) {\r\n        if (this.validateDropPoint(event)) {\r\n            let value = JSON.parse(JSON.stringify(this.props.value));\r\n            let dragPaths = this.dragState.path.split('-');\r\n            dragPaths.pop();\r\n            let dropPaths = event.path.split('-');\r\n            dropPaths.pop();\r\n            let dragNodeParent = this.findNode(value, dragPaths);\r\n            let dropNodeParent = this.findNode(value, dropPaths);\r\n            let dragNode = dragNodeParent ? dragNodeParent.children[this.dragState.index] : value[this.dragState.index];\r\n            let siblings = this.areSiblings(this.dragState.path, event.path);\r\n\r\n            if (dragNodeParent)\r\n                dragNodeParent.children.splice(this.dragState.index, 1);\r\n            else\r\n                value.splice(this.dragState.index, 1);\r\n\r\n            if (event.position < 0) {\r\n                let dropIndex = (siblings) ? (this.dragState.index > event.index) ? event.index : event.index - 1 : event.index;\r\n\r\n                if (dropNodeParent)\r\n                    dropNodeParent.children.splice(dropIndex, 0, dragNode);\r\n                else\r\n                    value.splice(dropIndex, 0, dragNode);\r\n            }\r\n            else {\r\n                if (dropNodeParent)\r\n                    dropNodeParent.children.push(dragNode);\r\n                else\r\n                    value.push(dragNode);\r\n            }\r\n\r\n            if (this.props.onDragDrop) {\r\n                this.props.onDragDrop({\r\n                    originalEvent: event.originalEvent,\r\n                    value: value,\r\n                    dragNode,\r\n                    dropNode: dropNodeParent,\r\n                    dropIndex: event.index\r\n                });\r\n            }\r\n        }\r\n    }\r\n\r\n    validateDrop(dragPath, dropPath) {\r\n        if (!dragPath) {\r\n            return false;\r\n        }\r\n        else {\r\n            //same node\r\n            if (dragPath === dropPath) {\r\n                return false;\r\n            }\r\n\r\n            //parent dropped on an descendant\r\n            if (dropPath.indexOf(dragPath) === 0) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n    }\r\n\r\n    validateDropNode(dragPath, dropPath) {\r\n        let validateDrop = this.validateDrop(dragPath, dropPath);\r\n        if (validateDrop) {\r\n            //child dropped on parent\r\n            if (dragPath.indexOf('-') > 0 && dragPath.substring(0, dragPath.lastIndexOf('-')) === dropPath) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    validateDropPoint(event) {\r\n        let validateDrop = this.validateDrop(this.dragState.path, event.path);\r\n        if (validateDrop) {\r\n            //child dropped to next sibling's drop point\r\n            if (event.position === -1 && this.areSiblings(this.dragState.path, event.path) && (this.dragState.index +1 === event.index)) {\r\n                return false;\r\n            }\r\n\r\n            return true;\r\n        }\r\n        else {\r\n            return false;\r\n        }\r\n    }\r\n\r\n    areSiblings(path1, path2) {\r\n        if (path1.length === 1 && path2.length === 1)\r\n            return true;\r\n        else\r\n            return path1.substring(0, path1.lastIndexOf('-')) === path2.substring(0, path2.lastIndexOf('-'));\r\n    }\r\n\r\n    findNode(value, path) {\r\n        if (path.length === 0) {\r\n            return null;\r\n        }\r\n        else {\r\n            const index = parseInt(path[0], 10);\r\n            const nextSearchRoot = value.children ? value.children[index] : value[index];\r\n\r\n            if (path.length === 1) {\r\n                return nextSearchRoot;\r\n            }\r\n            else {\r\n                path.shift();\r\n                return this.findNode(nextSearchRoot, path);\r\n            }\r\n        }\r\n    }\r\n\r\n    isNodeLeaf(node) {\r\n        return node.leaf === false ? false : !(node.children && node.children.length);\r\n    }\r\n\r\n    onFilterInputKeyDown(event) {\r\n        //enter\r\n        if (event.which === 13) {\r\n            event.preventDefault();\r\n        }\r\n    }\r\n\r\n    onFilterInputChange(event) {\r\n        this.filterChanged = true;\r\n        this.setState({filter: event.target.value});\r\n    }\r\n\r\n    filter() {\r\n        if (!this.filterChanged) {\r\n            return;\r\n        }\r\n\r\n        if (this.state.filter === '') {\r\n            this.filteredNodes = this.props.value;\r\n        }\r\n        else {\r\n            this.filteredNodes = [];\r\n            const searchFields = this.props.filterBy.split(',');\r\n            const filterText = this.state.filter.toLocaleLowerCase(this.props.filterLocale);\r\n            const isStrictMode = this.props.filterMode === 'strict';\r\n            for(let node of this.props.value) {\r\n                let copyNode = {...node};\r\n                let paramsWithoutNode = {searchFields, filterText, isStrictMode};\r\n                if ((isStrictMode && (this.findFilteredNodes(copyNode, paramsWithoutNode) || this.isFilterMatched(copyNode, paramsWithoutNode))) ||\r\n                    (!isStrictMode && (this.isFilterMatched(copyNode, paramsWithoutNode) || this.findFilteredNodes(copyNode, paramsWithoutNode)))) {\r\n                    this.filteredNodes.push(copyNode);\r\n                }\r\n            }\r\n        }\r\n\r\n        this.filterChanged = false;\r\n    }\r\n\r\n    findFilteredNodes(node, paramsWithoutNode) {\r\n        if (node) {\r\n            let matched = false;\r\n            if (node.children) {\r\n                let childNodes = [...node.children];\r\n                node.children = [];\r\n                for (let childNode of childNodes) {\r\n                    let copyChildNode = {...childNode};\r\n                    if (this.isFilterMatched(copyChildNode, paramsWithoutNode)) {\r\n                        matched = true;\r\n                        node.children.push(copyChildNode);\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (matched) {\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n\r\n    isFilterMatched(node, {searchFields, filterText, isStrictMode}) {\r\n        let matched = false;\r\n        for(let field of searchFields) {\r\n            let fieldValue = String(ObjectUtils.resolveFieldData(node, field)).toLocaleLowerCase(this.props.filterLocale);\r\n            if(fieldValue.indexOf(filterText) > -1) {\r\n                matched = true;\r\n            }\r\n        }\r\n\r\n        if (!matched || (isStrictMode && !this.isNodeLeaf(node))) {\r\n            matched = this.findFilteredNodes(node, {searchFields, filterText, isStrictMode}) || matched;\r\n        }\r\n\r\n        return matched;\r\n    }\r\n\r\n    renderRootChild(node, index, last) {\r\n        return (\r\n            <UITreeNode key={node.key||node.label} node={node} index={index} last={last} path={String(index)} disabled={this.props.disabled} selectionMode={this.props.selectionMode}\r\n                    selectionKeys={this.props.selectionKeys} onSelectionChange={this.props.onSelectionChange} metaKeySelection={this.props.metaKeySelection}\r\n                    contextMenuSelectionKey={this.props.contextMenuSelectionKey} onContextMenuSelectionChange={this.props.onContextMenuSelectionChange} onContextMenu={this.props.onContextMenu}\r\n                    propagateSelectionDown={this.props.propagateSelectionDown} propagateSelectionUp={this.props.propagateSelectionUp}\r\n                    onExpand={this.props.onExpand} onCollapse={this.props.onCollapse} onSelect={this.props.onSelect} onUnselect={this.props.onUnselect}\r\n                    expandedKeys={this.getExpandedKeys()} onToggle={this.onToggle} nodeTemplate={this.props.nodeTemplate} isNodeLeaf={this.isNodeLeaf}\r\n                    dragdropScope={this.props.dragdropScope} onDragStart={this.onDragStart} onDragEnd={this.onDragEnd} onDrop={this.onDrop} onDropPoint={this.onDropPoint}  />\r\n        );\r\n    }\r\n\r\n    renderRootChildren() {\r\n        if (this.props.filter) {\r\n            this.filterChanged = true;\r\n            this.filter();\r\n        }\r\n\r\n        const value = this.getRootNode();\r\n        return (\r\n            value.map((node, index) => this.renderRootChild(node, index, (index === value.length - 1)))\r\n        );\r\n    }\r\n\r\n    renderModel() {\r\n        if (this.props.value) {\r\n            const rootNodes = this.renderRootChildren();\r\n            let contentClass = classNames('p-tree-container', this.props.contentClassName);\r\n\r\n            return (\r\n                <ul className={contentClass} role=\"tree\" aria-label={this.props.ariaLabel} aria-labelledby={this.props.ariaLabelledBy} style={this.props.contentStyle}>\r\n                    {rootNodes}\r\n                </ul>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    renderLoader() {\r\n        if (this.props.loading) {\r\n            let icon = classNames('p-tree-loading-icon pi-spin', this.props.loadingIcon);\r\n\r\n            return (\r\n                <div className=\"p-tree-loading-overlay p-component-overlay\">\r\n                    <i className={icon} />\r\n                </div>\r\n            );\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    renderFilter() {\r\n        if (this.props.filter) {\r\n            return <div className=\"p-tree-filter-container\">\r\n                        <input type=\"text\" autoComplete=\"off\" className=\"p-tree-filter p-inputtext p-component\" placeholder={this.props.filterPlaceholder}\r\n                            onKeyDown={this.onFilterInputKeyDown} onChange={this.onFilterInputChange} disabled={this.props.disabled}/>\r\n                        <span className=\"p-tree-filter-icon pi pi-search\"></span>\r\n                   </div>;\r\n        }\r\n\r\n        return null;\r\n    }\r\n\r\n    render() {\r\n        const className = classNames('p-tree p-component', this.props.className, {\r\n            'p-tree-selectable': this.props.selectionMode,\r\n            'p-tree-loading': this.props.loading,\r\n            'p-disabled': this.props.disabled\r\n        });\r\n        const loader = this.renderLoader();\r\n        const content = this.renderModel();\r\n        const filter = this.renderFilter();\r\n\r\n        return (\r\n            <div id={this.props.id} className={className} style={this.props.style}>\r\n                {loader}\r\n                {filter}\r\n                {content}\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}