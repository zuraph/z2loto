{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{classNames}from'../utils/ClassNames';import DomHandler from'../utils/DomHandler';export var ScrollableView=/*#__PURE__*/function(_Component){_inherits(ScrollableView,_Component);var _super=_createSuper(ScrollableView);function ScrollableView(props){var _this;_classCallCheck(this,ScrollableView);_this=_super.call(this,props);_this.onHeaderScroll=_this.onHeaderScroll.bind(_assertThisInitialized(_this));_this.onBodyScroll=_this.onBodyScroll.bind(_assertThisInitialized(_this));return _this;}_createClass(ScrollableView,[{key:\"componentDidMount\",value:function componentDidMount(){this.setScrollHeight();if(!this.props.frozen){var scrollBarWidth=DomHandler.calculateScrollbarWidth();this.scrollHeaderBox.style.marginRight=scrollBarWidth+'px';if(this.scrollFooterBox){this.scrollFooterBox.style.marginRight=scrollBarWidth+'px';}}else{this.scrollBody.style.paddingBottom=DomHandler.calculateScrollbarWidth()+'px';}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps,prevState,snapshot){if(this.props.scrollHeight!==prevProps.scrollHeight){this.setScrollHeight();}if(!this.props.frozen&&this.props.virtualScroll){this.virtualScroller.style.height=this.props.totalRecords*this.props.virtualRowHeight+'px';}if(this.virtualScrollCallback&&!this.props.loading){this.virtualScrollCallback();this.virtualScrollCallback=null;}}},{key:\"setScrollHeight\",value:function setScrollHeight(){if(this.props.scrollHeight){var frozenView=this.container.previousElementSibling;if(frozenView){var frozenScrollBody=DomHandler.findSingle(frozenView,'.p-datatable-scrollable-body');this.scrollBody.style.maxHeight=frozenScrollBody.style.maxHeight;}else{if(this.props.scrollHeight.indexOf('%')!==-1){var datatableContainer=this.findDataTableContainer(this.container);this.scrollBody.style.visibility='hidden';this.scrollBody.style.height='100px';//temporary height to calculate static height\nvar containerHeight=DomHandler.getOuterHeight(datatableContainer);var relativeHeight=DomHandler.getOuterHeight(datatableContainer.parentElement)*parseInt(this.props.scrollHeight,10)/100;var staticHeight=containerHeight-100;//total height of headers, footers, paginators\nvar scrollBodyHeight=relativeHeight-staticHeight;if(this.props.frozen){scrollBodyHeight-=DomHandler.calculateScrollbarWidth();}this.scrollBody.style.height='auto';this.scrollBody.style.maxHeight=scrollBodyHeight+'px';this.scrollBody.style.visibility='visible';}else{this.scrollBody.style.maxHeight=this.props.scrollHeight;}}}}},{key:\"findDataTableContainer\",value:function findDataTableContainer(element){if(element){var el=element;while(el&&!DomHandler.hasClass(el,'p-datatable')){el=el.parentElement;}return el;}else{return null;}}},{key:\"onHeaderScroll\",value:function onHeaderScroll(){this.scrollHeader.scrollLeft=0;}},{key:\"onBodyScroll\",value:function onBodyScroll(){var _this2=this;var frozenView=this.container.previousElementSibling;var frozenScrollBody;if(frozenView){frozenScrollBody=DomHandler.findSingle(frozenView,'.p-datatable-scrollable-body');}this.scrollHeaderBox.style.marginLeft=-1*this.scrollBody.scrollLeft+'px';if(this.scrollFooterBox){this.scrollFooterBox.style.marginLeft=-1*this.scrollBody.scrollLeft+'px';}if(frozenScrollBody){frozenScrollBody.scrollTop=this.scrollBody.scrollTop;}if(this.props.virtualScroll){var viewport=DomHandler.getClientHeight(this.scrollBody);var tableHeight=DomHandler.getOuterHeight(this.scrollTable);var pageHeight=this.props.virtualRowHeight*this.props.rows;var virtualTableHeight=DomHandler.getOuterHeight(this.virtualScroller);var pageCount=virtualTableHeight/pageHeight||1;var scrollBodyTop=this.scrollTable.style.top||'0';if(this.scrollBody.scrollTop+viewport>parseFloat(scrollBodyTop)+tableHeight||this.scrollBody.scrollTop<parseFloat(scrollBodyTop)){if(this.loadingTable){this.loadingTable.style.display='table';this.loadingTable.style.top=this.scrollBody.scrollTop+'px';}var page=Math.floor(this.scrollBody.scrollTop*pageCount/this.scrollBody.scrollHeight)+1;if(this.props.onVirtualScroll){this.props.onVirtualScroll({page:page});this.virtualScrollCallback=function(){if(_this2.loadingTable){_this2.loadingTable.style.display='none';}_this2.scrollTable.style.top=(page-1)*pageHeight+'px';};}}}}},{key:\"renderColGroup\",value:function renderColGroup(){if(this.props.columns&&this.props.columns.length){return/*#__PURE__*/React.createElement(\"colgroup\",{className:\"p-datatable-scrollable-colgroup\"},this.props.columns.map(function(col,i){return/*#__PURE__*/React.createElement(\"col\",{key:col.props.field+'_'+i,style:col.props.headerStyle||col.props.style,className:col.props.headerClassName||col.props.className});}));}else{return null;}}},{key:\"renderLoadingTable\",value:function renderLoadingTable(colGroup){var _this3=this;if(this.props.virtualScroll){return/*#__PURE__*/React.createElement(\"table\",{ref:function ref(el){return _this3.loadingTable=el;},style:{top:'0',display:'none'},className:\"p-datatable-scrollable-body-table p-datatable-loading-virtual-table p-datatable-virtual-table\"},colGroup,this.props.loadingBody);}else{return null;}}},{key:\"render\",value:function render(){var _this4=this;var className=classNames('p-datatable-scrollable-view',{'p-datatable-frozen-view':this.props.frozen,'p-datatable-unfrozen-view':!this.props.frozen&&this.props.frozenWidth});var tableBodyClassName=classNames('p-datatable-scrollable-body-table',this.props.tableClassName,{'p-datatable-virtual-table':this.props.virtualScroll});var tableHeaderClassName=classNames('p-datatable-scrollable-header-table',this.props.tableClassName);var tableFooterClassName=classNames('p-datatable-scrollable-footer-table',this.props.tableClassName);var tableBodyStyle=Object.assign({top:'0'},this.props.tableStyle);var width=this.props.columns?this.props.frozen?this.props.frozenWidth:'calc(100% - '+this.props.frozenWidth+')':0;var left=this.props.frozen?null:this.props.frozenWidth;var colGroup=this.renderColGroup();var loadingTable=this.renderLoadingTable(colGroup);var scrollableBodyStyle=!this.props.frozen&&this.props.scrollHeight?{overflowY:'scroll'}:null;return/*#__PURE__*/React.createElement(\"div\",{className:className,style:{width:width,left:left},ref:function ref(el){_this4.container=el;}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-datatable-scrollable-header\",ref:function ref(el){_this4.scrollHeader=el;},onScroll:this.onHeaderScroll},/*#__PURE__*/React.createElement(\"div\",{className:\"p-datatable-scrollable-header-box\",ref:function ref(el){_this4.scrollHeaderBox=el;}},/*#__PURE__*/React.createElement(\"table\",{className:tableHeaderClassName,style:this.props.tableStyle},colGroup,this.props.header,this.props.frozenBody))),/*#__PURE__*/React.createElement(\"div\",{className:\"p-datatable-scrollable-body\",ref:function ref(el){_this4.scrollBody=el;},style:scrollableBodyStyle,onScroll:this.onBodyScroll},/*#__PURE__*/React.createElement(\"table\",{ref:function ref(el){return _this4.scrollTable=el;},style:tableBodyStyle,className:tableBodyClassName},colGroup,this.props.body),loadingTable,/*#__PURE__*/React.createElement(\"div\",{className:\"p-datatable-virtual-scroller\",ref:function ref(el){_this4.virtualScroller=el;}})),/*#__PURE__*/React.createElement(\"div\",{className:\"p-datatable-scrollable-footer\",ref:function ref(el){_this4.scrollFooter=el;}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-datatable-scrollable-footer-box\",ref:function ref(el){_this4.scrollFooterBox=el;}},/*#__PURE__*/React.createElement(\"table\",{className:tableFooterClassName,style:this.props.tableStyle},colGroup,this.props.footer))));}}]);return ScrollableView;}(Component);ScrollableView.defaultProps={header:null,body:null,footer:null,columns:null,frozen:null,frozenWidth:null,frozenBody:null,virtualScroll:false,virtualRowHeight:null,rows:null,totalRecords:null,loading:false,tableStyle:null,tableClassName:null,onVirtualScroll:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/components/datatable/ScrollableView.js"],"names":["React","Component","classNames","DomHandler","ScrollableView","props","onHeaderScroll","bind","onBodyScroll","setScrollHeight","frozen","scrollBarWidth","calculateScrollbarWidth","scrollHeaderBox","style","marginRight","scrollFooterBox","scrollBody","paddingBottom","prevProps","prevState","snapshot","scrollHeight","virtualScroll","virtualScroller","height","totalRecords","virtualRowHeight","virtualScrollCallback","loading","frozenView","container","previousElementSibling","frozenScrollBody","findSingle","maxHeight","indexOf","datatableContainer","findDataTableContainer","visibility","containerHeight","getOuterHeight","relativeHeight","parentElement","parseInt","staticHeight","scrollBodyHeight","element","el","hasClass","scrollHeader","scrollLeft","marginLeft","scrollTop","viewport","getClientHeight","tableHeight","scrollTable","pageHeight","rows","virtualTableHeight","pageCount","scrollBodyTop","top","parseFloat","loadingTable","display","page","Math","floor","onVirtualScroll","columns","length","map","col","i","field","headerStyle","headerClassName","className","colGroup","loadingBody","frozenWidth","tableBodyClassName","tableClassName","tableHeaderClassName","tableFooterClassName","tableBodyStyle","Object","assign","tableStyle","width","left","renderColGroup","renderLoadingTable","scrollableBodyStyle","overflowY","header","frozenBody","body","scrollFooter","footer","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport DomHandler from '../utils/DomHandler';\r\n\r\nexport class ScrollableView extends Component {\r\n\r\n     static defaultProps = {\r\n        header: null,\r\n        body: null,\r\n        footer: null,\r\n        columns: null,\r\n        frozen: null,\r\n        frozenWidth: null,\r\n        frozenBody: null,\r\n        virtualScroll: false,\r\n        virtualRowHeight: null,\r\n        rows: null,\r\n        totalRecords: null,\r\n        loading: false,\r\n        tableStyle: null,\r\n        tableClassName: null,\r\n        onVirtualScroll: null\r\n     }\r\n\r\n    static propTypes = {\r\n        header: PropTypes.any,\r\n        body: PropTypes.any,\r\n        footer: PropTypes.any,\r\n        columns: PropTypes.array,\r\n        frozen: PropTypes.bool,\r\n        frozenWidth: PropTypes.string,\r\n        frozenBody: PropTypes.any,\r\n        virtualScroll: PropTypes.bool,\r\n        virtualRowHeight: PropTypes.number,\r\n        rows: PropTypes.number,\r\n        totalRcords: PropTypes.number,\r\n        loading: PropTypes.bool,\r\n        tableStyle: PropTypes.any,\r\n        tableClassName: PropTypes.string,\r\n        onVirtualScroll: PropTypes.func\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.onHeaderScroll = this.onHeaderScroll.bind(this);\r\n        this.onBodyScroll = this.onBodyScroll.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.setScrollHeight();\r\n\r\n        if (!this.props.frozen) {\r\n            let scrollBarWidth = DomHandler.calculateScrollbarWidth();\r\n\r\n            this.scrollHeaderBox.style.marginRight = scrollBarWidth + 'px';\r\n            if (this.scrollFooterBox) {\r\n                this.scrollFooterBox.style.marginRight = scrollBarWidth + 'px';\r\n            }\r\n        }\r\n        else {\r\n            this.scrollBody.style.paddingBottom = DomHandler.calculateScrollbarWidth() + 'px';\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n        if (this.props.scrollHeight !== prevProps.scrollHeight) {\r\n            this.setScrollHeight();\r\n        }\r\n\r\n        if (!this.props.frozen && this.props.virtualScroll) {\r\n            this.virtualScroller.style.height = this.props.totalRecords * this.props.virtualRowHeight + 'px';\r\n        }\r\n\r\n        if (this.virtualScrollCallback && !this.props.loading) {\r\n            this.virtualScrollCallback();\r\n            this.virtualScrollCallback = null;\r\n        }\r\n    }\r\n\r\n    setScrollHeight() {\r\n        if(this.props.scrollHeight) {\r\n            let frozenView = this.container.previousElementSibling;\r\n            if(frozenView) {\r\n                let frozenScrollBody = DomHandler.findSingle(frozenView, '.p-datatable-scrollable-body');\r\n                this.scrollBody.style.maxHeight = frozenScrollBody.style.maxHeight;\r\n            }\r\n            else {\r\n                if(this.props.scrollHeight.indexOf('%') !== -1) {\r\n                    let datatableContainer = this.findDataTableContainer(this.container);\r\n                    this.scrollBody.style.visibility = 'hidden';\r\n                    this.scrollBody.style.height = '100px';         //temporary height to calculate static height\r\n                    let containerHeight = DomHandler.getOuterHeight(datatableContainer);\r\n                    let relativeHeight = DomHandler.getOuterHeight(datatableContainer.parentElement) * parseInt(this.props.scrollHeight, 10) / 100;\r\n                    let staticHeight = containerHeight - 100;       //total height of headers, footers, paginators\r\n                    let scrollBodyHeight = (relativeHeight - staticHeight);\r\n\r\n                    if (this.props.frozen) {\r\n                        scrollBodyHeight -= DomHandler.calculateScrollbarWidth();\r\n                    }\r\n\r\n                    this.scrollBody.style.height = 'auto';\r\n                    this.scrollBody.style.maxHeight = scrollBodyHeight + 'px';\r\n                    this.scrollBody.style.visibility = 'visible';\r\n                }\r\n                else {\r\n                    this.scrollBody.style.maxHeight = this.props.scrollHeight;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    findDataTableContainer(element) {\r\n        if(element) {\r\n            let el = element;\r\n            while(el && !DomHandler.hasClass(el, 'p-datatable')) {\r\n                el = el.parentElement;\r\n            }\r\n\r\n            return el;\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    onHeaderScroll() {\r\n        this.scrollHeader.scrollLeft = 0;\r\n    }\r\n\r\n    onBodyScroll() {\r\n        let frozenView = this.container.previousElementSibling;\r\n        let frozenScrollBody;\r\n        if(frozenView) {\r\n            frozenScrollBody = DomHandler.findSingle(frozenView, '.p-datatable-scrollable-body');\r\n        }\r\n\r\n        this.scrollHeaderBox.style.marginLeft = -1 * this.scrollBody.scrollLeft + 'px';\r\n        if(this.scrollFooterBox) {\r\n            this.scrollFooterBox.style.marginLeft = -1 * this.scrollBody.scrollLeft + 'px';\r\n        }\r\n\r\n        if(frozenScrollBody) {\r\n            frozenScrollBody.scrollTop = this.scrollBody.scrollTop;\r\n        }\r\n\r\n        if(this.props.virtualScroll) {\r\n            let viewport = DomHandler.getClientHeight(this.scrollBody);\r\n            let tableHeight = DomHandler.getOuterHeight(this.scrollTable);\r\n            let pageHeight = this.props.virtualRowHeight * this.props.rows;\r\n            let virtualTableHeight = DomHandler.getOuterHeight(this.virtualScroller);\r\n            let pageCount = (virtualTableHeight / pageHeight)||1;\r\n            let scrollBodyTop = this.scrollTable.style.top||'0';\r\n\r\n            if(this.scrollBody.scrollTop + viewport > parseFloat(scrollBodyTop) + tableHeight ||Â this.scrollBody.scrollTop < parseFloat(scrollBodyTop)) {\r\n                if (this.loadingTable) {\r\n                    this.loadingTable.style.display = 'table';\r\n                    this.loadingTable.style.top = this.scrollBody.scrollTop + 'px';\r\n                }\r\n\r\n                let page = Math.floor((this.scrollBody.scrollTop * pageCount) / (this.scrollBody.scrollHeight)) + 1;\r\n                if(this.props.onVirtualScroll) {\r\n                    this.props.onVirtualScroll({\r\n                        page: page\r\n                    });\r\n\r\n                    this.virtualScrollCallback = () => {\r\n                        if (this.loadingTable) {\r\n                            this.loadingTable.style.display = 'none';\r\n                        }\r\n\r\n                        this.scrollTable.style.top = ((page - 1) * pageHeight) + 'px';\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    renderColGroup() {\r\n        if(this.props.columns && this.props.columns.length) {\r\n            return (\r\n                <colgroup className=\"p-datatable-scrollable-colgroup\">\r\n                    {this.props.columns.map((col, i) => <col key={col.props.field + '_' + i} style={col.props.headerStyle || col.props.style} className={col.props.headerClassName || col.props.className}/>)}\r\n                </colgroup>\r\n            );\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    renderLoadingTable(colGroup) {\r\n        if (this.props.virtualScroll) {\r\n            return (\r\n                <table ref={el => this.loadingTable = el} style={{top:'0', display: 'none'}} className=\"p-datatable-scrollable-body-table p-datatable-loading-virtual-table p-datatable-virtual-table\">\r\n                    {colGroup}\r\n                    {this.props.loadingBody}\r\n                </table>\r\n            )\r\n        }\r\n        else {\r\n            return null;\r\n        }\r\n    }\r\n\r\n    render() {\r\n        let className = classNames('p-datatable-scrollable-view', {'p-datatable-frozen-view': this.props.frozen, 'p-datatable-unfrozen-view': !this.props.frozen && this.props.frozenWidth});\r\n        let tableBodyClassName = classNames('p-datatable-scrollable-body-table', this.props.tableClassName, {'p-datatable-virtual-table': this.props.virtualScroll});\r\n        let tableHeaderClassName = classNames('p-datatable-scrollable-header-table', this.props.tableClassName);\r\n        let tableFooterClassName = classNames('p-datatable-scrollable-footer-table', this.props.tableClassName);\r\n        let tableBodyStyle = Object.assign({top:'0'}, this.props.tableStyle);\r\n        let width = this.props.columns ? (this.props.frozen ? this.props.frozenWidth : 'calc(100% - ' + this.props.frozenWidth + ')') : 0;\r\n        let left = this.props.frozen ? null : this.props.frozenWidth;\r\n        let colGroup = this.renderColGroup();\r\n        let loadingTable = this.renderLoadingTable(colGroup);\r\n        let scrollableBodyStyle = !this.props.frozen && this.props.scrollHeight ? { overflowY: 'scroll' } : null;\r\n\r\n        return (\r\n            <div className={className} style={{width: width, left: left}} ref={(el) => { this.container = el; }}>\r\n                <div className=\"p-datatable-scrollable-header\" ref={(el) => { this.scrollHeader= el; }} onScroll={this.onHeaderScroll}>\r\n                    <div className=\"p-datatable-scrollable-header-box\" ref={(el) => { this.scrollHeaderBox = el; }}>\r\n                        <table className={tableHeaderClassName} style={this.props.tableStyle}>\r\n                            {colGroup}\r\n                            {this.props.header}\r\n                            {this.props.frozenBody}\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n                <div className=\"p-datatable-scrollable-body\" ref={(el) => { this.scrollBody = el; }} style={scrollableBodyStyle} onScroll={this.onBodyScroll}>\r\n                    <table ref={el => this.scrollTable = el} style={tableBodyStyle} className={tableBodyClassName}>\r\n                        {colGroup}\r\n                        {this.props.body}\r\n                    </table>\r\n                    {loadingTable}\r\n                    <div className=\"p-datatable-virtual-scroller\" ref={(el) => { this.virtualScroller = el; }}></div>\r\n                </div>\r\n                <div className=\"p-datatable-scrollable-footer\" ref={(el) => { this.scrollFooter = el; }}>\r\n                    <div className=\"p-datatable-scrollable-footer-box\" ref={(el) => { this.scrollFooterBox = el; }}>\r\n                         <table className={tableFooterClassName} style={this.props.tableStyle}>\r\n                            {colGroup}\r\n                            {this.props.footer}\r\n                        </table>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n"]},"metadata":{},"sourceType":"module"}