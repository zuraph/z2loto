{"ast":null,"code":"import _regeneratorRuntime from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import{Column}from\"../../../components/column/Column\";import{DataTable}from\"../../../components/datatable/DataTable\";import React,{useEffect,useState}from\"react\";import{Actions}from\"../../../core\";import{ProgressBar}from\"../../../components/progressbar/ProgressBar\";import classNames from\"classnames\";import{confirmDialog}from\"../../../components/confirmdialog/ConfirmDialog\";import{Button}from\"../../../components/button/Button\";import{InputText}from\"../../../components/inputtext/InputText\";import{Dialog}from\"../../../components/dialog/Dialog\";import{Dropdown}from\"../../../components/dropdown/Dropdown\";export var ProviderCashiers=function ProviderCashiers(_ref){var provider=_ref.provider,onEvent=_ref.onEvent;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loader=_useState4[0],setLoader=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),type=_useState6[0],setType=_useState6[1];var _useState7=useState({id:\"\",name:\"\",note:\"\",disabled:0}),_useState8=_slicedToArray(_useState7,2),current=_useState8[0],setCurrent=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),selected=_useState10[0],setSelected=_useState10[1];useEffect(function(){if(provider){loadData(provider.id);}else{setData(null);}},[provider]);useEffect(function(){if(selected){setCurrent(_objectSpread({},selected));}},[selected]);useEffect(function(){if(type===\"insert\"){setCurrent({id:\"\",name:\"\",note:\"\",disabled:0});}},[type]);var onDelete=function onDelete(){if(selected){confirmDialog({message:'Do you want to delete this record?',header:'Delete Confirmation',icon:'pi pi-info-circle',acceptClassName:'p-button-danger',accept:function(){var _accept=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Actions.Providers.DeleteCashier({cashierId:selected.id,providerId:provider.id});case 2:response=_context.sent;parseResponse(response);case 4:case\"end\":return _context.stop();}}},_callee);}));function accept(){return _accept.apply(this,arguments);}return accept;}(),reject:function reject(){return console.log(\"reject\");}});}};var parseResponse=function parseResponse(response){if(response.status){if(response.data.data===1){loadData(provider.id);onEvent({severity:'success',summary:'Success Message',detail:'Message Content',life:3000});}else{onEvent({severity:'info',summary:'Rejected',detail:'Maybe this already deleted',life:3000});}}else{onEvent({severity:'error',summary:'Rejected',detail:'You have rejected',life:3000});}};var onAction=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!(type===\"insert\")){_context2.next=7;break;}_context2.next=3;return Actions.Providers.InsertCashier(provider.id,{name:current.name,note:current.note,disabled:current.disabled});case 3:response=_context2.sent;parseResponse({status:response.status,data:response.status?{data:1}:{data:0}});_context2.next=11;break;case 7:_context2.next=9;return Actions.Providers.UpdateCashier(provider.id,current.id,{name:current.name,note:current.note,disabled:current.disabled});case 9:response=_context2.sent;parseResponse({status:response.status,data:response.status?{data:1}:{data:0}});case 11:if(response.status){setType(null);}case 12:case\"end\":return _context2.stop();}}},_callee2);}));return function onAction(){return _ref2.apply(this,arguments);};}();var renderFooter=function renderFooter(){return/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{label:\"No\",icon:\"pi pi-times\",onClick:function onClick(){setType(null);},className:\"p-button-text\"}),/*#__PURE__*/React.createElement(Button,{label:\"Yes\",icon:\"pi pi-check\",onClick:function onClick(){return onAction();},autoFocus:true}));};var renderHeader=function renderHeader(){return type===\"insert\"?\"New Cashier(\".concat(provider.name,\")\"):\"Update Cashier (\".concat(provider.name,\")\");};var visible=function visible(){if(!provider){return;}if(type===\"insert\"){return true;}else if(type===\"update\"&&selected){return true;}return false;};var loadData=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(id){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setLoader(true);_context3.next=3;return Actions.Providers.Cashiers(id);case 3:response=_context3.sent;setLoader(false);setData(response.status?response.data.data:[]);case 6:case\"end\":return _context3.stop();}}},_callee3);}));return function loadData(_x){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Dialog,{header:renderHeader,visible:visible(),style:{width:'50vw'},footer:renderFooter,onHide:function onHide(){return setType(null);}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-fluid\",style:{height:\"270px\"}},/*#__PURE__*/React.createElement(\"div\",{className:\"p-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"gName\"},\"Action Name\"),/*#__PURE__*/React.createElement(InputText,{id:\"gName\",type:\"text\",value:current.name,onChange:function onChange(event){return setCurrent(_objectSpread(_objectSpread({},current),{},{name:event.target.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"p-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"note\"},\"Note\"),/*#__PURE__*/React.createElement(InputText,{id:\"note\",type:\"text\",value:current.note,onChange:function onChange(event){return setCurrent(_objectSpread(_objectSpread({},current),{},{note:event.target.value}));}})),/*#__PURE__*/React.createElement(\"div\",{className:\"p-field\"},/*#__PURE__*/React.createElement(\"label\",{htmlFor:\"disabled\"},\"On/Off\"),/*#__PURE__*/React.createElement(Dropdown,{inputId:\"disabled\",optionValue:\"id\",value:current.disabled,options:[{id:1,name:\"On\"},{id:0,name:\"Off\"}],onChange:function onChange(event){return setCurrent(_objectSpread(_objectSpread({},current),{},{disabled:event.value}));},placeholder:\"Select\",optionLabel:\"name\"})))),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-box call\",style:{maxHeight:'400px'}},/*#__PURE__*/React.createElement(\"div\",{className:\"title\"},/*#__PURE__*/React.createElement(\"div\",null,\"Provider Cashiers\"),/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-plus\",onClick:function onClick(){setSelected(null);setType(\"insert\");}}),/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-pencil\",onClick:function onClick(){return setType(\"update\");}}),/*#__PURE__*/React.createElement(\"i\",{className:\"pi pi-trash\",onClick:onDelete})),/*#__PURE__*/React.createElement(\"div\",{className:\"flex-cont grid\"},loader&&/*#__PURE__*/React.createElement(ProgressBar,{style:{height:'6px'},mode:\"indeterminate\"}),/*#__PURE__*/React.createElement(DataTable,{selection:selected,onSelectionChange:function onSelectionChange(e){return setSelected(e.value);},selectionMode:\"single\",dataKey:\"id\",scrollable:true,value:data,className:\"p-datatable-gridlines\",rowClassName:function rowClassName(data){return{'bg-red':data.disabled===1};}},/*#__PURE__*/React.createElement(Column,{field:\"id\",header:\"ID\"}),/*#__PURE__*/React.createElement(Column,{field:\"name\",header:\"Name\",filter:true,filterPlaceholder:\"Search by name\"}),/*#__PURE__*/React.createElement(Column,{field:\"disabled\",header:\"On/Off\"}),/*#__PURE__*/React.createElement(Column,{field:\"note\",header:\"NOTE\"})))));};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/views/transferProviders/components/providerCashiers.js"],"names":["Column","DataTable","React","useEffect","useState","Actions","ProgressBar","classNames","confirmDialog","Button","InputText","Dialog","Dropdown","ProviderCashiers","provider","onEvent","data","setData","loader","setLoader","type","setType","id","name","note","disabled","current","setCurrent","selected","setSelected","loadData","onDelete","message","header","icon","acceptClassName","accept","Providers","DeleteCashier","cashierId","providerId","response","parseResponse","reject","console","log","status","severity","summary","detail","life","onAction","InsertCashier","UpdateCashier","renderFooter","renderHeader","visible","Cashiers","width","height","event","target","value","maxHeight","e"],"mappings":"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","sourcesContent":["import {Column} from \"../../../components/column/Column\";\r\nimport {DataTable} from \"../../../components/datatable/DataTable\";\r\nimport React, {useEffect, useState} from \"react\";\r\nimport {Actions} from \"../../../core\";\r\nimport {ProgressBar} from \"../../../components/progressbar/ProgressBar\";\r\nimport classNames from \"classnames\";\r\nimport {confirmDialog} from \"../../../components/confirmdialog/ConfirmDialog\";\r\nimport {Button} from \"../../../components/button/Button\";\r\nimport {InputText} from \"../../../components/inputtext/InputText\";\r\nimport {Dialog} from \"../../../components/dialog/Dialog\";\r\nimport {Dropdown} from \"../../../components/dropdown/Dropdown\";\r\n\r\nexport const ProviderCashiers = ({provider,onEvent}) =>{\r\n    const [data,setData]=useState(null)\r\n    const [loader,setLoader]=useState(false)\r\n    const [type,setType]=useState(null)\r\n    const [current,setCurrent]=useState({\r\n        id:\"\",\r\n        name:\"\",\r\n        note:\"\",\r\n        disabled:0\r\n    })\r\n    const [selected,setSelected]=useState(null)\r\n    useEffect(()=>{\r\n        if(provider){\r\n            loadData(provider.id)\r\n        }else{\r\n            setData(null)\r\n        }\r\n    },[provider])\r\n    useEffect(()=>{\r\n        if(selected){\r\n            setCurrent({...selected})\r\n        }\r\n    },[selected])\r\n    useEffect(()=>{\r\n        if(type===\"insert\"){\r\n            setCurrent({\r\n                id:\"\",\r\n                name:\"\",\r\n                note:\"\",\r\n                disabled:0\r\n            })\r\n        }\r\n\r\n    },[type])\r\n\r\n    const onDelete=()=>{\r\n        if(selected){\r\n            confirmDialog({\r\n                message: 'Do you want to delete this record?',\r\n                header: 'Delete Confirmation',\r\n                icon: 'pi pi-info-circle',\r\n                acceptClassName: 'p-button-danger',\r\n                accept: async () => {\r\n                    const response = await Actions.Providers.DeleteCashier({cashierId:selected.id,providerId:provider.id})\r\n                    parseResponse(response)\r\n                },\r\n                reject: ()=>console.log(\"reject\")\r\n            });\r\n        }\r\n    }\r\n    const parseResponse = (response) =>{\r\n        if(response.status){\r\n            if(response.data.data===1){\r\n                loadData(provider.id);\r\n                onEvent({severity:'success', summary: 'Success Message', detail:'Message Content', life: 3000})\r\n            }else{\r\n                onEvent({ severity: 'info', summary: 'Rejected', detail: 'Maybe this already deleted', life: 3000 })\r\n            }\r\n        }else{\r\n            onEvent({ severity: 'error', summary: 'Rejected', detail: 'You have rejected', life: 3000 })\r\n        }\r\n    }\r\n    const onAction=async () => {\r\n        let response;\r\n        if (type === \"insert\") {\r\n            response = await Actions.Providers.InsertCashier(provider.id,{name:current.name,note:current.note,disabled:current.disabled})\r\n            parseResponse({\r\n                status:response.status,\r\n                data:response.status? {data:1}:{data:0}\r\n            })\r\n        } else {\r\n            response = await Actions.Providers.UpdateCashier(provider.id,current.id,{name:current.name,note:current.note,disabled:current.disabled})\r\n            parseResponse({\r\n                status:response.status,\r\n                data:response.status? {data:1}:{data:0}\r\n            })\r\n        }\r\n        if(response.status){\r\n            setType(null)\r\n        }\r\n    }\r\n    const renderFooter=()=>{\r\n        return (\r\n            <div>\r\n                <Button label=\"No\" icon=\"pi pi-times\" onClick={() => {\r\n                    setType(null);\r\n                }} className=\"p-button-text\" />\r\n                <Button label=\"Yes\" icon=\"pi pi-check\" onClick={() =>onAction()} autoFocus />\r\n            </div>\r\n        );\r\n    }\r\n    const renderHeader=()=>{\r\n        return  type===\"insert\"? `New Cashier(${provider.name})`:`Update Cashier (${provider.name})`\r\n    };\r\n    const visible=()=>{\r\n        if(!provider){\r\n            return;\r\n        }\r\n        if(type===\"insert\"){\r\n            return true;\r\n        }else if(type===\"update\" && selected){\r\n            return true;\r\n        }\r\n        return false\r\n    }\r\n    const loadData = async (id) => {\r\n        setLoader(true)\r\n        const response = await Actions.Providers.Cashiers(id);\r\n        setLoader(false)\r\n        setData(response.status?response.data.data:[])\r\n    }\r\n\r\n\r\n    return (\r\n        <>\r\n            <Dialog header={renderHeader} visible={visible()} style={{ width: '50vw' }} footer={renderFooter} onHide={() => setType(null)}>\r\n                <div className=\"p-fluid\" style={{height:\"270px\"}}>\r\n                    <div className=\"p-field\">\r\n                        <label htmlFor=\"gName\">Action Name</label>\r\n                        <InputText id=\"gName\" type=\"text\"  value={current.name} onChange={event => setCurrent({...current,name:event.target.value})}/>\r\n                    </div>\r\n                    <div className=\"p-field\">\r\n                        <label htmlFor=\"note\">Note</label>\r\n                        <InputText id=\"note\" type=\"text\" value={current.note} onChange={event => setCurrent({...current,note:event.target.value})} />\r\n                    </div>\r\n                    <div className=\"p-field\">\r\n                        <label htmlFor=\"disabled\">On/Off</label>\r\n                        <Dropdown inputId=\"disabled\" optionValue={\"id\"} value={current.disabled} options={[{id:1,name:\"On\"},{id:0,name: \"Off\"}]} onChange={event=>setCurrent({...current,disabled:event.value})} placeholder=\"Select\" optionLabel=\"name\"/>\r\n                    </div>\r\n                </div>\r\n            </Dialog>\r\n            <div className=\"flex-box call\" style={{maxHeight:'400px'}}>\r\n                <div className=\"title\">\r\n                    <div>Provider Cashiers</div>\r\n                    <i className=\"pi pi-plus\" onClick={()=>{\r\n                        setSelected(null)\r\n                        setType(\"insert\")}}/>\r\n                    <i className=\"pi pi-pencil\" onClick={()=>setType(\"update\")}/>\r\n                    <i className=\"pi pi-trash\" onClick={onDelete}/>\r\n                </div>\r\n                <div className=\"flex-cont grid\">\r\n                    {loader && <ProgressBar style={{ height: '6px' }}mode=\"indeterminate\" />}\r\n\r\n                    <DataTable\r\n                        selection={selected} onSelectionChange={e => setSelected(e.value)} selectionMode=\"single\" dataKey=\"id\"\r\n                        scrollable value={data}  className=\"p-datatable-gridlines\" rowClassName={data => {\r\n                        return {\r\n                            'bg-red': data.disabled === 1\r\n                        }\r\n                    }}>\r\n                        <Column field=\"id\" header=\"ID\"/>\r\n                        <Column field=\"name\" header=\"Name\" filter  filterPlaceholder=\"Search by name\"/>\r\n                        <Column field=\"disabled\" header=\"On/Off\"/>\r\n                        <Column field=\"note\" header=\"NOTE\"/>\r\n                    </DataTable>\r\n                </div>\r\n\r\n            </div>\r\n\r\n        </>\r\n\r\n    )\r\n}\r\n"]},"metadata":{},"sourceType":"module"}