{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _classCallCheck from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _assertThisInitialized from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\zura.ph\\\\WebstormProjects\\\\zz-regul\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import DomHandler from'../utils/DomHandler';import{InputText}from'../inputtext/InputText';import{classNames}from'../utils/ClassNames';import{tip}from'../tooltip/Tooltip';export var InputMask=/*#__PURE__*/function(_Component){_inherits(InputMask,_Component);var _super=_createSuper(InputMask);function InputMask(props){var _this;_classCallCheck(this,InputMask);_this=_super.call(this,props);_this.onFocus=_this.onFocus.bind(_assertThisInitialized(_this));_this.onBlur=_this.onBlur.bind(_assertThisInitialized(_this));_this.onKeyDown=_this.onKeyDown.bind(_assertThisInitialized(_this));_this.onKeyPress=_this.onKeyPress.bind(_assertThisInitialized(_this));_this.onInput=_this.onInput.bind(_assertThisInitialized(_this));_this.handleInputChange=_this.handleInputChange.bind(_assertThisInitialized(_this));return _this;}_createClass(InputMask,[{key:\"caret\",value:function caret(first,last){var range,begin,end;if(!this.input.offsetParent||this.input!==document.activeElement){return;}if(typeof first==='number'){begin=first;end=typeof last==='number'?last:begin;if(this.input.setSelectionRange){this.input.setSelectionRange(begin,end);}else if(this.input['createTextRange']){range=this.input['createTextRange']();range.collapse(true);range.moveEnd('character',end);range.moveStart('character',begin);range.select();}}else{if(this.input.setSelectionRange){begin=this.input.selectionStart;end=this.input.selectionEnd;}else if(document['selection']&&document['selection'].createRange){range=document['selection'].createRange();begin=0-range.duplicate().moveStart('character',-100000);end=begin+range.text.length;}return{begin:begin,end:end};}}},{key:\"isCompleted\",value:function isCompleted(){for(var i=this.firstNonMaskPos;i<=this.lastRequiredNonMaskPos;i++){if(this.tests[i]&&this.buffer[i]===this.getPlaceholder(i)){return false;}}return true;}},{key:\"getPlaceholder\",value:function getPlaceholder(i){if(i<this.props.slotChar.length){return this.props.slotChar.charAt(i);}return this.props.slotChar.charAt(0);}},{key:\"getValue\",value:function getValue(){return this.props.unmask?this.getUnmaskedValue():this.input&&this.input.value;}},{key:\"seekNext\",value:function seekNext(pos){while(++pos<this.len&&!this.tests[pos]){;}return pos;}},{key:\"seekPrev\",value:function seekPrev(pos){while(--pos>=0&&!this.tests[pos]){;}return pos;}},{key:\"shiftL\",value:function shiftL(begin,end){var i,j;if(begin<0){return;}for(i=begin,j=this.seekNext(end);i<this.len;i++){if(this.tests[i]){if(j<this.len&&this.tests[i].test(this.buffer[j])){this.buffer[i]=this.buffer[j];this.buffer[j]=this.getPlaceholder(j);}else{break;}j=this.seekNext(j);}}this.writeBuffer();this.caret(Math.max(this.firstNonMaskPos,begin));}},{key:\"shiftR\",value:function shiftR(pos){var i,c,j,t;for(i=pos,c=this.getPlaceholder(pos);i<this.len;i++){if(this.tests[i]){j=this.seekNext(i);t=this.buffer[i];this.buffer[i]=c;if(j<this.len&&this.tests[j].test(t)){c=t;}else{break;}}}}},{key:\"handleAndroidInput\",value:function handleAndroidInput(e){var curVal=this.input.value;var pos=this.caret();if(this.oldVal&&this.oldVal.length&&this.oldVal.length>curVal.length){// a deletion or backspace happened\nthis.checkVal(true);while(pos.begin>0&&!this.tests[pos.begin-1]){pos.begin--;}if(pos.begin===0){while(pos.begin<this.firstNonMaskPos&&!this.tests[pos.begin]){pos.begin++;}}this.caret(pos.begin,pos.begin);}else{this.checkVal(true);while(pos.begin<this.len&&!this.tests[pos.begin]){pos.begin++;}this.caret(pos.begin,pos.begin);}if(this.props.onComplete&&this.isCompleted()){this.props.onComplete({originalEvent:e,value:this.getValue()});}}},{key:\"onBlur\",value:function onBlur(e){this.focus=false;this.checkVal();this.updateModel(e);this.updateFilledState();if(this.props.onBlur){this.props.onBlur(e);}if(this.input.value!==this.focusText){var event=document.createEvent('HTMLEvents');event.initEvent('change',true,false);this.input.dispatchEvent(event);}}},{key:\"onKeyDown\",value:function onKeyDown(e){if(this.props.readOnly){return;}var k=e.which||e.keyCode,pos,begin,end;var iPhone=/iphone/i.test(DomHandler.getUserAgent());this.oldVal=this.input.value;//backspace, delete, and escape get special treatment\nif(k===8||k===46||iPhone&&k===127){pos=this.caret();begin=pos.begin;end=pos.end;if(end-begin===0){begin=k!==46?this.seekPrev(begin):end=this.seekNext(begin-1);end=k===46?this.seekNext(end):end;}this.clearBuffer(begin,end);this.shiftL(begin,end-1);this.updateModel(e);e.preventDefault();}else if(k===13){// enter\nthis.onBlur(e);this.updateModel(e);}else if(k===27){// escape\nthis.input.value=this.focusText;this.caret(0,this.checkVal());this.updateModel(e);e.preventDefault();}}},{key:\"onKeyPress\",value:function onKeyPress(e){var _this2=this;if(this.props.readOnly){return;}var k=e.which||e.keyCode,pos=this.caret(),p,c,next,completed;if(e.ctrlKey||e.altKey||e.metaKey||k<32){//Ignore\nreturn;}else if(k&&k!==13){if(pos.end-pos.begin!==0){this.clearBuffer(pos.begin,pos.end);this.shiftL(pos.begin,pos.end-1);}p=this.seekNext(pos.begin-1);if(p<this.len){c=String.fromCharCode(k);if(this.tests[p].test(c)){this.shiftR(p);this.buffer[p]=c;this.writeBuffer();next=this.seekNext(p);if(/android/i.test(DomHandler.getUserAgent())){//Path for CSP Violation on FireFox OS 1.1\nvar proxy=function proxy(){_this2.caret(next);};setTimeout(proxy,0);}else{this.caret(next);}if(pos.begin<=this.lastRequiredNonMaskPos){completed=this.isCompleted();}}}e.preventDefault();}this.updateModel(e);if(this.props.onComplete&&completed){this.props.onComplete({originalEvent:e,value:this.getValue()});}}},{key:\"clearBuffer\",value:function clearBuffer(start,end){var i;for(i=start;i<end&&i<this.len;i++){if(this.tests[i]){this.buffer[i]=this.getPlaceholder(i);}}}},{key:\"writeBuffer\",value:function writeBuffer(){this.input.value=this.buffer.join('');}},{key:\"checkVal\",value:function checkVal(allow){this.isValueChecked=true;//try to place characters where they belong\nvar test=this.input.value,lastMatch=-1,i,c,pos;for(i=0,pos=0;i<this.len;i++){if(this.tests[i]){this.buffer[i]=this.getPlaceholder(i);while(pos++<test.length){c=test.charAt(pos-1);if(this.tests[i].test(c)){this.buffer[i]=c;lastMatch=i;break;}}if(pos>test.length){this.clearBuffer(i+1,this.len);break;}}else{if(this.buffer[i]===test.charAt(pos)){pos++;}if(i<this.partialPosition){lastMatch=i;}}}if(allow){this.writeBuffer();}else if(lastMatch+1<this.partialPosition){if(this.props.autoClear||this.buffer.join('')===this.defaultBuffer){// Invalid value. Remove it and replace it with the\n// mask, which is the default behavior.\nif(this.input.value)this.input.value='';this.clearBuffer(0,this.len);}else{// Invalid value, but we opt to show the value to the\n// user and allow them to correct their mistake.\nthis.writeBuffer();}}else{this.writeBuffer();this.input.value=this.input.value.substring(0,lastMatch+1);}return this.partialPosition?i:this.firstNonMaskPos;}},{key:\"onFocus\",value:function onFocus(e){var _this3=this;if(this.props.readOnly){return;}this.focus=true;clearTimeout(this.caretTimeoutId);var pos;this.focusText=this.input.value;pos=this.checkVal();this.caretTimeoutId=setTimeout(function(){if(_this3.input!==document.activeElement){return;}_this3.writeBuffer();if(pos===_this3.props.mask.replace(\"?\",\"\").length){_this3.caret(0,pos);}else{_this3.caret(pos);}_this3.updateFilledState();},10);if(this.props.onFocus){this.props.onFocus(e);}}},{key:\"onInput\",value:function onInput(event){if(this.androidChrome)this.handleAndroidInput(event);else this.handleInputChange(event);}},{key:\"handleInputChange\",value:function handleInputChange(e){if(this.props.readOnly){return;}var pos=this.checkVal(true);this.caret(pos);this.updateModel(e);if(this.props.onComplete&&this.isCompleted()){this.props.onComplete({originalEvent:e,value:this.getValue()});}}},{key:\"getUnmaskedValue\",value:function getUnmaskedValue(){var unmaskedBuffer=[];for(var i=0;i<this.buffer.length;i++){var c=this.buffer[i];if(this.tests[i]&&c!==this.getPlaceholder(i)){unmaskedBuffer.push(c);}}return unmaskedBuffer.join('');}},{key:\"updateModel\",value:function updateModel(e){if(this.props.onChange){var val=this.props.unmask?this.getUnmaskedValue():e&&e.target.value;this.props.onChange({originalEvent:e,value:this.defaultBuffer!==val?val:'',stopPropagation:function stopPropagation(){},preventDefault:function preventDefault(){},target:{name:this.props.name,id:this.props.id,value:this.defaultBuffer!==val?val:''}});}}},{key:\"updateFilledState\",value:function updateFilledState(){if(this.input&&this.input.value&&this.input.value.length>0)DomHandler.addClass(this.input,'p-filled');else DomHandler.removeClass(this.input,'p-filled');}},{key:\"updateValue\",value:function updateValue(allow){var _this4=this;var pos;if(this.input){if(this.props.value==null){this.input.value='';}else{this.input.value=this.props.value;pos=this.checkVal(allow);setTimeout(function(){if(_this4.input){_this4.writeBuffer();return _this4.checkVal(allow);}},10);}this.focusText=this.input.value;}this.updateFilledState();return pos;}},{key:\"isValueUpdated\",value:function isValueUpdated(){return this.props.unmask?this.props.value!==this.getUnmaskedValue():this.defaultBuffer!==this.input.value&&this.input.value!==this.props.value;}},{key:\"init\",value:function init(){this.tests=[];this.partialPosition=this.props.mask.length;this.len=this.props.mask.length;this.firstNonMaskPos=null;this.defs={'9':'[0-9]','a':'[A-Za-z]','*':'[A-Za-z0-9]'};var ua=DomHandler.getUserAgent();this.androidChrome=/chrome/i.test(ua)&&/android/i.test(ua);var maskTokens=this.props.mask.split('');for(var i=0;i<maskTokens.length;i++){var c=maskTokens[i];if(c==='?'){this.len--;this.partialPosition=i;}else if(this.defs[c]){this.tests.push(new RegExp(this.defs[c]));if(this.firstNonMaskPos===null){this.firstNonMaskPos=this.tests.length-1;}if(i<this.partialPosition){this.lastRequiredNonMaskPos=this.tests.length-1;}}else{this.tests.push(null);}}this.buffer=[];for(var _i=0;_i<maskTokens.length;_i++){var _c=maskTokens[_i];if(_c!=='?'){if(this.defs[_c])this.buffer.push(this.getPlaceholder(_i));else this.buffer.push(_c);}}this.defaultBuffer=this.buffer.join('');}},{key:\"componentDidMount\",value:function componentDidMount(){this.init();this.updateValue();if(this.props.tooltip){this.renderTooltip();}}},{key:\"componentDidUpdate\",value:function componentDidUpdate(prevProps){if(prevProps.tooltip!==this.props.tooltip||prevProps.tooltipOptions!==this.props.tooltipOptions){if(this.tooltip)this.tooltip.update(_objectSpread({content:this.props.tooltip},this.props.tooltipOptions||{}));else this.renderTooltip();}if(this.isValueUpdated()){this.updateValue();}if(prevProps.mask!==this.props.mask){this.init();this.caret(this.updateValue(true));this.updateModel();}}},{key:\"componentWillUnmount\",value:function componentWillUnmount(){if(this.tooltip){this.tooltip.destroy();this.tooltip=null;}}},{key:\"renderTooltip\",value:function renderTooltip(){this.tooltip=tip({target:this.input,content:this.props.tooltip,options:this.props.tooltipOptions});}},{key:\"render\",value:function render(){var _this5=this;var inputMaskClassName=classNames('p-inputmask',this.props.className);return/*#__PURE__*/React.createElement(InputText,{id:this.props.id,ref:function ref(el){return _this5.input=el;},type:this.props.type,name:this.props.name,style:this.props.style,className:inputMaskClassName,placeholder:this.props.placeholder,size:this.props.size,maxLength:this.props.maxlength,tabIndex:this.props.tabIndex,disabled:this.props.disabled,readOnly:this.props.readOnly,onFocus:this.onFocus,onBlur:this.onBlur,onKeyDown:this.onKeyDown,onKeyPress:this.onKeyPress,onInput:this.onInput,onPaste:this.handleInputChange,required:this.props.required,\"aria-labelledby\":this.props.ariaLabelledBy});}}]);return InputMask;}(Component);InputMask.defaultProps={id:null,value:null,type:'text',mask:null,slotChar:'_',autoClear:true,unmask:false,style:null,className:null,placeholder:null,size:null,maxlength:null,tabIndex:null,disabled:false,readOnly:false,name:null,required:false,tooltip:null,tooltipOptions:null,ariaLabelledBy:null,onComplete:null,onChange:null,onFocus:null,onBlur:null};","map":{"version":3,"sources":["C:/Users/zura.ph/WebstormProjects/zz-regul/src/components/inputmask/InputMask.js"],"names":["React","Component","DomHandler","InputText","classNames","tip","InputMask","props","onFocus","bind","onBlur","onKeyDown","onKeyPress","onInput","handleInputChange","first","last","range","begin","end","input","offsetParent","document","activeElement","setSelectionRange","collapse","moveEnd","moveStart","select","selectionStart","selectionEnd","createRange","duplicate","text","length","i","firstNonMaskPos","lastRequiredNonMaskPos","tests","buffer","getPlaceholder","slotChar","charAt","unmask","getUnmaskedValue","value","pos","len","j","seekNext","test","writeBuffer","caret","Math","max","c","t","e","curVal","oldVal","checkVal","onComplete","isCompleted","originalEvent","getValue","focus","updateModel","updateFilledState","focusText","event","createEvent","initEvent","dispatchEvent","readOnly","k","which","keyCode","iPhone","getUserAgent","seekPrev","clearBuffer","shiftL","preventDefault","p","next","completed","ctrlKey","altKey","metaKey","String","fromCharCode","shiftR","proxy","setTimeout","start","join","allow","isValueChecked","lastMatch","partialPosition","autoClear","defaultBuffer","substring","clearTimeout","caretTimeoutId","mask","replace","androidChrome","handleAndroidInput","unmaskedBuffer","push","onChange","val","target","stopPropagation","name","id","addClass","removeClass","defs","ua","maskTokens","split","RegExp","init","updateValue","tooltip","renderTooltip","prevProps","tooltipOptions","update","content","isValueUpdated","destroy","options","inputMaskClassName","className","el","type","style","placeholder","size","maxlength","tabIndex","disabled","required","ariaLabelledBy","defaultProps"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport DomHandler from '../utils/DomHandler';\r\nimport { InputText } from '../inputtext/InputText';\r\nimport { classNames } from '../utils/ClassNames';\r\nimport { tip } from '../tooltip/Tooltip';\r\n\r\nexport class InputMask extends Component {\r\n\r\n    static defaultProps = {\r\n        id: null,\r\n        value: null,\r\n        type: 'text',\r\n        mask: null,\r\n        slotChar: '_',\r\n        autoClear: true,\r\n        unmask: false,\r\n        style: null,\r\n        className: null,\r\n        placeholder: null,\r\n        size: null,\r\n        maxlength: null,\r\n        tabIndex: null,\r\n        disabled: false,\r\n        readOnly: false,\r\n        name: null,\r\n        required: false,\r\n        tooltip: null,\r\n        tooltipOptions: null,\r\n        ariaLabelledBy: null,\r\n        onComplete: null,\r\n        onChange: null,\r\n        onFocus: null,\r\n        onBlur: null\r\n    }\r\n\r\n    static propTypes = {\r\n        id: PropTypes.string,\r\n        value: PropTypes.string,\r\n        type: PropTypes.string,\r\n        mask: PropTypes.string,\r\n        slotChar: PropTypes.string,\r\n        autoClear: PropTypes.bool,\r\n        unmask: PropTypes.bool,\r\n        style: PropTypes.object,\r\n        className: PropTypes.string,\r\n        placeholder: PropTypes.string,\r\n        size: PropTypes.number,\r\n        maxlength: PropTypes.number,\r\n        tabIndex: PropTypes.number,\r\n        disabled: PropTypes.bool,\r\n        readOnly: PropTypes.bool,\r\n        name: PropTypes.string,\r\n        required: PropTypes.bool,\r\n        tooltip: PropTypes.string,\r\n        tooltipOptions: PropTypes.object,\r\n        ariaLabelledBy: PropTypes.string,\r\n        onComplete: PropTypes.func,\r\n        onChange: PropTypes.func,\r\n        onFocus: PropTypes.func,\r\n        onBlur: PropTypes.func\r\n    }\r\n\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.onFocus = this.onFocus.bind(this);\r\n        this.onBlur = this.onBlur.bind(this);\r\n        this.onKeyDown = this.onKeyDown.bind(this);\r\n        this.onKeyPress = this.onKeyPress.bind(this);\r\n        this.onInput = this.onInput.bind(this);\r\n        this.handleInputChange = this.handleInputChange.bind(this);\r\n    }\r\n\r\n    caret(first, last) {\r\n        let range, begin, end;\r\n\r\n        if (!this.input.offsetParent || this.input !== document.activeElement) {\r\n            return;\r\n        }\r\n\r\n        if (typeof first === 'number') {\r\n            begin = first;\r\n            end = (typeof last === 'number') ? last : begin;\r\n            if (this.input.setSelectionRange) {\r\n                this.input.setSelectionRange(begin, end);\r\n            }\r\n            else if (this.input['createTextRange']) {\r\n                range = this.input['createTextRange']();\r\n                range.collapse(true);\r\n                range.moveEnd('character', end);\r\n                range.moveStart('character', begin);\r\n                range.select();\r\n            }\r\n        }\r\n        else {\r\n            if (this.input.setSelectionRange) {\r\n                begin = this.input.selectionStart;\r\n                end = this.input.selectionEnd;\r\n            }\r\n            else if (document['selection'] && document['selection'].createRange) {\r\n                range = document['selection'].createRange();\r\n                begin = 0 - range.duplicate().moveStart('character', -100000);\r\n                end = begin + range.text.length;\r\n            }\r\n\r\n            return { begin: begin, end: end };\r\n        }\r\n    }\r\n\r\n    isCompleted() {\r\n        for (let i = this.firstNonMaskPos; i <= this.lastRequiredNonMaskPos; i++) {\r\n            if (this.tests[i] && this.buffer[i] === this.getPlaceholder(i)) {\r\n                return false;\r\n            }\r\n        }\r\n\r\n        return true;\r\n    }\r\n\r\n    getPlaceholder(i) {\r\n        if (i < this.props.slotChar.length) {\r\n            return this.props.slotChar.charAt(i);\r\n        }\r\n        return this.props.slotChar.charAt(0);\r\n    }\r\n\r\n    getValue() {\r\n        return this.props.unmask ? this.getUnmaskedValue() : this.input && this.input.value;\r\n    }\r\n\r\n    seekNext(pos) {\r\n        while (++pos < this.len && !this.tests[pos]);\r\n        return pos;\r\n    }\r\n\r\n    seekPrev(pos) {\r\n        while (--pos >= 0 && !this.tests[pos]);\r\n        return pos;\r\n    }\r\n\r\n    shiftL(begin, end) {\r\n        let i, j;\r\n\r\n        if (begin < 0) {\r\n            return;\r\n        }\r\n\r\n        for (i = begin, j = this.seekNext(end); i < this.len; i++) {\r\n            if (this.tests[i]) {\r\n                if (j < this.len && this.tests[i].test(this.buffer[j])) {\r\n                    this.buffer[i] = this.buffer[j];\r\n                    this.buffer[j] = this.getPlaceholder(j);\r\n                } else {\r\n                    break;\r\n                }\r\n\r\n                j = this.seekNext(j);\r\n            }\r\n        }\r\n        this.writeBuffer();\r\n        this.caret(Math.max(this.firstNonMaskPos, begin));\r\n    }\r\n\r\n    shiftR(pos) {\r\n        let i, c, j, t;\r\n\r\n        for (i = pos, c = this.getPlaceholder(pos); i < this.len; i++) {\r\n            if (this.tests[i]) {\r\n                j = this.seekNext(i);\r\n                t = this.buffer[i];\r\n                this.buffer[i] = c;\r\n                if (j < this.len && this.tests[j].test(t)) {\r\n                    c = t;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    handleAndroidInput(e) {\r\n        let curVal = this.input.value;\r\n        let pos = this.caret();\r\n        if (this.oldVal && this.oldVal.length && this.oldVal.length > curVal.length) {\r\n            // a deletion or backspace happened\r\n            this.checkVal(true);\r\n            while (pos.begin > 0 && !this.tests[pos.begin - 1])\r\n                pos.begin--;\r\n            if (pos.begin === 0) {\r\n                while (pos.begin < this.firstNonMaskPos && !this.tests[pos.begin])\r\n                    pos.begin++;\r\n            }\r\n            this.caret(pos.begin, pos.begin);\r\n        } else {\r\n            this.checkVal(true);\r\n            while (pos.begin < this.len && !this.tests[pos.begin])\r\n                pos.begin++;\r\n\r\n            this.caret(pos.begin, pos.begin);\r\n        }\r\n\r\n        if (this.props.onComplete && this.isCompleted()) {\r\n            this.props.onComplete({\r\n                originalEvent: e,\r\n                value: this.getValue()\r\n            });\r\n        }\r\n    }\r\n\r\n    onBlur(e) {\r\n        this.focus = false;\r\n        this.checkVal();\r\n        this.updateModel(e);\r\n        this.updateFilledState();\r\n\r\n        if (this.props.onBlur) {\r\n            this.props.onBlur(e);\r\n        }\r\n\r\n        if (this.input.value !== this.focusText) {\r\n            let event = document.createEvent('HTMLEvents');\r\n            event.initEvent('change', true, false);\r\n            this.input.dispatchEvent(event);\r\n        }\r\n    }\r\n\r\n    onKeyDown(e) {\r\n        if (this.props.readOnly) {\r\n            return;\r\n        }\r\n\r\n        let k = e.which || e.keyCode,\r\n            pos,\r\n            begin,\r\n            end;\r\n        let iPhone = /iphone/i.test(DomHandler.getUserAgent());\r\n        this.oldVal = this.input.value;\r\n\r\n        //backspace, delete, and escape get special treatment\r\n        if (k === 8 || k === 46 || (iPhone && k === 127)) {\r\n            pos = this.caret();\r\n            begin = pos.begin;\r\n            end = pos.end;\r\n\r\n\r\n            if (end - begin === 0) {\r\n                begin = k !== 46 ? this.seekPrev(begin) : (end = this.seekNext(begin - 1));\r\n                end = k === 46 ? this.seekNext(end) : end;\r\n            }\r\n\r\n            this.clearBuffer(begin, end);\r\n            this.shiftL(begin, end - 1);\r\n            this.updateModel(e);\r\n\r\n            e.preventDefault();\r\n        } else if (k === 13) { // enter\r\n            this.onBlur(e);\r\n            this.updateModel(e);\r\n        } else if (k === 27) { // escape\r\n            this.input.value = this.focusText;\r\n            this.caret(0, this.checkVal());\r\n            this.updateModel(e);\r\n            e.preventDefault();\r\n        }\r\n    }\r\n\r\n    onKeyPress(e) {\r\n        if (this.props.readOnly) {\r\n            return;\r\n        }\r\n\r\n        let k = e.which || e.keyCode,\r\n            pos = this.caret(),\r\n            p,\r\n            c,\r\n            next,\r\n            completed;\r\n\r\n        if (e.ctrlKey || e.altKey || e.metaKey || k < 32) {//Ignore\r\n            return;\r\n        } else if (k && k !== 13) {\r\n            if (pos.end - pos.begin !== 0) {\r\n                this.clearBuffer(pos.begin, pos.end);\r\n                this.shiftL(pos.begin, pos.end - 1);\r\n            }\r\n\r\n            p = this.seekNext(pos.begin - 1);\r\n            if (p < this.len) {\r\n                c = String.fromCharCode(k);\r\n                if (this.tests[p].test(c)) {\r\n                    this.shiftR(p);\r\n\r\n                    this.buffer[p] = c;\r\n                    this.writeBuffer();\r\n                    next = this.seekNext(p);\r\n\r\n                    if (/android/i.test(DomHandler.getUserAgent())) {\r\n                        //Path for CSP Violation on FireFox OS 1.1\r\n                        let proxy = () => {\r\n                            this.caret(next);\r\n                        };\r\n\r\n                        setTimeout(proxy, 0);\r\n                    } else {\r\n                        this.caret(next);\r\n                    }\r\n                    if (pos.begin <= this.lastRequiredNonMaskPos) {\r\n                        completed = this.isCompleted();\r\n                    }\r\n                }\r\n            }\r\n            e.preventDefault();\r\n        }\r\n\r\n        this.updateModel(e);\r\n\r\n        if (this.props.onComplete && completed) {\r\n            this.props.onComplete({\r\n                originalEvent: e,\r\n                value: this.getValue()\r\n            });\r\n        }\r\n    }\r\n\r\n    clearBuffer(start, end) {\r\n        let i;\r\n        for (i = start; i < end && i < this.len; i++) {\r\n            if (this.tests[i]) {\r\n                this.buffer[i] = this.getPlaceholder(i);\r\n            }\r\n        }\r\n    }\r\n\r\n    writeBuffer() {\r\n        this.input.value = this.buffer.join('');\r\n    }\r\n\r\n    checkVal(allow) {\r\n        this.isValueChecked = true;\r\n        //try to place characters where they belong\r\n        let test = this.input.value,\r\n            lastMatch = -1,\r\n            i,\r\n            c,\r\n            pos;\r\n\r\n        for (i = 0, pos = 0; i < this.len; i++) {\r\n            if (this.tests[i]) {\r\n                this.buffer[i] = this.getPlaceholder(i);\r\n                while (pos++ < test.length) {\r\n                    c = test.charAt(pos - 1);\r\n                    if (this.tests[i].test(c)) {\r\n                        this.buffer[i] = c;\r\n                        lastMatch = i;\r\n                        break;\r\n                    }\r\n                }\r\n                if (pos > test.length) {\r\n                    this.clearBuffer(i + 1, this.len);\r\n                    break;\r\n                }\r\n            } else {\r\n                if (this.buffer[i] === test.charAt(pos)) {\r\n                    pos++;\r\n                }\r\n                if (i < this.partialPosition) {\r\n                    lastMatch = i;\r\n                }\r\n            }\r\n        }\r\n        if (allow) {\r\n            this.writeBuffer();\r\n        } else if (lastMatch + 1 < this.partialPosition) {\r\n            if (this.props.autoClear || this.buffer.join('') === this.defaultBuffer) {\r\n                // Invalid value. Remove it and replace it with the\r\n                // mask, which is the default behavior.\r\n                if (this.input.value) this.input.value = '';\r\n                this.clearBuffer(0, this.len);\r\n            } else {\r\n                // Invalid value, but we opt to show the value to the\r\n                // user and allow them to correct their mistake.\r\n                this.writeBuffer();\r\n            }\r\n        } else {\r\n            this.writeBuffer();\r\n            this.input.value = this.input.value.substring(0, lastMatch + 1);\r\n        }\r\n        return (this.partialPosition ? i : this.firstNonMaskPos);\r\n    }\r\n\r\n    onFocus(e) {\r\n        if (this.props.readOnly) {\r\n            return;\r\n        }\r\n\r\n        this.focus = true;\r\n\r\n        clearTimeout(this.caretTimeoutId);\r\n        let pos;\r\n\r\n        this.focusText = this.input.value;\r\n\r\n        pos = this.checkVal();\r\n\r\n        this.caretTimeoutId = setTimeout(() => {\r\n            if (this.input !== document.activeElement) {\r\n                return;\r\n            }\r\n            this.writeBuffer();\r\n            if (pos === this.props.mask.replace(\"?\", \"\").length) {\r\n                this.caret(0, pos);\r\n            } else {\r\n                this.caret(pos);\r\n            }\r\n            this.updateFilledState();\r\n        }, 10);\r\n\r\n        if (this.props.onFocus) {\r\n            this.props.onFocus(e);\r\n        }\r\n    }\r\n\r\n    onInput(event) {\r\n        if (this.androidChrome)\r\n            this.handleAndroidInput(event);\r\n        else\r\n            this.handleInputChange(event);\r\n    }\r\n\r\n    handleInputChange(e) {\r\n        if (this.props.readOnly) {\r\n            return;\r\n        }\r\n\r\n        let pos = this.checkVal(true);\r\n        this.caret(pos);\r\n        this.updateModel(e);\r\n        if (this.props.onComplete && this.isCompleted()) {\r\n            this.props.onComplete({\r\n                originalEvent: e,\r\n                value: this.getValue()\r\n            });\r\n        }\r\n    }\r\n\r\n    getUnmaskedValue() {\r\n        let unmaskedBuffer = [];\r\n        for (let i = 0; i < this.buffer.length; i++) {\r\n            let c = this.buffer[i];\r\n            if (this.tests[i] && c !== this.getPlaceholder(i)) {\r\n                unmaskedBuffer.push(c);\r\n            }\r\n        }\r\n\r\n        return unmaskedBuffer.join('');\r\n    }\r\n\r\n    updateModel(e) {\r\n        if (this.props.onChange) {\r\n            let val = this.props.unmask ? this.getUnmaskedValue() : e && e.target.value;\r\n            this.props.onChange({\r\n                originalEvent: e,\r\n                value: (this.defaultBuffer !== val) ? val : '',\r\n                stopPropagation : () =>{},\r\n                preventDefault : () =>{},\r\n                target: {\r\n                    name: this.props.name,\r\n                    id: this.props.id,\r\n                    value : (this.defaultBuffer !== val) ? val : '',\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    updateFilledState() {\r\n        if (this.input && this.input.value && this.input.value.length > 0)\r\n            DomHandler.addClass(this.input, 'p-filled');\r\n        else\r\n            DomHandler.removeClass(this.input, 'p-filled');\r\n    }\r\n\r\n    updateValue(allow) {\r\n        let pos;\r\n\r\n        if (this.input) {\r\n            if (this.props.value == null) {\r\n                this.input.value = '';\r\n            }\r\n            else {\r\n                this.input.value = this.props.value;\r\n                pos = this.checkVal(allow);\r\n\r\n                setTimeout(() => {\r\n                    if(this.input) {\r\n                        this.writeBuffer();\r\n                        return this.checkVal(allow);\r\n                    }\r\n                }, 10);\r\n            }\r\n\r\n            this.focusText = this.input.value;\r\n        }\r\n\r\n        this.updateFilledState();\r\n\r\n        return pos;\r\n    }\r\n\r\n    isValueUpdated() {\r\n        return this.props.unmask ?\r\n                        (this.props.value !== this.getUnmaskedValue()) :\r\n                        (this.defaultBuffer !== this.input.value && this.input.value !== this.props.value);\r\n    }\r\n\r\n    init() {\r\n        this.tests = [];\r\n        this.partialPosition = this.props.mask.length;\r\n        this.len = this.props.mask.length;\r\n        this.firstNonMaskPos = null;\r\n        this.defs = {\r\n            '9': '[0-9]',\r\n            'a': '[A-Za-z]',\r\n            '*': '[A-Za-z0-9]'\r\n        };\r\n\r\n        let ua = DomHandler.getUserAgent();\r\n        this.androidChrome = /chrome/i.test(ua) && /android/i.test(ua);\r\n\r\n        let maskTokens = this.props.mask.split('');\r\n        for (let i = 0; i < maskTokens.length; i++) {\r\n            let c = maskTokens[i];\r\n            if (c === '?') {\r\n                this.len--;\r\n                this.partialPosition = i;\r\n            }\r\n            else if (this.defs[c]) {\r\n                this.tests.push(new RegExp(this.defs[c]));\r\n                if (this.firstNonMaskPos === null) {\r\n                    this.firstNonMaskPos = this.tests.length - 1;\r\n                }\r\n                if (i < this.partialPosition) {\r\n                    this.lastRequiredNonMaskPos = this.tests.length - 1;\r\n                }\r\n            }\r\n            else {\r\n                this.tests.push(null);\r\n            }\r\n        }\r\n\r\n        this.buffer = [];\r\n        for (let i = 0; i < maskTokens.length; i++) {\r\n            let c = maskTokens[i];\r\n            if (c !== '?') {\r\n                if (this.defs[c])\r\n                    this.buffer.push(this.getPlaceholder(i));\r\n                else\r\n                    this.buffer.push(c);\r\n            }\r\n        }\r\n        this.defaultBuffer = this.buffer.join('');\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.init();\r\n        this.updateValue();\r\n\r\n        if (this.props.tooltip) {\r\n            this.renderTooltip();\r\n        }\r\n    }\r\n\r\n    componentDidUpdate(prevProps) {\r\n        if (prevProps.tooltip !== this.props.tooltip || prevProps.tooltipOptions !== this.props.tooltipOptions) {\r\n            if (this.tooltip)\r\n                this.tooltip.update({ content: this.props.tooltip, ...(this.props.tooltipOptions || {}) });\r\n            else\r\n                this.renderTooltip();\r\n        }\r\n\r\n        if (this.isValueUpdated()) {\r\n            this.updateValue();\r\n        }\r\n\r\n        if (prevProps.mask !== this.props.mask) {\r\n            this.init();\r\n            this.caret(this.updateValue(true));\r\n            this.updateModel();\r\n        }\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        if (this.tooltip) {\r\n            this.tooltip.destroy();\r\n            this.tooltip = null;\r\n        }\r\n    }\r\n\r\n    renderTooltip() {\r\n        this.tooltip = tip({\r\n            target: this.input,\r\n            content: this.props.tooltip,\r\n            options: this.props.tooltipOptions\r\n        });\r\n    }\r\n\r\n    render() {\r\n        let inputMaskClassName = classNames('p-inputmask', this.props.className);\r\n        return (\r\n            <InputText id={this.props.id} ref={(el) => this.input = el} type={this.props.type} name={this.props.name} style={this.props.style} className={inputMaskClassName} placeholder={this.props.placeholder}\r\n                size={this.props.size} maxLength={this.props.maxlength} tabIndex={this.props.tabIndex} disabled={this.props.disabled} readOnly={this.props.readOnly}\r\n                onFocus={this.onFocus} onBlur={this.onBlur} onKeyDown={this.onKeyDown} onKeyPress={this.onKeyPress}\r\n                onInput={this.onInput} onPaste={this.handleInputChange} required={this.props.required} aria-labelledby={this.props.ariaLabelledBy} />\r\n        );\r\n    }\r\n\r\n}\r\n"]},"metadata":{},"sourceType":"module"}